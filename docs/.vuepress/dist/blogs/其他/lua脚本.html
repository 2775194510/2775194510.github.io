<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>lua脚本基本语法 | 小泽认真奋进</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/xiaoze-blog/assets/css/0.styles.25451b68.css" as="style"><link rel="preload" href="/xiaoze-blog/assets/js/app.d39324c1.js" as="script"><link rel="preload" href="/xiaoze-blog/assets/js/11.59e3daef.js" as="script"><link rel="preload" href="/xiaoze-blog/assets/js/1.a4abe869.js" as="script"><link rel="preload" href="/xiaoze-blog/assets/js/45.3369469c.js" as="script"><link rel="prefetch" href="/xiaoze-blog/assets/js/10.fe718b67.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/100.a85e53e9.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/101.a002fc76.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/102.2c4fa1e9.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/103.cbc72b44.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/104.72e87e58.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/105.4b772c25.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/106.6c35711e.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/107.2e01f343.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/108.175bf573.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/109.0e3bb0ab.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/110.81418ee0.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/111.a8776178.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/112.6b57b0f1.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/113.2428826c.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/114.2550921e.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/115.708fd51b.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/116.ae47f7bb.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/117.77edae25.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/118.b06aa05d.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/119.51002f50.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/12.aa47fbd5.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/120.8ca054a8.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/121.8cc5168d.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/122.b7669b65.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/123.4cebf12c.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/124.cbf6478e.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/125.d4d1cdf1.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/126.d932cddc.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/127.198f244d.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/128.97ee3526.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/129.a70711f5.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/13.191930d9.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/130.fdae0434.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/131.3af42e83.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/132.d75e7ee1.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/133.1d86018e.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/134.1c9a18e0.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/135.a1ad7b37.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/136.5645f11a.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/137.82a43e94.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/138.8c58b2e8.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/139.3a4e0f70.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/14.77882deb.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/140.43956937.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/141.5f6a6bc6.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/142.06776b07.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/143.c360447c.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/144.1bb2236f.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/145.803c65f0.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/146.f6a01ede.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/147.b1f87754.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/148.451628ff.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/149.ca415f13.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/15.5a93ba9c.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/150.dc677616.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/151.bbdfd073.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/152.c2e626e0.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/153.2cc26b8b.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/154.fb864f0e.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/155.bd5a6e93.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/156.2efa8404.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/157.6d8dee97.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/158.3b3e2900.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/159.fb4214d0.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/16.6932a7ea.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/160.b092a3ab.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/161.c716a05b.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/162.45d2ed23.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/163.0e1a7e7c.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/164.caad8ec9.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/165.4f4e8ddb.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/166.d94949ef.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/167.bbe9eab6.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/168.83be1c95.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/169.5fabf6fa.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/17.64831132.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/170.c992e3d6.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/171.ce7af062.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/172.a6f50a96.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/173.2d8a2d90.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/174.8ee6d124.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/175.63935c90.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/176.4596f4ec.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/177.a0595d4c.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/178.dd5dc877.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/179.22f6d4bf.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/18.1c0156d9.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/180.4cf89afa.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/181.b272b737.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/182.3e390c68.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/183.917c0618.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/184.438e1c9b.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/185.1050a367.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/186.dad00df0.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/187.ece8826a.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/188.04c47cbe.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/189.0fa97405.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/19.d294d17a.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/190.ab0ad982.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/191.eacba89d.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/192.19222727.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/193.47ec95b9.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/194.a47d74af.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/195.add13935.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/196.ce2169b3.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/197.ea40c1bc.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/198.7d71e49e.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/199.20938300.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/20.58bca508.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/200.725af04a.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/201.32fb3672.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/202.8aab55f4.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/203.6ddacf25.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/204.8bbeaa2c.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/205.af5a9809.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/206.4327fc6b.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/21.7121fa45.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/22.1a5948c9.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/23.2b11247a.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/24.4cf4d70e.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/25.d56e99a1.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/26.3eb4e3ab.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/27.f71511c7.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/28.faa7a9d0.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/29.04ac7cdc.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/3.de851bbe.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/30.032507c9.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/31.9fbd874a.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/32.aba4098c.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/33.2681c7da.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/34.fb82388a.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/35.8b485c6c.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/36.51bcde72.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/37.2a1ce753.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/38.263cd9c4.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/39.53bd2f04.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/4.882b36a4.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/40.e8b4d0c4.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/41.ce391e16.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/42.bc6af3c4.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/43.0c9bceb9.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/44.99247b80.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/46.8000525a.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/47.ccaf9f9c.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/48.52a8f72b.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/49.1e3b61b3.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/5.3c9ac559.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/50.215a63d8.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/51.8dcf9152.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/52.ec059e88.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/53.63bdc735.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/54.1af2cdd1.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/55.194aa1a1.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/56.32b2a086.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/57.db35b0b0.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/58.257094a7.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/59.3150f145.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/6.b4d23ffb.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/60.d3b09cfb.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/61.e9a0c2fa.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/62.41cfd097.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/63.3710fcfe.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/64.bf3e2102.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/65.9ccb226c.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/66.de9996ba.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/67.ca376300.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/68.735a18c9.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/69.7829e931.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/7.488038ef.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/70.3e45586d.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/71.1bf2e11d.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/72.6011f758.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/73.68be334c.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/74.d5497efa.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/75.032ec742.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/76.6d3b67f6.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/77.95251f0b.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/78.d8953885.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/79.11ca18c9.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/8.015c705b.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/80.1093681d.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/81.f9bf7781.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/82.0e6788b0.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/83.0e9bba59.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/84.78e96d3b.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/85.866b1244.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/86.72301efc.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/87.95c0306d.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/88.e235fb07.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/89.3d43be8a.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/9.22b8140a.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/90.cad95ae6.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/91.71175f75.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/92.ab0ceb10.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/93.91e5b398.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/94.c0d0818d.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/95.b5be1651.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/96.cc37fc86.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/97.b9d0eb64.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/98.a76f7fa0.js"><link rel="prefetch" href="/xiaoze-blog/assets/js/99.ce5654e2.js">
    <link rel="stylesheet" href="/xiaoze-blog/assets/css/0.styles.25451b68.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>小泽认真奋进</h3> <p class="description" data-v-59e6cb88></p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2024
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/xiaoze-blog/" class="home-link router-link-active"><img src="/xiaoze-blog/logo.png" alt="小泽认真奋进" class="logo"> <span class="site-name">小泽认真奋进</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/xiaoze-blog/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      前端
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/前端/jquery/jquery.html" class="nav-link"><i class="undefined"></i>
  jQuery笔记
</a></li><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/前端/vue2/vue2.html" class="nav-link"><i class="undefined"></i>
  vue2
</a></li><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/前端/vue3/1：创建vue3工程.html" class="nav-link"><i class="undefined"></i>
  vue3
</a></li><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/前端/ES6/ES6语法.html" class="nav-link"><i class="undefined"></i>
  ES6
</a></li><li class="dropdown-item"><!----> <a href="https://www.baidu.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  其它链接
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      后端
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/后端/java/Java面向对象.html" class="nav-link"><i class="undefined"></i>
  Java
</a></li><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/后端/juc/1：线程基础.html" class="nav-link"><i class="undefined"></i>
  Juc
</a></li><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/后端/mybatis/1：mybatis入门教程.html" class="nav-link"><i class="undefined"></i>
  Mybatis
</a></li><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/后端/mybatisPlus/1：mybatisPlus相关业务.html" class="nav-link"><i class="undefined"></i>
  MybatisPlus
</a></li><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/后端/redis/redis基本数据类型.html" class="nav-link"><i class="undefined"></i>
  Redis
</a></li><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/后端/spring/1：SpringAop.html" class="nav-link"><i class="undefined"></i>
  Spring
</a></li><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/后端/springboot/1：SpringBoot拦截器.html" class="nav-link"><i class="undefined"></i>
  SpringBoot
</a></li><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/后端/springcloud/1：springcloud入门.html" class="nav-link"><i class="undefined"></i>
  SpringCloud
</a></li><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/后端/rabbitmq/1：RabbitMq.html" class="nav-link"><i class="undefined"></i>
  消息中间件
</a></li><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/后端/shardingsphere/1：shardingsphere基础.html" class="nav-link"><i class="undefined"></i>
  Shardingsphere
</a></li><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/后端/elasticSearch/1：docker安装elasticSearch.html" class="nav-link"><i class="undefined"></i>
  ElasticSearch
</a></li><li class="dropdown-item"><!----> <a href="https://www.baidu.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  其它链接
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      大数据
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/大数据/Flink/1：Flink概述.html" class="nav-link"><i class="undefined"></i>
  flink
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      运维
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/运维/docker/1：docker安装部署.html" class="nav-link"><i class="undefined"></i>
  docker
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      数据库
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/数据库/mysql/mysql基本语法.html" class="nav-link"><i class="undefined"></i>
  Mysql
</a></li><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/数据库/oracle/oracle基本语法.html" class="nav-link"><i class="undefined"></i>
  Oracle
</a></li><li class="dropdown-item"><!----> <a href="https://www.runoob.com/mysql/mysql-tutorial.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  学习链接
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      算法
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>算法基础和思想</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/xiaoze-blog/blogs/算法/数据结构/1：数组和矩阵.html" class="nav-link"><i class="undefined"></i>
  数据结构基础
</a></li></ul></li><li class="dropdown-item"><h4>java</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/xiaoze-blog/blogs/算法/java/Java算法.html" class="nav-link"><i class="undefined"></i>
  Java
</a></li></ul></li><li class="dropdown-item"><h4>Mysql</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/xiaoze-blog/blogs/算法/MySQL/MySQL算法.html" class="nav-link"><i class="undefined"></i>
  Mysql
</a></li></ul></li><li class="dropdown-item"><!----> <a href="https://leetcode.cn/problemset/all/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  刷题链接
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      架构
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>设计模式</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/xiaoze-blog/blogs/架构/设计模式/1：单例模式.html" class="nav-link"><i class="undefined"></i>
  设计模式学习入口
</a></li></ul></li><li class="dropdown-item"><h4>分布式系统</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/xiaoze-blog/blogs/架构/分布式系统/1：全局唯一id实现方案.html" class="nav-link"><i class="undefined"></i>
  1：全局唯一id实现方案
</a></li><li class="dropdown-subitem"><a href="/xiaoze-blog/blogs/架构/分布式系统/2：经典限流算法.html" class="nav-link"><i class="undefined"></i>
  2：经典限流算法
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      其他
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/其他/maven基本知识.html" class="nav-link"><i class="undefined"></i>
  maven
</a></li><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/其他/gitee.html" class="nav-link"><i class="undefined"></i>
  gitee
</a></li><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/其他/linux.html" class="nav-link"><i class="undefined"></i>
  linux
</a></li><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/其他/Nginx.html" class="nav-link"><i class="undefined"></i>
  nginx
</a></li><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/其他/lua脚本.html" class="nav-link"><i class="undefined"></i>
  lua
</a></li><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/python/基本语法/1：基本数据类型.html" class="nav-link"><i class="undefined"></i>
  python
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      好玩的东西
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/好玩的东西/cmd命令/1：cmd打开本地电脑文件.html" class="nav-link"><i class="undefined"></i>
  电脑杂货铺
</a></li><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/好玩的东西/markdown语法/markdown.html" class="nav-link"><i class="undefined"></i>
  markdown语法
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      工具集合
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/工具/css/h5/h5.html" class="nav-link"><i class="undefined"></i>
  常用css
</a></li><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/工具/spring/springboot/自定义注解/1：自定义校验字段注解.html" class="nav-link"><i class="undefined"></i>
  spring工具
</a></li><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/工具/redis/redis工具类/1：redisUtils快捷操作redis.html" class="nav-link"><i class="undefined"></i>
  redis工具
</a></li><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/面试/Java基础上.html" class="nav-link"><i class="undefined"></i>
  面试大全
</a></li></ul></div></div><div class="nav-item"><a href="/xiaoze-blog/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><img src="/xiaoze-blog/titletop.jpg" alt="author-avatar" class="personal-img" data-v-1fad0c41> <!----> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>194</h3> <h6 data-v-1fad0c41>Articles</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>41</h3> <h6 data-v-1fad0c41>Tags</h6></div></div> <ul class="social-links" data-v-1fad0c41><li class="social-item" data-v-1fad0c41><i class="iconfont reco-github" style="color:#e15b64;" data-v-1fad0c41></i></li><li class="social-item" data-v-1fad0c41><i class="iconfont reco-mayun" style="color:#fb9b5f;" data-v-1fad0c41></i></li><li class="social-item" data-v-1fad0c41><i class="iconfont reco-csdn" style="color:#e15b64;" data-v-1fad0c41></i></li></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/xiaoze-blog/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      前端
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/前端/jquery/jquery.html" class="nav-link"><i class="undefined"></i>
  jQuery笔记
</a></li><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/前端/vue2/vue2.html" class="nav-link"><i class="undefined"></i>
  vue2
</a></li><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/前端/vue3/1：创建vue3工程.html" class="nav-link"><i class="undefined"></i>
  vue3
</a></li><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/前端/ES6/ES6语法.html" class="nav-link"><i class="undefined"></i>
  ES6
</a></li><li class="dropdown-item"><!----> <a href="https://www.baidu.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  其它链接
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      后端
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/后端/java/Java面向对象.html" class="nav-link"><i class="undefined"></i>
  Java
</a></li><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/后端/juc/1：线程基础.html" class="nav-link"><i class="undefined"></i>
  Juc
</a></li><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/后端/mybatis/1：mybatis入门教程.html" class="nav-link"><i class="undefined"></i>
  Mybatis
</a></li><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/后端/mybatisPlus/1：mybatisPlus相关业务.html" class="nav-link"><i class="undefined"></i>
  MybatisPlus
</a></li><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/后端/redis/redis基本数据类型.html" class="nav-link"><i class="undefined"></i>
  Redis
</a></li><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/后端/spring/1：SpringAop.html" class="nav-link"><i class="undefined"></i>
  Spring
</a></li><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/后端/springboot/1：SpringBoot拦截器.html" class="nav-link"><i class="undefined"></i>
  SpringBoot
</a></li><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/后端/springcloud/1：springcloud入门.html" class="nav-link"><i class="undefined"></i>
  SpringCloud
</a></li><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/后端/rabbitmq/1：RabbitMq.html" class="nav-link"><i class="undefined"></i>
  消息中间件
</a></li><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/后端/shardingsphere/1：shardingsphere基础.html" class="nav-link"><i class="undefined"></i>
  Shardingsphere
</a></li><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/后端/elasticSearch/1：docker安装elasticSearch.html" class="nav-link"><i class="undefined"></i>
  ElasticSearch
</a></li><li class="dropdown-item"><!----> <a href="https://www.baidu.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  其它链接
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      大数据
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/大数据/Flink/1：Flink概述.html" class="nav-link"><i class="undefined"></i>
  flink
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      运维
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/运维/docker/1：docker安装部署.html" class="nav-link"><i class="undefined"></i>
  docker
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      数据库
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/数据库/mysql/mysql基本语法.html" class="nav-link"><i class="undefined"></i>
  Mysql
</a></li><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/数据库/oracle/oracle基本语法.html" class="nav-link"><i class="undefined"></i>
  Oracle
</a></li><li class="dropdown-item"><!----> <a href="https://www.runoob.com/mysql/mysql-tutorial.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  学习链接
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      算法
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>算法基础和思想</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/xiaoze-blog/blogs/算法/数据结构/1：数组和矩阵.html" class="nav-link"><i class="undefined"></i>
  数据结构基础
</a></li></ul></li><li class="dropdown-item"><h4>java</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/xiaoze-blog/blogs/算法/java/Java算法.html" class="nav-link"><i class="undefined"></i>
  Java
</a></li></ul></li><li class="dropdown-item"><h4>Mysql</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/xiaoze-blog/blogs/算法/MySQL/MySQL算法.html" class="nav-link"><i class="undefined"></i>
  Mysql
</a></li></ul></li><li class="dropdown-item"><!----> <a href="https://leetcode.cn/problemset/all/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  刷题链接
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      架构
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>设计模式</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/xiaoze-blog/blogs/架构/设计模式/1：单例模式.html" class="nav-link"><i class="undefined"></i>
  设计模式学习入口
</a></li></ul></li><li class="dropdown-item"><h4>分布式系统</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/xiaoze-blog/blogs/架构/分布式系统/1：全局唯一id实现方案.html" class="nav-link"><i class="undefined"></i>
  1：全局唯一id实现方案
</a></li><li class="dropdown-subitem"><a href="/xiaoze-blog/blogs/架构/分布式系统/2：经典限流算法.html" class="nav-link"><i class="undefined"></i>
  2：经典限流算法
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      其他
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/其他/maven基本知识.html" class="nav-link"><i class="undefined"></i>
  maven
</a></li><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/其他/gitee.html" class="nav-link"><i class="undefined"></i>
  gitee
</a></li><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/其他/linux.html" class="nav-link"><i class="undefined"></i>
  linux
</a></li><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/其他/Nginx.html" class="nav-link"><i class="undefined"></i>
  nginx
</a></li><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/其他/lua脚本.html" class="nav-link"><i class="undefined"></i>
  lua
</a></li><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/python/基本语法/1：基本数据类型.html" class="nav-link"><i class="undefined"></i>
  python
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      好玩的东西
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/好玩的东西/cmd命令/1：cmd打开本地电脑文件.html" class="nav-link"><i class="undefined"></i>
  电脑杂货铺
</a></li><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/好玩的东西/markdown语法/markdown.html" class="nav-link"><i class="undefined"></i>
  markdown语法
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      工具集合
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/工具/css/h5/h5.html" class="nav-link"><i class="undefined"></i>
  常用css
</a></li><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/工具/spring/springboot/自定义注解/1：自定义校验字段注解.html" class="nav-link"><i class="undefined"></i>
  spring工具
</a></li><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/工具/redis/redis工具类/1：redisUtils快捷操作redis.html" class="nav-link"><i class="undefined"></i>
  redis工具
</a></li><li class="dropdown-item"><!----> <a href="/xiaoze-blog/blogs/面试/Java基础上.html" class="nav-link"><i class="undefined"></i>
  面试大全
</a></li></ul></div></div><div class="nav-item"><a href="/xiaoze-blog/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>其他</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>maven</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/xiaoze-blog/blogs/其他/maven基本知识.html" class="sidebar-link">maven基本知识</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>gitee</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/xiaoze-blog/blogs/其他/gitee.html" class="sidebar-link">【gitee】1：gitee基本语法</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>linux</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/xiaoze-blog/blogs/其他/linux.html" class="sidebar-link">【Linux】1：Linux基本语法</a></li><li><a href="/xiaoze-blog/blogs/其他/linux特殊命令.html" class="sidebar-link">【Linux】2：Linux特殊命令</a></li><li><a href="/xiaoze-blog/blogs/其他/linux-vi命令.html" class="sidebar-link">【Linux】3：vi命令</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>nginx</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/xiaoze-blog/blogs/其他/Nginx.html" class="sidebar-link">nginx学习</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading open"><span>lua</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/xiaoze-blog/blogs/其他/lua脚本.html" class="active sidebar-link">lua脚本基本语法</a></li><li><a href="/xiaoze-blog/blogs/其他/redis操作lua脚本.html" class="sidebar-link">redis操作lua脚本</a></li></ul></section></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>lua脚本基本语法</h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2024
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">lua脚本基本语法</h1> <div data-v-8a445198><i class="iconfont reco-account" data-v-8a445198><span data-v-8a445198>胡昊泽</span></i> <i class="iconfont reco-date" data-v-8a445198><span data-v-8a445198>9/13/2023</span></i> <!----> <i class="tags iconfont reco-tag" data-v-8a445198><span class="tag-item" data-v-8a445198>lua</span></i></div></div> <div class="theme-reco-content content__default"><p><a href="https://www.runoob.com/lua/lua-environment.html" target="_blank" rel="noopener noreferrer">学习网站<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_1-linux环境配置"><a href="#_1-linux环境配置" class="header-anchor">#</a> 1：linux环境配置</h2> <div class="language-linux line-numbers-mode"><pre class="language-text"><code>curl -R -O http://www.lua.org/ftp/lua-5.3.0.tar.gz
tar zxf lua-5.3.0.tar.gz
cd lua-5.3.0
make linux test
make install
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_2-基本语法"><a href="#_2-基本语法" class="header-anchor">#</a> 2：基本语法</h2> <blockquote><p>windows和linux语法一直，但是需要在Linux文件中加入头<code>#!/usr/local/bin/lua</code>,之后语法以Windows为例。</p></blockquote> <h3 id="_1-基本数据类型"><a href="#_1-基本数据类型" class="header-anchor">#</a> 1）基本数据类型</h3> <p>Lua 中有 8 个基本类型分别为：<code>nil</code>、<code>boolean</code>、<code>number</code>、<code>string</code>、<code>userdata</code>、<code>function</code>、<code>thread</code> 和 <code>table</code>。
<img src="/xiaoze-blog/assets/img/luaType.3f3dbe6d.png" alt="luaType">
我们可以使用 type 函数测试给定变量或者值的类型：</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>      <span class="token comment">--&gt; string</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token number">10.4</span><span class="token operator">*</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>             <span class="token comment">--&gt; number</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span>print<span class="token punctuation">)</span><span class="token punctuation">)</span>              <span class="token comment">--&gt; function</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span>               <span class="token comment">--&gt; function</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token keyword">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span>               <span class="token comment">--&gt; boolean</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token keyword">nil</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token comment">--&gt; nil</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span>X<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token comment">--&gt; string</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p style="color:red;">nil（空）</p> <p>nil 类型表示一种没有任何有效值，它只有一个值 -- nil，例如打印一个没有赋值的变量，便会输出一个 nil 值：</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">-- nil</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p style="color:red;">boolean（布尔）</p> <p>boolean 类型只有两个可选值：true（真） 和 false（假），Lua 把 false 和 nil 看作是 false，其他的都为 true，数字 0 也是 true:</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token keyword">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token keyword">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token keyword">nil</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
 
<span class="token keyword">if</span> <span class="token keyword">false</span> <span class="token keyword">or</span> <span class="token keyword">nil</span> <span class="token keyword">then</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;至少有一个是 true&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">else</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;false 和 nil 都为 false&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">end</span>

<span class="token keyword">if</span> <span class="token number">0</span> <span class="token keyword">then</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;数字 0 是 true&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">else</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;数字 0 为 false&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">end</span>

<span class="token comment">--boolean</span>
<span class="token comment">--boolean</span>
<span class="token comment">--nil</span>
<span class="token comment">--false 和 nil 都为 false</span>
<span class="token comment">--数字 0 是 true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p style="color:red;">number（数字）</p> <p>Lua 默认只有一种 number 类型 -- double（双精度）类型（默认类型可以修改 luaconf.h 里的定义），以下几种写法都被看作是 number 类型：</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token number">2.2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token number">0.2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token number">2e+1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token number">0.2e-1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token number">7.8263692594256e-06</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">--number</span>
<span class="token comment">--number</span>
<span class="token comment">--number</span>
<span class="token comment">--number</span>
<span class="token comment">--number</span>
<span class="token comment">--number</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p style="color:red;">string（字符串）</p> <p>nil 类型表示一种没有任何有效值，它只有一个值 -- nil，例如打印一个没有赋值的变量，便会输出一个 nil 值：</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code>string1 <span class="token operator">=</span> <span class="token string">&quot;this is string1&quot;</span>
string2 <span class="token operator">=</span> <span class="token string">'this is string2'</span>

html <span class="token operator">=</span> <span class="token string">[[
&lt;html&gt;
&lt;head&gt;&lt;/head&gt;
&lt;body&gt;
    &lt;a href=&quot;http://www.baidu.com/&quot;&gt;百度&lt;/a&gt;
&lt;/body&gt;
&lt;/html&gt;
]]</span>
<span class="token function">print</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span>

<span class="token comment">--&lt;html&gt;</span>
<span class="token comment">--&lt;head&gt;&lt;/head&gt;</span>
<span class="token comment">--&lt;body&gt;</span>
<span class="token comment">--   &lt;a href=&quot;http://www.baidu.com/&quot;&gt;百度&lt;/a&gt;</span>
<span class="token comment">--&lt;/body&gt;</span>
<span class="token comment">--&lt;/html&gt;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p style="color:red;">table（表）</p> <p>在 Lua 里，table 的创建是通过&quot;构造表达式&quot;来完成，最简单构造表达式是{}，用来创建一个空表。也可以在表里添加一些数据，直接初始化表:</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token comment">-- 创建一个空的 table</span>
<span class="token keyword">local</span> tbl1 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
 
<span class="token comment">-- 直接初始表</span>
<span class="token keyword">local</span> tbl2 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;apple&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;pear&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;orange&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;grape&quot;</span><span class="token punctuation">}</span>

<span class="token comment">-- table_test2.lua 脚本文件</span>
<span class="token keyword">local</span> tbl <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;apple&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;pear&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;orange&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;grape&quot;</span><span class="token punctuation">}</span>
<span class="token keyword">for</span> key<span class="token punctuation">,</span> val <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>tbl<span class="token punctuation">)</span> <span class="token keyword">do</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Key&quot;</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span>
<span class="token keyword">end</span>

<span class="token comment">--Key    1</span>
<span class="token comment">--Key    2</span>
<span class="token comment">--Key    3</span>
<span class="token comment">--Key    4</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p style="color:red;">function（函数）</p> <p>在 Lua 中，函数是被看作是&quot;第一类值（First-Class Value）&quot;，函数可以存在变量里:</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token comment">-- function_test.lua 脚本文件</span>
<span class="token keyword">function</span> <span class="token function">factorial1</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
    <span class="token keyword">if</span> n <span class="token operator">==</span> <span class="token number">0</span> <span class="token keyword">then</span>
        <span class="token keyword">return</span> <span class="token number">1</span>
    <span class="token keyword">else</span>
        <span class="token keyword">return</span> n <span class="token operator">*</span> <span class="token function">factorial1</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">factorial1</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
factorial2 <span class="token operator">=</span> factorial1
<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">factorial2</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">--120</span>
<span class="token comment">--120</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p style="color:red;">thread（线程）</p> <p>在 Lua 里，最主要的线程是协同程序（coroutine）。它跟线程（thread）差不多，拥有自己独立的栈、局部变量和指令指针，可以跟其他协同程序共享全局变量和其他大部分东西。</p> <p>线程跟协程的区别：线程可以同时多个运行，而协程任意时刻只能运行一个，并且处于运行状态的协程只有被挂起（suspend）时才会暂停。</p> <p style="color:red;">userdata（自定义类型）</p>
userdata 是一种用户自定义数据，用于表示一种由应用程序或 C/C++ 语言库所创建的类型，可以将任意 C/C++ 的任意数据类型的数据（通常是 struct 和 指针）存储到 Lua 变量中调用。
<h4 id="示例1-基本数据类型"><a href="#示例1-基本数据类型" class="header-anchor">#</a> 示例1-基本数据类型</h4> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token comment">--[[
基本数据类型
    Lua 中有八种基本类型： nil、boolean、number、 string、function、userdata、 thread和table；number 包括整型和浮点型
    string 单引号，双引号都表示string，不管是单引号，双引号，单个字符多个字符
    转义 用反斜杠 \n 换行    \t 制表符

    userdata 自定义数据格式
    thread   协程
    table   表
    在lua 中，只有false 和 nil 才表示假
    0和空串表示真
    库函数type返回一个描述给定值类型的字符串
    type (v)返回其唯一参数的类型，编码为字符串
]]</span><span class="token comment">--</span>

a<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> a <span class="token keyword">then</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;真&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">else</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;假&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>


b<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> b <span class="token keyword">then</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;真&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">else</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;假&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>

c<span class="token operator">=</span><span class="token keyword">nil</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> c <span class="token keyword">then</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;真&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">else</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;假&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>

d<span class="token operator">=</span><span class="token keyword">false</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> d <span class="token keyword">then</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;真&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">else</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;假&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span>print<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


a<span class="token operator">=</span><span class="token string">&quot;a\nb\nc\td\t\tef&quot;</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
b<span class="token operator">=</span><span class="token string">[=[a\nb\nc\td\t\tef[[aaaaa]]]=]</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>



<span class="token comment">--不管是单引号，双引号，单个字符多个字符</span>
a<span class="token operator">=</span><span class="token string">&quot;abc&quot;</span>
b<span class="token operator">=</span><span class="token string">'abc'</span>
c<span class="token operator">=</span><span class="token string">'a'</span>
d<span class="token operator">=</span><span class="token string">&quot;a&quot;</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

a<span class="token operator">=</span><span class="token keyword">nil</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token keyword">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token keyword">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token number">1.23</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token number">1234567890</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br></div></div><h4 id="示例2-基本数据类型-function"><a href="#示例2-基本数据类型-function" class="header-anchor">#</a> 示例2-基本数据类型（function）</h4> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token comment">--[[

基本数据类型
    Lua 中有八种基本类型： nil、boolean、number、 string、function、userdata、 thread和table

    function 在lua 中一个基本的数据类型，是第一类值

    格式
    function funcName()
        ...
        ...
    end

    传参或返回值，都很自由

    function 可以作为参数被传递，也可以作为值被赋值给另一个变量

]]</span><span class="token comment">--</span>

<span class="token comment">--c++</span>
<span class="token comment">--void func1(int a,int b){}</span>
<span class="token comment">--int func2(int a,int b){return a+b; }</span>

<span class="token comment">--lua</span>

<span class="token keyword">function</span> <span class="token function">func1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;这里是func1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>


<span class="token function">func1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">--传参</span>
<span class="token keyword">function</span> <span class="token function">func2</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">)</span>
    <span class="token function">print</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">end</span>
<span class="token function">func2</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">,</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span><span class="token keyword">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token keyword">function</span> <span class="token function">func3</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">)</span>
    <span class="token keyword">return</span> a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">,</span><span class="token string">&quot;dddd&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;eeee&quot;</span>
<span class="token keyword">end</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">func3</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span><span class="token keyword">false</span><span class="token punctuation">,</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">--可变参</span>
<span class="token keyword">function</span> <span class="token function">func4</span><span class="token punctuation">(</span><span class="token punctuation">...</span><span class="token punctuation">)</span>

<span class="token keyword">end</span>


<span class="token comment">--函数当右值</span>
<span class="token comment">--把匿名函数赋值给变量</span>
sum1 <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span>
    <span class="token keyword">return</span> a<span class="token operator">+</span>b<span class="token punctuation">;</span>
<span class="token keyword">end</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">sum1</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

sum2<span class="token operator">=</span>sum1<span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">sum2</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">--当其它函数的参数</span>
<span class="token keyword">function</span> <span class="token function">func4</span><span class="token punctuation">(</span>functionName<span class="token punctuation">,</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token function">functionName</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>

<span class="token keyword">function</span> <span class="token function">func5</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span>
    <span class="token function">print</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">func4</span><span class="token punctuation">(</span>sum1<span class="token punctuation">,</span><span class="token number">111</span><span class="token punctuation">,</span><span class="token number">222</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">func4</span><span class="token punctuation">(</span>func5<span class="token punctuation">,</span><span class="token number">111</span><span class="token punctuation">,</span><span class="token number">222</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br></div></div><h4 id="示例3-基本数据类型-table"><a href="#示例3-基本数据类型-table" class="header-anchor">#</a> 示例3-基本数据类型（table）</h4> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token comment">--[[
基本数据类型
    Lua 中有八种基本类型： nil、boolean、number、 string、function、userdata、 thread和table
    table 表，不是指数据库中的表，而是一种数据类型，类似于map，用k-v的方式来表现，理论上来讲，除了nil，其它字符都可以作为k 值(索引值)
    格式
    类似于hash
    tableName={
        k=v,
    }
    类似于数组 -- 下标是从1开始
    tableName={v,v,v}
    可以用hash 格式和 array 格式混搭

    for 循环遍历
    for k,v in pairs(tableName) do
       print(k,v);
    end

    c++ 中  pairs 是对组

    循环嵌套
    for k,v in pairs(info3) do
        print(k,&quot;===&quot;,v);
        if type(v)==&quot;table&quot; then
            for k2,v2 in pairs(v) do
                print(&quot;\t&quot;,k2,&quot;===&quot;,v2);
            end
        end

    end

]]</span><span class="token comment">--</span>


<span class="token comment">--[[
info={
    id=123,
    name=&quot;tom&quot;,
    sex=false
};

for k,v in pairs(info) do
   print(k,&quot;===&quot;,v);
end
print(&quot;\n&quot;);

--print(info.id);
--print(info[&quot;id&quot;]);


--增加字段
info.age=123;
info[&quot;coutry&quot;]=&quot;china&quot;;

--删除字段
--info.sex=nil;
info[&quot;sex&quot;]=nil;

--修改
info[&quot;name&quot;]=&quot;jerry&quot;;
info.id=789;

for k,v in pairs(info) do
    print(k,&quot;===&quot;,v);
end
]]</span><span class="token comment">--</span>


<span class="token comment">--[[
info2={&quot;abc&quot;,123,true};

for k,v in pairs(info2) do
    print(k,&quot;===&quot;,v);
end
print(&quot;\n&quot;);

--增加
info2[33]=33;

--修改
info2[2]=&quot;222&quot;;

--删除
info2[1]=nil;
for k,v in pairs(info2) do
    print(k,&quot;===&quot;,v);
end

]]</span><span class="token comment">--</span>


info3<span class="token operator">=</span><span class="token punctuation">{</span>
    name<span class="token operator">=</span><span class="token string">&quot;tom&quot;</span><span class="token punctuation">,</span>
    age<span class="token operator">=</span><span class="token number">123</span><span class="token punctuation">,</span>
    sex<span class="token operator">=</span><span class="token keyword">false</span><span class="token punctuation">,</span>
    <span class="token number">111</span><span class="token punctuation">,</span>
    <span class="token string">&quot;222&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;def&quot;</span><span class="token punctuation">,</span><span class="token number">789</span><span class="token punctuation">,</span>son_k_1<span class="token operator">=</span><span class="token string">&quot;son-key-1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    son2<span class="token operator">=</span><span class="token punctuation">{</span>son2_k_1<span class="token operator">=</span><span class="token string">&quot;son2-key-1&quot;</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">&quot;son2&quot;</span><span class="token punctuation">,</span><span class="token keyword">false</span><span class="token punctuation">,</span><span class="token string">&quot;abc-son2&quot;</span><span class="token punctuation">,</span><span class="token number">123456</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    country<span class="token operator">=</span><span class="token string">&quot;china&quot;</span><span class="token punctuation">,</span>
    <span class="token number">3333</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> k<span class="token punctuation">,</span>v <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>info3<span class="token punctuation">)</span> <span class="token keyword">do</span>
    <span class="token function">print</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span><span class="token string">&quot;===&quot;</span><span class="token punctuation">,</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token function">type</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token operator">==</span><span class="token string">&quot;table&quot;</span> <span class="token keyword">then</span>
        <span class="token keyword">for</span> k2<span class="token punctuation">,</span>v2 <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token keyword">do</span>
            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\t&quot;</span><span class="token punctuation">,</span>k2<span class="token punctuation">,</span><span class="token string">&quot;===&quot;</span><span class="token punctuation">,</span>v2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">end</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">--修改</span>
info3<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">&quot;DEF&quot;</span><span class="token punctuation">;</span>
info3<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&quot;son_k_1&quot;</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">&quot;SON-KEY-1&quot;</span><span class="token punctuation">;</span>

info3<span class="token punctuation">[</span><span class="token string">&quot;son2&quot;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">true</span><span class="token punctuation">;</span>
info3<span class="token punctuation">[</span><span class="token string">&quot;son2&quot;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">&quot;SON2&quot;</span><span class="token punctuation">;</span>

<span class="token comment">--删除</span>
info3<span class="token punctuation">.</span>sex<span class="token operator">=</span><span class="token keyword">nil</span><span class="token punctuation">;</span>
info3<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">nil</span><span class="token punctuation">;</span>
info3<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">nil</span><span class="token punctuation">;</span>

info3<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">nil</span><span class="token punctuation">;</span>
info3<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&quot;son_k_1&quot;</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">nil</span><span class="token punctuation">;</span>

info3<span class="token punctuation">[</span><span class="token string">&quot;son2&quot;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">nil</span><span class="token punctuation">;</span>

<span class="token comment">---info3[&quot;son2&quot;]=nil;</span>

<span class="token comment">--增加</span>
info3<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">33</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">&quot;3333---&quot;</span><span class="token punctuation">;</span>
info3<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&quot;33&quot;</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">&quot;3333++++&quot;</span><span class="token punctuation">;</span>

<span class="token comment">--print(info3[3][&quot;33&quot;]);</span>

<span class="token keyword">for</span> k<span class="token punctuation">,</span>v <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>info3<span class="token punctuation">)</span> <span class="token keyword">do</span>
    <span class="token function">print</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span><span class="token string">&quot;===&quot;</span><span class="token punctuation">,</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token function">type</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token operator">==</span><span class="token string">&quot;table&quot;</span> <span class="token keyword">then</span>
        <span class="token keyword">for</span> k2<span class="token punctuation">,</span>v2 <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token keyword">do</span>
            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\t&quot;</span><span class="token punctuation">,</span>k2<span class="token punctuation">,</span><span class="token string">&quot;===&quot;</span><span class="token punctuation">,</span>v2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">end</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br></div></div><h3 id="_2-基本运算符"><a href="#_2-基本运算符" class="header-anchor">#</a> 2）基本运算符</h3> <h4 id="_1-算数运算符"><a href="#_1-算数运算符" class="header-anchor">#</a> 1:算数运算符</h4> <p><img src="/xiaoze-blog/assets/img/yunsuanfu.a04f6248.png" alt="运算符"></p> <h4 id="_2-关系运算符"><a href="#_2-关系运算符" class="header-anchor">#</a> 2:关系运算符</h4> <p><img src="/xiaoze-blog/assets/img/yunsuanfu1.55be9679.png" alt="运算符"></p> <p>算数运算符&amp;关系运算符</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code>
<span class="token comment">--[[
    赋值=
    lua 中变量是弱类型，就是说变量名是没有类型的，其类型取决于所赋的值，并且，同一个变量，可以随时切换成不同的数据类型
    多重赋值
    a,b=b,a  值交换   类似于swap


    算术运算符
    加+,减-,乘*,除/,取模%,指数(次方)^


    关系运算符
    等于==, 不等于~=, 大于&gt;, 小于&lt;, 大于或等于&gt;=, 小于或等于&lt;=
    关系运算符的运算结果只能是true 或 false，且只能在相同类型的数据间运算(运算时不会做隐式类型转换)

    对于对象型的数据(function,userdata,table)，比较运算是比较其引用

]]</span>


info1<span class="token operator">=</span><span class="token punctuation">{</span>a<span class="token operator">=</span><span class="token string">'a'</span><span class="token punctuation">,</span>b<span class="token operator">=</span><span class="token string">'b'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
info2<span class="token operator">=</span><span class="token punctuation">{</span>a<span class="token operator">=</span><span class="token string">'a'</span><span class="token punctuation">,</span>b<span class="token operator">=</span><span class="token string">'b'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
info3<span class="token operator">=</span>info1<span class="token punctuation">;</span>

<span class="token function">print</span><span class="token punctuation">(</span>info1 <span class="token operator">==</span> info2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--false 比较的是引用</span>
<span class="token function">print</span><span class="token punctuation">(</span>info1 <span class="token operator">==</span> info3<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--true 比较的是引用</span>

<span class="token function">print</span><span class="token punctuation">(</span>info1<span class="token punctuation">.</span>a <span class="token operator">==</span> info2<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--true 比较的是值</span>

<span class="token function">print</span><span class="token punctuation">(</span>info1<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
info3<span class="token punctuation">.</span>a<span class="token operator">=</span><span class="token string">'aaa'</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;---------&quot;</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span>info1<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">--此时证明info和info3是一个内存地址，也就是同一个引用，改变Info3得值，info1也会改变。</span>


<span class="token comment">--print(1==1);</span>
<span class="token comment">--print(1 == &quot;1&quot;);--false</span>
<span class="token comment">--print(1 &gt;= '1');--报错，语法错误</span>

<span class="token comment">--print(1+'1');--做了隐式类型转换</span>
<span class="token comment">--print(1+'a');--隐式类型转换失败</span>

<span class="token comment">--a=1;</span>
<span class="token comment">--b=2;</span>
<span class="token comment">--print(a~=b);</span>

<span class="token comment">--print(10%3);</span>
<span class="token comment">--print(2^10);</span>

<span class="token comment">--[[

a,b=1,2;
print(a,b);
a,b=b,a;
print(a,b);

]]</span><span class="token comment">--</span>
<span class="token comment">--a,b,c,d=1,&quot;abc&quot;,false,{12};</span>
<span class="token comment">--a,b,c,d=1,2,3;</span>
<span class="token comment">--print(a,b,c,d);</span>

<span class="token comment">--[[
a=1;
b=2;
c=a;
c=&quot;string&quot;;
c=true;
print(a,b,c);
]]</span><span class="token comment">--</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br></div></div><h4 id="_3-逻辑运算符"><a href="#_3-逻辑运算符" class="header-anchor">#</a> 3:逻辑运算符</h4> <p><img src="/xiaoze-blog/assets/img/yunsuanfu2.758fdd84.png" alt="123456"></p> <h4 id="_4-其他运算符"><a href="#_4-其他运算符" class="header-anchor">#</a> 4:其他运算符</h4> <p><img src="/xiaoze-blog/assets/img/yunsuanfu3.ab53316a.png" alt="123456"></p> <h4 id="_5-运算符优先级"><a href="#_5-运算符优先级" class="header-anchor">#</a> 5:运算符优先级</h4> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token operator">^</span>
<span class="token keyword">not</span>    <span class="token operator">-</span> <span class="token punctuation">(</span>unary<span class="token punctuation">)</span>
<span class="token operator">*</span>      <span class="token operator">/</span>       <span class="token operator">%</span>
<span class="token operator">+</span>      <span class="token operator">-</span>
<span class="token operator">..</span>
<span class="token operator">&lt;</span>      <span class="token operator">&gt;</span>      <span class="token operator">&lt;=</span>     <span class="token operator">&gt;=</span>     <span class="token operator">~=</span>     <span class="token operator">==</span>
<span class="token keyword">and</span>
<span class="token keyword">or</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>a+i &lt; b/2+1          &lt;--&gt;       (a+i) &lt; ((b/2)+1)
5+x^2*8              &lt;--&gt;       5+((x^2)*8)
a &lt; y and y &lt;= z     &lt;--&gt;       (a &lt; y) and (y &lt;= z)
-x^2                 &lt;--&gt;       -(x^2)
x^y^z                &lt;--&gt;       x^(y^z)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token comment">--[[
    逻辑运算符
        逻辑与 and, 逻辑或 or, 逻辑非 not
        &amp;&amp;, ||, !

        在lua 中，逻辑运算与其它语言的逻辑运算不是同一个意思，其运算结果返回值是参与运算的变量之一(not 除外，not 只返回true 或 false)
        其它语言的逻辑运算，返回值是0 或 1(false 或 ture)，意思就是返回一个bool 值

        在lua 中，只有 nil(null,NULL) 和 false 为假，其它都为真(包括空串或0值)

        对于and 和 or，实行短路运算(又称短路规则，短路求值，就是说，当前面的表达式可以返回时，就直接返回，不管后面的表达式)

]]</span><span class="token comment">--</span>
<span class="token comment">--[[
a,b=1,2;
print(a and b);--如果a 为真，则返回b

a=nil;
print(a and b);--如果a 不为真，则返回a，不再往后运算(不管b是啥)
print(&quot;\n&quot;);

c,d=1,false;
print(c or d);--如果 c 为真，则返回c，不再往后运算(不管d 是啥)

c=nil;
print(c or d);--如果 c 不为真，则返回d

print(&quot;\n&quot;);
e,f=1,2;
--print(e not f); --错误写法
print(not e);--如果e为真，则返回假

f=false;
print(not f);--如果f 为假，则返回真
]]</span><span class="token comment">--</span>

<span class="token comment">--用or 设置默认值</span>
<span class="token keyword">function</span> <span class="token function">func1</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span>
    a<span class="token operator">=</span> a <span class="token keyword">or</span> <span class="token number">10</span><span class="token punctuation">;</span>
    b <span class="token operator">=</span> b <span class="token keyword">or</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token function">print</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>

<span class="token comment">--func1();</span>
<span class="token comment">--func1(1,2);</span>

<span class="token comment">--实现三目运算 d=a?b:c      如果 a 为真，则取b,否则取c</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;-------&quot;</span><span class="token punctuation">)</span>
a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">;</span>
d<span class="token operator">=</span><span class="token punctuation">(</span>a <span class="token keyword">and</span> b<span class="token punctuation">)</span> <span class="token keyword">or</span> c<span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span>

a<span class="token operator">=</span><span class="token keyword">false</span><span class="token punctuation">;</span>
d<span class="token operator">=</span><span class="token punctuation">(</span>a <span class="token keyword">and</span> b<span class="token punctuation">)</span> <span class="token keyword">or</span> c<span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;-----=====&quot;</span><span class="token punctuation">)</span>
A<span class="token punctuation">,</span>B<span class="token punctuation">,</span>C<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">;</span>
B<span class="token operator">=</span><span class="token keyword">false</span><span class="token punctuation">;</span>
D<span class="token operator">=</span><span class="token punctuation">(</span>A <span class="token keyword">and</span> B<span class="token punctuation">)</span> <span class="token keyword">or</span> C<span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>D<span class="token punctuation">)</span><span class="token punctuation">;</span>

E<span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">(</span>A <span class="token keyword">and</span> <span class="token punctuation">{</span>B<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token keyword">or</span> <span class="token punctuation">{</span>C<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">--这里才是一个合格的三目运算</span>
<span class="token function">print</span><span class="token punctuation">(</span>E<span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>A <span class="token keyword">and</span> <span class="token punctuation">{</span>B<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token keyword">or</span> <span class="token punctuation">{</span>C<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br></div></div><h3 id="_3-流程控制-if"><a href="#_3-流程控制-if" class="header-anchor">#</a> 3）流程控制（if）</h3> <h4 id="_1-if-else-语句"><a href="#_1-if-else-语句" class="header-anchor">#</a> 1-if...else 语句</h4> <p>语法</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token keyword">if</span><span class="token punctuation">(</span>布尔表达式<span class="token punctuation">)</span>
<span class="token keyword">then</span>
   <span class="token comment">--[ 布尔表达式为 true 时执行该语句块 --]</span>
<span class="token keyword">else</span>
   <span class="token comment">--[ 布尔表达式为 false 时执行该语句块 --]</span>
<span class="token keyword">end</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>示例代码</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token comment">--[ 定义变量 --]</span>
a <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
<span class="token comment">--[ 检查条件 --]</span>
<span class="token keyword">if</span><span class="token punctuation">(</span> a <span class="token operator">&lt;</span> <span class="token number">20</span> <span class="token punctuation">)</span>
<span class="token keyword">then</span>
   <span class="token comment">--[ if 条件为 true 时执行该语句块 --]</span>
   <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;a 小于 20&quot;</span> <span class="token punctuation">)</span>
<span class="token keyword">else</span>
   <span class="token comment">--[ if 条件为 false 时执行该语句块 --]</span>
   <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;a 大于 20&quot;</span> <span class="token punctuation">)</span>
<span class="token keyword">end</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;a 的值为 :&quot;</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="_2-if-elseif-else-语句"><a href="#_2-if-elseif-else-语句" class="header-anchor">#</a> 2-if...elseif...else 语句</h4> <p>语法</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token keyword">if</span><span class="token punctuation">(</span> 布尔表达式 <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">then</span>
   <span class="token comment">--[ 在布尔表达式 1 为 true 时执行该语句块 --]</span>

<span class="token keyword">elseif</span><span class="token punctuation">(</span> 布尔表达式 <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token keyword">then</span>
   <span class="token comment">--[ 在布尔表达式 2 为 true 时执行该语句块 --]</span>

<span class="token keyword">elseif</span><span class="token punctuation">(</span> 布尔表达式 <span class="token number">3</span><span class="token punctuation">)</span>
<span class="token keyword">then</span>
   <span class="token comment">--[ 在布尔表达式 3 为 true 时执行该语句块 --]</span>
<span class="token keyword">else</span> 
   <span class="token comment">--[ 如果以上布尔表达式都不为 true 则执行该语句块 --]</span>
<span class="token keyword">end</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>示例代码</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token comment">--[ 定义变量 --]</span>
a <span class="token operator">=</span> <span class="token number">100</span>

<span class="token comment">--[ 检查布尔条件 --]</span>
<span class="token keyword">if</span><span class="token punctuation">(</span> a <span class="token operator">==</span> <span class="token number">10</span> <span class="token punctuation">)</span>
<span class="token keyword">then</span>
   <span class="token comment">--[ 如果条件为 true 打印以下信息 --]</span>
   <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;a 的值为 10&quot;</span> <span class="token punctuation">)</span>
<span class="token keyword">elseif</span><span class="token punctuation">(</span> a <span class="token operator">==</span> <span class="token number">20</span> <span class="token punctuation">)</span>
<span class="token keyword">then</span>   
   <span class="token comment">--[ if else if 条件为 true 时打印以下信息 --]</span>
   <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;a 的值为 20&quot;</span> <span class="token punctuation">)</span>
<span class="token keyword">elseif</span><span class="token punctuation">(</span> a <span class="token operator">==</span> <span class="token number">30</span> <span class="token punctuation">)</span>
<span class="token keyword">then</span>
   <span class="token comment">--[ if else if condition 条件为 true 时打印以下信息 --]</span>
   <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;a 的值为 30&quot;</span> <span class="token punctuation">)</span>
<span class="token keyword">else</span>
   <span class="token comment">--[ 以上条件语句没有一个为 true 时打印以下信息 --]</span>
   <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;没有匹配 a 的值&quot;</span> <span class="token punctuation">)</span>
<span class="token keyword">end</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;a 的真实值为: &quot;</span><span class="token punctuation">,</span> a <span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h4 id="_3-个人练习"><a href="#_3-个人练习" class="header-anchor">#</a> 3-个人练习</h4> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token comment">--[[
    流程控制语句
        if 条件 then
            ...
        end
]]</span>


a<span class="token punctuation">,</span>b<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> a<span class="token operator">==</span><span class="token number">1</span> <span class="token keyword">then</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;111&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>

<span class="token keyword">if</span> a <span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token keyword">then</span>
    <span class="token function">print</span><span class="token punctuation">(</span>a <span class="token operator">..</span> <span class="token string">&quot;&gt;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">else</span>
    <span class="token function">print</span><span class="token punctuation">(</span>a <span class="token operator">..</span> <span class="token string">&quot;&lt;=1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>

<span class="token keyword">if</span> a <span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token keyword">then</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;&gt;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">elseif</span> a<span class="token operator">==</span><span class="token number">1</span> <span class="token keyword">then</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;==1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">else</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>


c<span class="token punctuation">,</span>d<span class="token operator">=</span><span class="token number">900</span><span class="token punctuation">,</span><span class="token number">101</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> c <span class="token operator">&gt;</span> <span class="token number">100</span> <span class="token keyword">then</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;学仙&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">elseif</span> c<span class="token operator">&gt;</span><span class="token number">90</span> <span class="token keyword">and</span> c<span class="token operator">&lt;=</span><span class="token number">100</span> <span class="token keyword">then</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;学神&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">elseif</span> c<span class="token operator">&gt;</span><span class="token number">80</span> <span class="token keyword">and</span> c<span class="token operator">&lt;=</span><span class="token number">90</span> <span class="token keyword">then</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;学霸&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">elseif</span> c<span class="token operator">&gt;</span><span class="token number">60</span> <span class="token keyword">and</span> c<span class="token operator">&lt;=</span><span class="token number">80</span> <span class="token keyword">then</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;学长&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">elseif</span> c<span class="token operator">&gt;</span><span class="token number">50</span> <span class="token keyword">and</span> c<span class="token operator">&lt;=</span><span class="token number">60</span> <span class="token keyword">then</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;学渣&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">else</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;学酥&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--本人</span>
<span class="token keyword">end</span>


<span class="token keyword">if</span> c <span class="token operator">&gt;</span> <span class="token number">100</span> <span class="token keyword">then</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;学仙&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">elseif</span> c<span class="token operator">&gt;</span><span class="token number">90</span> <span class="token keyword">and</span> c<span class="token operator">&lt;=</span><span class="token number">100</span> <span class="token keyword">then</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;学神&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">else</span>
    <span class="token keyword">if</span> c<span class="token operator">&gt;</span><span class="token number">80</span> <span class="token keyword">and</span> c<span class="token operator">&lt;=</span><span class="token number">90</span> <span class="token keyword">then</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;学霸&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">elseif</span> c<span class="token operator">&gt;</span><span class="token number">60</span> <span class="token keyword">and</span> c<span class="token operator">&lt;=</span><span class="token number">80</span> <span class="token keyword">then</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;学长&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">elseif</span> c<span class="token operator">&gt;</span><span class="token number">50</span> <span class="token keyword">and</span> c<span class="token operator">&lt;=</span><span class="token number">60</span> <span class="token keyword">then</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;学渣&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;学酥&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--学酥本酥</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br></div></div><h3 id="_4-流程控制-循环"><a href="#_4-流程控制-循环" class="header-anchor">#</a> 4）流程控制（循环）</h3> <p><img src="/xiaoze-blog/assets/img/xunhuan.795a08b0.png" alt="132456"></p> <h4 id="_1-while循环"><a href="#_1-while循环" class="header-anchor">#</a> 1-while循环</h4> <p>语法</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token keyword">while</span><span class="token punctuation">(</span>condition<span class="token punctuation">)</span>
<span class="token keyword">do</span>
   statements
<span class="token keyword">end</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>练习1：</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code>a<span class="token operator">=</span><span class="token number">10</span>
<span class="token keyword">while</span><span class="token punctuation">(</span> a <span class="token operator">&lt;</span> <span class="token number">20</span> <span class="token punctuation">)</span>
<span class="token keyword">do</span>
   <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;a 的值为:&quot;</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span>
   a <span class="token operator">=</span> a<span class="token operator">+</span><span class="token number">1</span>
<span class="token keyword">end</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>练习2：</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code>
<span class="token comment">--[[
    流程控制语句

    while 条件 do
        ...
    end

    repeat
        ...
    until 条件;

    while 和 repeat 的区别
        while 循环中，当条件不成立时，结束循环
        repeat 循环中，当条件成立时，结束循环

    没有 continue

    break 只能跳出一重循环
    goto FLAG  语句 跳转到指定标记处，也可用于跳出循环，FLAG是一个标记位，相当于一个锚点

    两者区别是
        break 只能跳出当前循环，而goto 可以跳转到指定位置，这样可以忽略一些代码

    在lua 中，没有这些运算符 i++, i--, ++i, --i, +=, -=

    a=b=1 这种写法会出错，不能连续赋值

]]</span><span class="token comment">--</span>



<span class="token comment">--求和 1+2+3+...100    5050</span>

i<span class="token punctuation">,</span>sum<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">;</span>

<span class="token keyword">while</span> i<span class="token operator">&lt;</span><span class="token number">100</span> <span class="token keyword">do</span>

    <span class="token keyword">if</span> i<span class="token operator">&gt;</span><span class="token number">49</span> <span class="token keyword">then</span>
        <span class="token keyword">goto</span> FLAG<span class="token punctuation">;</span>
        <span class="token comment">--break;</span>
    <span class="token keyword">end</span>

    i<span class="token operator">=</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>
    sum<span class="token operator">=</span>sum<span class="token operator">+</span>i<span class="token punctuation">;</span>

<span class="token keyword">end</span>



<span class="token function">print</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>sum<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;111111&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">::</span>FLAG<span class="token punctuation">::</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;222&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


i<span class="token punctuation">,</span>sum<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">repeat</span>
    i<span class="token operator">=</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>
    sum<span class="token operator">=</span>sum<span class="token operator">+</span>i<span class="token punctuation">;</span>
<span class="token keyword">until</span> i<span class="token operator">&gt;=</span><span class="token number">100</span><span class="token punctuation">;</span>

<span class="token function">print</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>sum<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br></div></div><h4 id="_2-goto循环"><a href="#_2-goto循环" class="header-anchor">#</a> 2-goto循环</h4> <p>语法</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token keyword">local</span> a <span class="token operator">=</span> <span class="token number">1</span>
<span class="token punctuation">::</span>label<span class="token punctuation">::</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;--- goto label ---&quot;</span><span class="token punctuation">)</span>

a <span class="token operator">=</span> a<span class="token operator">+</span><span class="token number">1</span>
<span class="token keyword">if</span> a <span class="token operator">&lt;</span> <span class="token number">3</span> <span class="token keyword">then</span>
    <span class="token keyword">goto</span> label   <span class="token comment">-- a 小于 3 的时候跳转到标签 label</span>
<span class="token keyword">end</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>以下实例演示了可以在 lable 中设置多个语句：</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code>i <span class="token operator">=</span> <span class="token number">0</span>
<span class="token punctuation">::</span>s1<span class="token punctuation">::</span> <span class="token keyword">do</span>
  <span class="token function">print</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
  i <span class="token operator">=</span> i<span class="token operator">+</span><span class="token number">1</span>
<span class="token keyword">end</span>
<span class="token keyword">if</span> i<span class="token operator">&gt;</span><span class="token number">3</span> <span class="token keyword">then</span>
  os<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">-- i 大于 3 时退出</span>
<span class="token keyword">end</span>
<span class="token keyword">goto</span> s1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>有了 goto，我们可以实现 continue 的功能：</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token keyword">for</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span> <span class="token keyword">do</span>
    <span class="token keyword">if</span> i <span class="token operator">&lt;=</span> <span class="token number">2</span> <span class="token keyword">then</span>
        <span class="token function">print</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token string">&quot;yes continue&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">goto</span> continue
    <span class="token keyword">end</span>
    <span class="token function">print</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token string">&quot; no continue&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">::</span>continue<span class="token punctuation">::</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">[[i'm end]]</span><span class="token punctuation">)</span>
<span class="token keyword">end</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>结果为</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token number">1</span>   yes continue
i'm <span class="token keyword">end</span>
<span class="token number">2</span>   yes continue
i'm <span class="token keyword">end</span>
<span class="token number">3</span>    no continue
i'm <span class="token keyword">end</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>个人练习</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code>
<span class="token comment">--[[
    流程控制语句

    goto FLAG  语句 跳转到指定标记处，也可用于跳出循环，FLAG是一个标记位，相当于一个锚点

    代码块(作用域)  do ... end

    flag 不可见原则
    1 不能从外面 goto 到代码块里面，因为代码块里面的flag，对于外面的 goto来说，是不可见的
    2 不能跳出或跳入一个函数，因为函数也是一个block(块)
    3 不能跳入本地变量(local)作用域


]]</span><span class="token comment">--</span>


<span class="token keyword">do</span>
    a<span class="token operator">=</span><span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token punctuation">::</span>FLAG1<span class="token punctuation">::</span><span class="token punctuation">;</span>
    <span class="token function">print</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">::</span>FLAG2<span class="token punctuation">::</span><span class="token punctuation">;</span>
    <span class="token keyword">goto</span> FLAG1<span class="token punctuation">;</span><span class="token comment">--此处goto 是在 local b 的作用域外面，所以报错</span>
    <span class="token keyword">local</span> b<span class="token operator">=</span><span class="token number">456</span><span class="token punctuation">;</span>
    <span class="token punctuation">::</span>FLAG3<span class="token punctuation">::</span><span class="token punctuation">;</span>
    <span class="token function">print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">--goto FLAG1;--此处goto 是在 local b 的作用域里面</span>
<span class="token keyword">end</span>

<span class="token comment">--print(a);</span>
<span class="token comment">--print(b);</span>

<span class="token comment">--[[
function func1()

    ::FLAG1::;
    print(&quot;func1--11&quot;);
    print(&quot;func1--22&quot;);
    goto FLAG3;
    ::FLAG2::;

    print(&quot;func1--33&quot;);
    ::FLAG3::;

end

::FLAG4::;
print(&quot;aaaa&quot;);
func1();

::FLAG5::;

print(&quot;bbb&quot;);

]]</span><span class="token comment">--</span>



<span class="token comment">--[[
print(&quot;1234&quot;);
goto FLAG1;

do
    print(&quot;a&quot;);
    print(&quot;b&quot;);

    ::FLAG1::;

    print(&quot;c&quot;);
    print(&quot;d&quot;);

    ::FLAG2::;

end

::FLAG3::;

print(&quot;aa&quot;);
print(&quot;bb&quot;);

::FLAG4::;

print(&quot;cc&quot;);
print(&quot;dd&quot;);

]]</span><span class="token comment">--</span>

<span class="token comment">--死循环</span>
<span class="token comment">--[[
i=0;
::FLAG1::;

    print(i);
    i=i+1;

goto FLAG1;
]]</span><span class="token comment">--</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br></div></div><h4 id="for循环"><a href="#for循环" class="header-anchor">#</a> for循环</h4> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code>
<span class="token comment">--[[
    流程控制语句

    for 循环分为数值循环和泛型循环(类似于foreach)

    数值循环
    for 变量名=初始值,结束值,步长(默认值为1,可省略) do
        ...
    end


    泛型循环
    for k,v in 迭代函数(table) do   -- 此处 v 可以省略，k 不能少
        ...
    end

    迭代函数 ipairs，pairs

    ipairs 顺序遍历，中间的序号不会断开，遇到k=&gt;v 直接跳过，遇到第一个nil 就会直接终止，一般情况下，用于数组类型的集合遍历

]]</span><span class="token comment">--</span>

t1<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token string">&quot;xxx&quot;</span><span class="token punctuation">,</span><span class="token number">33</span><span class="token punctuation">,</span><span class="token string">&quot;nil&quot;</span><span class="token punctuation">,</span><span class="token number">44</span><span class="token punctuation">,</span><span class="token number">55</span><span class="token punctuation">,</span><span class="token number">66</span><span class="token punctuation">,</span>key<span class="token operator">=</span><span class="token string">&quot;vvv&quot;</span><span class="token punctuation">,</span><span class="token number">77</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">--for k,v in ipairs(t1) do</span>
    <span class="token comment">--t1[k]=v*10;</span>
<span class="token comment">--end</span>


<span class="token keyword">for</span> k<span class="token punctuation">,</span>v <span class="token keyword">in</span> <span class="token function">ipairs</span><span class="token punctuation">(</span>t1<span class="token punctuation">)</span> <span class="token keyword">do</span>
    <span class="token function">print</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>


<span class="token keyword">for</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">10</span> <span class="token keyword">do</span>
    io<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>
io<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">2</span> <span class="token keyword">do</span>
    io<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>
io<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> i<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span> <span class="token keyword">do</span>
    io<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>
io<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> i<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">2</span> <span class="token keyword">do</span>
    io<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>

io<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
t1<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">33</span><span class="token punctuation">,</span><span class="token number">44</span><span class="token punctuation">,</span><span class="token number">55</span><span class="token punctuation">,</span><span class="token number">66</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">6</span> <span class="token keyword">do</span>
    <span class="token comment">--io.write(t1[i],&quot; &quot;);</span>
    t1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>t1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>

io<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> i<span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">2</span> <span class="token keyword">do</span>
    io<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>t1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">--print(t1[i]);</span>

<span class="token keyword">end</span>


<span class="token comment">--九九乘法表</span>
<span class="token keyword">for</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">9</span> <span class="token keyword">do</span>

    <span class="token keyword">for</span> j<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>i <span class="token keyword">do</span>
        io<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>j<span class="token punctuation">,</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span>i<span class="token punctuation">,</span><span class="token string">&quot;=&quot;</span><span class="token punctuation">,</span>i<span class="token operator">*</span>j<span class="token punctuation">,</span><span class="token string">&quot;\t&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>

    io<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">end</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br></div></div><h3 id="_5-table-array"><a href="#_5-table-array" class="header-anchor">#</a> 5）table-array</h3> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code>
<span class="token comment">--[[

    table
        array
        hash
]]</span><span class="token comment">--</span>

<span class="token comment">--自定义下标 -- 不建议这样使用</span>

t1<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">33</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
t1<span class="token punctuation">[</span><span class="token string">&quot;dfdsdf&quot;</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">555</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> k<span class="token punctuation">,</span>v <span class="token keyword">in</span> <span class="token function">ipairs</span><span class="token punctuation">(</span>t1<span class="token punctuation">)</span> <span class="token keyword">do</span>
    <span class="token function">print</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> k<span class="token punctuation">,</span>v <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>t1<span class="token punctuation">)</span> <span class="token keyword">do</span>
    <span class="token function">print</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;------------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

t1<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> i<span class="token operator">=</span><span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span> <span class="token keyword">do</span>
    t1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>i<span class="token operator">*</span><span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>

<span class="token keyword">for</span> k<span class="token punctuation">,</span>v <span class="token keyword">in</span> <span class="token function">ipairs</span><span class="token punctuation">(</span>t1<span class="token punctuation">)</span> <span class="token keyword">do</span>
    <span class="token function">print</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;------------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">--二维数组</span>

<span class="token comment">--[[
x={11,22,33};
y={44,55,66};

t1={
    {11,22,33},
    {44,55,66}
};

for i=1,2 do
    for j=1,3 do
        print(i,j,t1[i][j]);
    end
    print(&quot;&quot;);
end
print(&quot;&quot;);print(&quot;&quot;);
for k,v in ipairs(t1) do
    for k2,v2 in ipairs(v) do
        print(k,k2,v2);
    end
    print(&quot;&quot;);
end

]]</span><span class="token comment">--</span>

<span class="token comment">--[[
t1={};
for i=1,3 do
    t1[i]={};
    for j=1,2 do
        t1[i][j]=i*j*10;
    end
end



for k,v in ipairs(t1) do
    for k2,v2 in ipairs(v) do
        print(k,k2,v2);
    end
    print(&quot;&quot;);
end

]]</span><span class="token comment">--</span>


<span class="token comment">--table.concat(list, sep, i, j)  将数组中的元素拼接成一个字符串</span>
<span class="token comment">--table.remove(list, pos) 删除数组中元素，默认删除最后一个</span>
<span class="token comment">--table.insert(list, pos, value) 向指定位置插入元素，默认插入到最后</span>
<span class="token comment">--table.sort(list, comp) 数组排序，默认从小到大，可自定义排序规则</span>
<span class="token comment">--table.move(a1, f, e, t, a2) 把数组a1中的元素往a2中拷贝</span>

t1<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;DEF&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;xyz&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;456&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>table<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>t1<span class="token punctuation">,</span><span class="token string">&quot;--&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
table<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>t1<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>table<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>t1<span class="token punctuation">,</span><span class="token string">&quot;--&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

table<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>t1<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>table<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>t1<span class="token punctuation">,</span><span class="token string">&quot;--&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

table<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>t1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>table<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>t1<span class="token punctuation">,</span><span class="token string">&quot;--&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">func1</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span>
    <span class="token keyword">return</span> a<span class="token operator">&gt;</span>b<span class="token punctuation">;</span>
<span class="token keyword">end</span>
table<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>t1<span class="token punctuation">,</span>func1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>table<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>t1<span class="token punctuation">,</span><span class="token string">&quot;--&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
t2<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">--table.move(t1,1,2,3,t2);--把t1 里面的元素拷贝到t2 中</span>
<span class="token function">print</span><span class="token punctuation">(</span>table<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>t1<span class="token punctuation">,</span><span class="token string">&quot;--&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>table<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>t2<span class="token punctuation">,</span><span class="token string">&quot;--&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br></div></div><h3 id="_6-string字符串"><a href="#_6-string字符串" class="header-anchor">#</a> 6）string字符串</h3> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code>
<span class="token comment">--string 常用api</span>

<span class="token comment">--string.find(s, pattern, init, plain)  在字符串s中 查找pattern(可以是表达式)，如果找到，则返回pattern 第一次出现的开始位置和结束位置,如果没找到，返回nil</span>


str1<span class="token operator">=</span><span class="token string">&quot;abcd1234&quot;</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>str1<span class="token punctuation">,</span><span class="token string">&quot;cd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>str1<span class="token punctuation">,</span><span class="token string">&quot;cd&quot;</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--从指定位置处开始查找</span>
<span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>str1<span class="token punctuation">,</span><span class="token string">&quot;cd&quot;</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--如果是负数，则是从字符串长度+该负数的位置开始找</span>

<span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>str1<span class="token punctuation">,</span><span class="token string">&quot;%d&quot;</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--最后一个参数，默认就是false，开启正则匹配模式</span>
<span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>str1<span class="token punctuation">,</span><span class="token string">&quot;(%d%d%d%d)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>str1<span class="token punctuation">,</span><span class="token string">&quot;%d&quot;</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token keyword">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--最后一个参数，true 是直接当子串处理</span>

str2<span class="token operator">=</span><span class="token string">&quot;abcdcd1234cdcd&quot;</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">gsub</span><span class="token punctuation">(</span>str2<span class="token punctuation">,</span><span class="token string">&quot;cd&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;CD&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--全部替换</span>
<span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">gsub</span><span class="token punctuation">(</span>str2<span class="token punctuation">,</span><span class="token string">&quot;cd&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;CD&quot;</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--最多替换两次</span>



<span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">char</span><span class="token punctuation">(</span><span class="token number">65</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--asscii 码转字符,数字只能是0-255</span>
<span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">char</span><span class="token punctuation">(</span><span class="token number">65</span><span class="token punctuation">,</span><span class="token number">66</span><span class="token punctuation">,</span><span class="token number">67</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">---string.gmatch()</span>

str1<span class="token operator">=</span><span class="token string">&quot;abcd&quot;</span><span class="token punctuation">;</span>
str2<span class="token operator">=</span>string<span class="token punctuation">.</span><span class="token function">upper</span><span class="token punctuation">(</span>str1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--转大写</span>
<span class="token function">print</span><span class="token punctuation">(</span>str2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">lower</span><span class="token punctuation">(</span>str2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--转小写</span>

<span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">len</span><span class="token punctuation">(</span>str1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--字符串长度</span>
<span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">len</span><span class="token punctuation">(</span><span class="token string">&quot;你好 lua&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--</span>

<span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span>str1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--反转</span>

str3<span class="token operator">=</span><span class="token number">789</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token operator">..</span><span class="token string">&quot;xyz&quot;</span><span class="token operator">..</span>str1<span class="token operator">..</span>str2<span class="token punctuation">.</span><span class="token number">.123</span> <span class="token punctuation">.</span><span class="token number">.456</span><span class="token number">.56</span> <span class="token operator">..</span>str3<span class="token punctuation">.</span><span class="token number">.000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">---连接符，number 如果在连接符左边，后面要空格</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
str4<span class="token operator">=</span><span class="token string">&quot;abcd1234&quot;</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">sub</span><span class="token punctuation">(</span>str4<span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--截取，后面参数是开始位置和结束位置，结束位置可省略不写</span>
<span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">sub</span><span class="token punctuation">(</span>str4<span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--负数是从右往左数</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><h3 id="_7-string字符串"><a href="#_7-string字符串" class="header-anchor">#</a> 7）string字符串</h3> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code>
<span class="token comment">--string 常用api</span>

<span class="token comment">--string.find(s, pattern, init, plain)  在字符串s中 查找pattern(可以是表达式)，如果找到，则返回pattern 第一次出现的开始位置和结束位置,如果没找到，返回nil</span>


str1<span class="token operator">=</span><span class="token string">&quot;abcd1234&quot;</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>str1<span class="token punctuation">,</span><span class="token string">&quot;cd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>str1<span class="token punctuation">,</span><span class="token string">&quot;cd&quot;</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--从指定位置处开始查找</span>
<span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>str1<span class="token punctuation">,</span><span class="token string">&quot;cd&quot;</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--如果是负数，则是从字符串长度+该负数的位置开始找</span>

<span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>str1<span class="token punctuation">,</span><span class="token string">&quot;%d&quot;</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--最后一个参数，默认就是false，开启正则匹配模式</span>
<span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>str1<span class="token punctuation">,</span><span class="token string">&quot;(%d%d%d%d)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>str1<span class="token punctuation">,</span><span class="token string">&quot;%d&quot;</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token keyword">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--最后一个参数，true 是直接当子串处理</span>

str2<span class="token operator">=</span><span class="token string">&quot;abcdcd1234cdcd&quot;</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">gsub</span><span class="token punctuation">(</span>str2<span class="token punctuation">,</span><span class="token string">&quot;cd&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;CD&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--全部替换</span>
<span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">gsub</span><span class="token punctuation">(</span>str2<span class="token punctuation">,</span><span class="token string">&quot;cd&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;CD&quot;</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--最多替换两次</span>



<span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">char</span><span class="token punctuation">(</span><span class="token number">65</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--asscii 码转字符,数字只能是0-255</span>
<span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">char</span><span class="token punctuation">(</span><span class="token number">65</span><span class="token punctuation">,</span><span class="token number">66</span><span class="token punctuation">,</span><span class="token number">67</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">---string.gmatch()</span>

str1<span class="token operator">=</span><span class="token string">&quot;abcd&quot;</span><span class="token punctuation">;</span>
str2<span class="token operator">=</span>string<span class="token punctuation">.</span><span class="token function">upper</span><span class="token punctuation">(</span>str1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--转大写</span>
<span class="token function">print</span><span class="token punctuation">(</span>str2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">lower</span><span class="token punctuation">(</span>str2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--转小写</span>

<span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">len</span><span class="token punctuation">(</span>str1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--字符串长度</span>
<span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">len</span><span class="token punctuation">(</span><span class="token string">&quot;你好 lua&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--</span>

<span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span>str1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--反转</span>

str3<span class="token operator">=</span><span class="token number">789</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token operator">..</span><span class="token string">&quot;xyz&quot;</span><span class="token operator">..</span>str1<span class="token operator">..</span>str2<span class="token punctuation">.</span><span class="token number">.123</span> <span class="token punctuation">.</span><span class="token number">.456</span><span class="token number">.56</span> <span class="token operator">..</span>str3<span class="token punctuation">.</span><span class="token number">.000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">---连接符，number 如果在连接符左边，后面要空格</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
str4<span class="token operator">=</span><span class="token string">&quot;abcd1234&quot;</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">sub</span><span class="token punctuation">(</span>str4<span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--截取，后面参数是开始位置和结束位置，结束位置可省略不写</span>
<span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">sub</span><span class="token punctuation">(</span>str4<span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--负数是从右往左数</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><h3 id="_8-function的常见表现形式"><a href="#_8-function的常见表现形式" class="header-anchor">#</a> 8）function的常见表现形式</h3> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code>
<span class="token comment">--function 进阶，常见的表现形式</span>

<span class="token keyword">function</span> <span class="token function">show</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span>
    <span class="token function">print</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>

<span class="token comment">--直接调用</span>
<span class="token function">show</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">--当右值，赋值给一个变量</span>
func1<span class="token operator">=</span>show<span class="token punctuation">;</span>
<span class="token function">func1</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">--匿名函数当右值</span>
func2<span class="token operator">=</span><span class="token keyword">function</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span>
    <span class="token function">print</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>

<span class="token function">func1</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">---当参数</span>
<span class="token keyword">function</span> <span class="token function">func3</span><span class="token punctuation">(</span>func<span class="token punctuation">,</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span>
    <span class="token function">func</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>

<span class="token function">func3</span><span class="token punctuation">(</span>show<span class="token punctuation">,</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">func3</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span> <span class="token function">print</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">end</span><span class="token punctuation">,</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--匿名临时对象当参数</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">--当返回值</span>
<span class="token keyword">function</span> <span class="token function">func4</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> func1<span class="token punctuation">;</span>
<span class="token keyword">end</span>

rs1<span class="token operator">=</span><span class="token function">func4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">rs1</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">func4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">--匿名函数当返回值</span>
<span class="token keyword">function</span> <span class="token function">func5</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span>
        <span class="token function">print</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span>

rs2<span class="token operator">=</span><span class="token function">func5</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">rs2</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">func5</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">--多返回值</span>
<span class="token keyword">function</span> <span class="token function">func6</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">function</span> <span class="token function">func6_son1</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;son1&quot;</span><span class="token punctuation">,</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>

    <span class="token keyword">function</span> <span class="token function">func6_son2</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;son2&quot;</span><span class="token punctuation">,</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>

    <span class="token keyword">return</span>
        func6_son1<span class="token punctuation">,</span>
        func6_son2<span class="token punctuation">,</span>
        func1<span class="token punctuation">,</span>
        <span class="token keyword">function</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span>
            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;son-last&quot;</span><span class="token punctuation">,</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">end</span>
        <span class="token punctuation">;</span>
<span class="token keyword">end</span>

rs3<span class="token punctuation">,</span>rs4<span class="token punctuation">,</span>rs5<span class="token punctuation">,</span>rs6<span class="token operator">=</span><span class="token function">func6</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">rs3</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">rs4</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">rs5</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">rs6</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br></div></div><h3 id="_9-table中的function"><a href="#_9-table中的function" class="header-anchor">#</a> 9）table中的function</h3> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code>

<span class="token comment">--function 进阶，table 中的 function</span>


<span class="token keyword">function</span> <span class="token function">show</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
    <span class="token function">print</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>

t1<span class="token operator">=</span><span class="token punctuation">{</span>
    t1_show<span class="token operator">=</span>show<span class="token punctuation">,</span>
    add<span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span>
        <span class="token keyword">return</span> a<span class="token operator">+</span>b<span class="token punctuation">;</span>
    <span class="token keyword">end</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

t1<span class="token punctuation">.</span>sub<span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span>
    <span class="token keyword">return</span> a<span class="token operator">-</span>b<span class="token punctuation">;</span>
<span class="token keyword">end</span>

t1<span class="token punctuation">[</span><span class="token string">&quot;mult&quot;</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span>
    <span class="token keyword">return</span> a<span class="token operator">*</span>b<span class="token punctuation">;</span>
<span class="token keyword">end</span>



<span class="token comment">--t1.t1_show(&quot;abc&quot;);</span>
<span class="token comment">--t1[&quot;t1_show&quot;](123);</span>
<span class="token comment">--t1.t1_show(t1.add(11,22));</span>

<span class="token comment">--t1.t1_show(t1.add(11,22));</span>
<span class="token comment">--t1.t1_show(t1.sub(11,22));</span>
<span class="token comment">--t1.t1_show(t1.mult(11,22));</span>

calc<span class="token operator">=</span><span class="token punctuation">{</span>

    add<span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span>
        <span class="token keyword">return</span> a<span class="token operator">+</span>b<span class="token punctuation">;</span>
    <span class="token keyword">end</span><span class="token punctuation">,</span>
    sub<span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span>
        <span class="token keyword">return</span> a<span class="token operator">-</span>b<span class="token punctuation">;</span>
    <span class="token keyword">end</span><span class="token punctuation">,</span>
    mult<span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span>
        <span class="token keyword">return</span> a<span class="token operator">*</span>b<span class="token punctuation">;</span>
    <span class="token keyword">end</span><span class="token punctuation">,</span>
    show<span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token function">print</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">end</span>
<span class="token punctuation">}</span>

calc<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span>calc<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
calc<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span>calc<span class="token punctuation">.</span><span class="token function">sub</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
calc<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span>calc<span class="token punctuation">.</span><span class="token function">mult</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>



calc<span class="token operator">=</span><span class="token punctuation">{</span>
    a<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>
    b<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>
    result<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>
    add<span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        calc<span class="token punctuation">.</span>result<span class="token operator">=</span> calc<span class="token punctuation">.</span>a<span class="token operator">+</span>calc<span class="token punctuation">.</span>b<span class="token punctuation">;</span>
    <span class="token keyword">end</span><span class="token punctuation">,</span>
    sub<span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        calc<span class="token punctuation">.</span>result<span class="token operator">=</span> calc<span class="token punctuation">.</span>a<span class="token operator">-</span>calc<span class="token punctuation">.</span>b<span class="token punctuation">;</span>
    <span class="token keyword">end</span><span class="token punctuation">,</span>
    mult<span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        calc<span class="token punctuation">.</span>result<span class="token operator">=</span> calc<span class="token punctuation">.</span>a<span class="token operator">*</span>calc<span class="token punctuation">.</span>b<span class="token punctuation">;</span>
    <span class="token keyword">end</span><span class="token punctuation">,</span>
    show<span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token function">print</span><span class="token punctuation">(</span>calc<span class="token punctuation">.</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">end</span>
<span class="token punctuation">}</span>

calc<span class="token punctuation">.</span>a<span class="token operator">=</span><span class="token number">11</span><span class="token punctuation">;</span>
calc<span class="token punctuation">.</span>b<span class="token operator">=</span><span class="token number">22</span><span class="token punctuation">;</span>

calc<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
calc<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

calc<span class="token punctuation">.</span><span class="token function">sub</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
calc<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

tmp<span class="token operator">=</span>calc<span class="token punctuation">;</span>
tmp<span class="token punctuation">.</span><span class="token function">mult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
tmp<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br></div></div><h3 id="_10-数组"><a href="#_10-数组" class="header-anchor">#</a> 10）数组</h3> <h4 id="一维数组"><a href="#一维数组" class="header-anchor">#</a> 一维数组</h4> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token comment">-- 创建一个数组</span>
<span class="token keyword">local</span> myArray <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">}</span>

<span class="token comment">-- 访问数组元素</span>
<span class="token function">print</span><span class="token punctuation">(</span>myArray<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment">-- 输出 10</span>
<span class="token function">print</span><span class="token punctuation">(</span>myArray<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment">-- 输出 30</span>

<span class="token comment">-- 计算数组长度</span>
<span class="token keyword">local</span> length <span class="token operator">=</span> <span class="token operator">#</span>myArray

<span class="token function">print</span><span class="token punctuation">(</span>length<span class="token punctuation">)</span> <span class="token comment">-- 输出 5</span>


<span class="token comment">-- 创建一个数组</span>
<span class="token keyword">local</span> myArray <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">}</span>

<span class="token comment">-- 循环遍历数组</span>
<span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">#</span>myArray <span class="token keyword">do</span>
    <span class="token function">print</span><span class="token punctuation">(</span>myArray<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">end</span>

<span class="token comment">-- 创建一个数组</span>
<span class="token keyword">local</span> myArray <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">}</span>

<span class="token comment">-- 删除第三个元素</span>
table<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>myArray<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>

<span class="token comment">-- 循环遍历数组</span>
<span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">#</span>myArray <span class="token keyword">do</span>
    <span class="token function">print</span><span class="token punctuation">(</span>myArray<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">end</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h4 id="多维数组"><a href="#多维数组" class="header-anchor">#</a> 多维数组</h4> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token comment">-- 初始化数组</span>
array <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">for</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span> <span class="token keyword">do</span>
   array<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
      <span class="token keyword">for</span> j<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span> <span class="token keyword">do</span>
         array<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token operator">*</span>j
      <span class="token keyword">end</span>
<span class="token keyword">end</span>

<span class="token comment">-- 访问数组</span>
<span class="token keyword">for</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span> <span class="token keyword">do</span>
   <span class="token keyword">for</span> j<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span> <span class="token keyword">do</span>
      <span class="token function">print</span><span class="token punctuation">(</span>array<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span>
   <span class="token keyword">end</span>
<span class="token keyword">end</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="_11-用select处理可变参数"><a href="#_11-用select处理可变参数" class="header-anchor">#</a> 11）用select处理可变参数</h3> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token comment">---用select 处理函数可变参</span>

<span class="token comment">--select(n, ...) 表示获取可变参的一部份数据，从第n个位置开始</span>
<span class="token comment">--select(&quot;#&quot;, ...) 表示获取可变参的元素个数</span>

<span class="token comment">--求和</span>
<span class="token keyword">function</span> <span class="token function">func22</span><span class="token punctuation">(</span><span class="token punctuation">...</span><span class="token punctuation">)</span>

    sum<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    count<span class="token operator">=</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;#&quot;</span><span class="token punctuation">,</span><span class="token punctuation">...</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>count <span class="token keyword">do</span>
        sum <span class="token operator">=</span> sum <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">select</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span><span class="token punctuation">...</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>

    <span class="token keyword">return</span> sum<span class="token punctuation">,</span>sum<span class="token operator">/</span>count<span class="token punctuation">;</span>


<span class="token keyword">end</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">func22</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>




<span class="token keyword">function</span> <span class="token function">func33</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token number">11</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">33</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>

<span class="token keyword">function</span> <span class="token function">func44</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token number">111</span><span class="token punctuation">,</span><span class="token number">222</span><span class="token punctuation">,</span><span class="token number">333</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>


<span class="token comment">---茴香豆的茴字有几种写法</span>
<span class="token comment">---</span>
<span class="token comment">--[[
print(  func33()  );
print(  func44()  );
print(&quot;&quot;);
print( (func33())  );
print( (func44())  );
print(&quot;&quot;);
print(  func33(),&quot;====&quot;,func44()  );
print(  (func33()),&quot;====&quot;,func44()  );
]]</span><span class="token comment">--</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><h3 id="_12-用pack处理可变参数"><a href="#_12-用pack处理可变参数" class="header-anchor">#</a> 12）用pack处理可变参数</h3> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code>

<span class="token comment">---用pack 处理函数可变参</span>
<span class="token comment">---table.pack(...) 将可变参打包成一个table，且会在最后多出一个n键，其对应的值是可变参的参数个数</span>
<span class="token comment">---table.unpack(list, i, j) 解包，将table 解成可变参</span>


<span class="token comment">--求和</span>
<span class="token keyword">function</span> <span class="token function">func22</span><span class="token punctuation">(</span><span class="token punctuation">...</span><span class="token punctuation">)</span>


    <span class="token comment">--print(table.pack(...).n);</span>

    t1<span class="token operator">=</span>table<span class="token punctuation">.</span><span class="token function">pack</span><span class="token punctuation">(</span><span class="token punctuation">...</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    sum<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token comment">--[[
    for k,v in pairs(t1) do
        if k ~= &quot;n&quot; then
          sum=sum+v;
        end
    end
    ]]</span><span class="token comment">--</span>

    count<span class="token operator">=</span>t1<span class="token punctuation">.</span>n<span class="token punctuation">;</span>
    <span class="token keyword">for</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>count <span class="token keyword">do</span>
        <span class="token keyword">if</span> t1<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">~=</span> <span class="token keyword">nil</span> <span class="token keyword">then</span>
            sum <span class="token operator">=</span> sum <span class="token operator">+</span> t1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">end</span>
    <span class="token keyword">end</span>
    <span class="token keyword">return</span> sum<span class="token punctuation">;</span>

<span class="token keyword">end</span>

<span class="token comment">--print(func22(1,2,nil,nil,3,4,5,nil));</span>

<span class="token keyword">function</span> <span class="token function">func3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">--return 1,2,3,4,5;</span>
    <span class="token keyword">return</span> table<span class="token punctuation">.</span><span class="token function">pack</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">33</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>

<span class="token comment">--print(func3());-- print(1,2,3);</span>
<span class="token comment">--print(func3());</span>
<span class="token comment">--print(table.unpack(func3()));</span>


<span class="token comment">--a=func3();</span>
<span class="token comment">--print(a);</span>
<span class="token comment">--a1,b1,c1,d1,f1=table.unpack(a);</span>
<span class="token comment">--print(a1,b1,c1,d1,f1);</span>


<span class="token comment">---可变参转成table</span>
<span class="token keyword">function</span> <span class="token function">func44</span><span class="token punctuation">(</span><span class="token punctuation">...</span><span class="token punctuation">)</span>

    t1<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">...</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    count<span class="token operator">=</span><span class="token operator">#</span>t1<span class="token punctuation">;</span>
    <span class="token comment">--print(count);</span>

    <span class="token keyword">for</span> k<span class="token punctuation">,</span>v <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>t1<span class="token punctuation">)</span> <span class="token keyword">do</span>
        <span class="token comment">--if k ~= &quot;n&quot; then</span>
            <span class="token comment">--sum=sum+v;</span>
        <span class="token comment">--end</span>

        <span class="token function">print</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>

<span class="token keyword">end</span>

<span class="token function">func44</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token keyword">nil</span><span class="token punctuation">,</span><span class="token keyword">nil</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br></div></div><h3 id="_13-lua中闭包的实现"><a href="#_13-lua中闭包的实现" class="header-anchor">#</a> 13）lua中闭包的实现</h3> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code>
<span class="token comment">--[[

    闭包

    百度百科 https://baike.baidu.com/item/闭包/10908873

    闭包就是能够读取其他函数内部变量的函数。
    例如在javascript中，只有函数内部的子函数才能读取局部变量，所以闭包可以理解成“定义在一个函数内部的函数“。
    在本质上，闭包是将函数内部和函数外部连接起来的桥梁。

    lua
    当一个函数内部嵌套另一个函数定义时，内部的函数体可以访问外部的函数的局部变量，
    这种特征在lua中我们称作词法定界。
    虽然这看起来很清楚，事实并非如此，
    词法定界加上第一类函数在编程语言里是一个功能强大的概念，很少语言提供这种支持。

    个人理解
    闭包就是指一种编码方式，一种思想，而不是指某种具体的技术或函数或库

    lambda 表达式，经典的闭包表现方式之一

]]</span><span class="token comment">--</span>

<span class="token keyword">local</span> <span class="token keyword">function</span> <span class="token function">func1</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span>
    <span class="token keyword">local</span> x<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">local</span> y<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        x<span class="token operator">=</span>x<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>          <span class="token comment">-- 类似于static 属性</span>
        <span class="token function">print</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>

<span class="token keyword">end</span>


<span class="token comment">--func1(&quot;abc&quot;,123)();</span>

<span class="token comment">---如果学过面向对象，这里很好理解</span>
<span class="token comment">---</span>

tmpFunc <span class="token operator">=</span> <span class="token function">func1</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">tmpFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">tmpFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">tmpFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

tmpFunc3<span class="token operator">=</span>tmpFunc<span class="token punctuation">;</span>
<span class="token function">tmpFunc3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

tmpFunc2 <span class="token operator">=</span> <span class="token function">func1</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">tmpFunc2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br></div></div><h3 id="_14-用闭包实现ipairs-迭代器"><a href="#_14-用闭包实现ipairs-迭代器" class="header-anchor">#</a> 14）用闭包实现ipairs 迭代器</h3> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code>
<span class="token comment">--[[

    迭代器

    百科百科 https://baike.baidu.com/item/迭代器

    迭代器（iterator）有时又称光标（cursor）是程序设计的软件设计模式，
    可在容器对象（container，例如链表或数组）上遍访的接口，
    设计人员无需关心容器对象的内存分配的实现细节。

]]</span><span class="token comment">--</span>

t1<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">33</span><span class="token punctuation">,</span><span class="token keyword">nil</span><span class="token punctuation">,</span><span class="token number">44</span><span class="token punctuation">,</span><span class="token number">55</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> k<span class="token punctuation">,</span>v <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>t1<span class="token punctuation">)</span> <span class="token keyword">do</span>
    <span class="token function">print</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token keyword">function</span> <span class="token function">myIpairs</span><span class="token punctuation">(</span>tab<span class="token punctuation">)</span>

    <span class="token keyword">local</span> index<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">local</span> count<span class="token operator">=</span><span class="token operator">#</span>tab<span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        index <span class="token operator">=</span> index<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> index <span class="token operator">&lt;=</span> count <span class="token keyword">then</span>

            <span class="token keyword">if</span> tab<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token keyword">nil</span> <span class="token keyword">then</span>
                index <span class="token operator">=</span> index<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token keyword">end</span>
            <span class="token keyword">return</span> index<span class="token punctuation">,</span>tab<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token keyword">end</span>
    <span class="token keyword">end</span>

<span class="token keyword">end</span>

<span class="token keyword">for</span> k<span class="token punctuation">,</span>v <span class="token keyword">in</span> <span class="token function">myIpairs</span><span class="token punctuation">(</span>t1<span class="token punctuation">)</span> <span class="token keyword">do</span>
    <span class="token function">print</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;fdfsfdsds&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br></div></div><h3 id="_15-元表与元方法"><a href="#_15-元表与元方法" class="header-anchor">#</a> 15）元表与元方法</h3> <p>(1)</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code>
<span class="token comment">--[[

    元表 metatable

        元表并不是一个普通的表，而是一套自定义的计算规则，用这些规则，可以实现表与表之间的运算
        而这些规则，都以函数的方式，写在元表中，所以又称为元方法(就是写在元表里面的方法)

        起到一个类似于其它语言中的运算符重载的作用

        setmetatable(table, metatable) -- 将 metatable 设为 table 的元表，其返回值为table

]]</span><span class="token comment">--</span>

t1<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token keyword">nil</span><span class="token punctuation">,</span><span class="token keyword">nil</span><span class="token punctuation">,</span><span class="token keyword">nil</span><span class="token punctuation">,</span><span class="token number">33</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
t2<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">111</span><span class="token punctuation">,</span><span class="token number">222</span><span class="token punctuation">,</span><span class="token number">333</span><span class="token punctuation">,</span><span class="token number">444</span><span class="token punctuation">,</span><span class="token number">555</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
metatT3<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">setmetatable</span><span class="token punctuation">(</span>t1<span class="token punctuation">,</span>metatT3<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setmetatable</span><span class="token punctuation">(</span>t2<span class="token punctuation">,</span>metatT3<span class="token punctuation">)</span><span class="token punctuation">;</span>

metatT3<span class="token punctuation">.</span>__add<span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span>t1<span class="token punctuation">,</span>t2<span class="token punctuation">)</span>
    <span class="token keyword">local</span> rs<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">local</span> len1<span class="token operator">=</span><span class="token operator">#</span>t1<span class="token punctuation">;</span>
    <span class="token keyword">local</span> len2<span class="token operator">=</span><span class="token operator">#</span>t2<span class="token punctuation">;</span>

    <span class="token keyword">if</span> len1 <span class="token operator">&gt;</span> len2 <span class="token keyword">then</span>
        len2<span class="token operator">=</span>len1<span class="token punctuation">;</span>
    <span class="token keyword">end</span>

    <span class="token keyword">for</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>len2 <span class="token keyword">do</span>
        <span class="token keyword">local</span> a<span class="token operator">=</span>t1<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token keyword">or</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">local</span> b<span class="token operator">=</span>t2<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token keyword">or</span> <span class="token number">0</span><span class="token punctuation">;</span>
        rs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>a<span class="token operator">+</span>b<span class="token punctuation">;</span>
    <span class="token keyword">end</span>
    <span class="token keyword">return</span> rs<span class="token punctuation">;</span>
<span class="token keyword">end</span>

metatT3<span class="token punctuation">[</span><span class="token string">&quot;__eq&quot;</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span>t1<span class="token punctuation">,</span>t2<span class="token punctuation">)</span>

    <span class="token keyword">if</span> <span class="token operator">#</span>t1 <span class="token operator">~=</span> <span class="token operator">#</span>t2 <span class="token keyword">then</span>
        <span class="token keyword">return</span> <span class="token keyword">false</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>

    <span class="token keyword">for</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">#</span>t1 <span class="token keyword">do</span>
        <span class="token keyword">if</span> t1<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">~=</span> t2<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token keyword">then</span>
            <span class="token keyword">return</span> <span class="token keyword">false</span><span class="token punctuation">;</span>
        <span class="token keyword">end</span>
    <span class="token keyword">end</span>

    <span class="token keyword">return</span> <span class="token keyword">true</span><span class="token punctuation">;</span>


<span class="token keyword">end</span>


t3<span class="token operator">=</span>t1<span class="token operator">+</span>t2<span class="token punctuation">;</span>
<span class="token comment">--print(t3);</span>

<span class="token keyword">for</span> k<span class="token punctuation">,</span>v <span class="token keyword">in</span> <span class="token function">ipairs</span><span class="token punctuation">(</span>t3<span class="token punctuation">)</span> <span class="token keyword">do</span>
    <span class="token function">print</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>

t11<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
t22<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">;</span>


<span class="token comment">--在lua 中，我们认为nil 是无效的，所以如果nil 在 表的最后，就直接扔掉，</span>
<span class="token comment">--如果nil 后面有其它非nil 的元素，不得己必须得带着</span>
<span class="token comment">--print(#t22);</span>

<span class="token function">setmetatable</span><span class="token punctuation">(</span>t11<span class="token punctuation">,</span>metatT3<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setmetatable</span><span class="token punctuation">(</span>t22<span class="token punctuation">,</span>metatT3<span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token function">print</span><span class="token punctuation">(</span>t11 <span class="token operator">==</span> t22<span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">--[[
metatT4={
    __add=function(t1,t2)
        local rs={};

        local len1=#t1;
        local len2=#t2;

        if len1 &gt; len2 then
            len2=len1;
        end

        for i=1,len2 do
            local a=t1[i] or &quot;&quot;;
            local b=t2[i] or &quot;&quot;;
            --print(a,b);
            rs[i]=a..b;
        end
        return rs;
    end
}

t4={&quot;abc&quot;,&quot;def&quot;,&quot;xyz&quot;};
t5={11,22,33,&quot;ABC&quot;};
setmetatable(t4,metatT4);
setmetatable(t5,metatT4);
t6=t4+t5;
print(&quot;&quot;)
for k,v in ipairs(t6) do
    print(k,v);
end
]]</span><span class="token comment">--</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br></div></div><p>(2)</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code>
<span class="token comment">--[[

    元表 metatable

        __index
            当在一个表中，去取某个key
                如果该表中有对应的key，就直接返回
                如果没有
                    看有没有元表
                        没有元表，返回nil
                        有元表
                            看元表中有没有__index
                                没有，返回nil
                                有
                                    如果__index 是个表,
                                        并且有key, 返回值
                                            没有key, 返回nil

                                     如果 __index 是个function
                                        则直接调用该function ，且表和key 都会作为该function 的参数


        __newindex
            如果是表，则在本表里面设一个没有的key的时候，会写到__newindex 对应的表中,而不会写本表
                     如果本表中有key,则更新本表，不会管元表

            如果是function,则直接调用，且本表，key,value 都可作参数
]]</span><span class="token comment">--</span>


t1<span class="token operator">=</span><span class="token punctuation">{</span>id<span class="token operator">=</span><span class="token number">123</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">&quot;tom&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

t2<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
meta<span class="token operator">=</span><span class="token punctuation">{</span>
    <span class="token comment">--__newindex=t2;</span>

    __newindex<span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span>k<span class="token punctuation">,</span>v<span class="token punctuation">)</span>
        <span class="token comment">--print(tostring(t)..&quot; 被写入 &quot;..k..&quot; : &quot;..v);</span>
        <span class="token comment">--t[k]=v; --stack overflow 死递归，爆栈了</span>
        <span class="token function">rawset</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span>k<span class="token punctuation">,</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--调用原生方法，不调用重载的方法</span>
    <span class="token keyword">end</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">setmetatable</span><span class="token punctuation">(</span>t1<span class="token punctuation">,</span>meta<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">--print(t1.phone);</span>
t1<span class="token punctuation">[</span><span class="token string">&quot;phone&quot;</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">&quot;t1-phone&quot;</span><span class="token punctuation">;</span><span class="token comment">--当有__newindex 的时候，就写到对应的__newindex 的表中去了</span>
<span class="token function">print</span><span class="token punctuation">(</span>t1<span class="token punctuation">.</span>phone<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">print</span><span class="token punctuation">(</span>t2<span class="token punctuation">.</span>phone<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">--meta.__index=t2;</span>
<span class="token comment">--print(t1.phone);</span>


<span class="token comment">--[[
t1={id=123,name=&quot;tom&quot;};
meta={

    --__index={phone=&quot;index_phone&quot;};
    __index=function(t,k)
        --print(t,k);
        t[k]=&quot;new-phone&quot;;
        return &quot;index-phone&quot;;
    end
};

setmetatable(t1,meta);



print(t1.phone);--index-hone
print(t1.phone);--new-hone

]]</span><span class="token comment">--</span>

<span class="token comment">--[[
print(t1.phone);--没有key,没有元表 nil

t1.phone=&quot;t1_phone&quot;;--有key,不管元表，直接返回
print(t1.phone);


setmetatable(t1,meta);--设置元表,但没有__index;

print(t1.phone);--还是取自己的key

meta.__index={phone=&quot;index_phone&quot;;};  --元表设置__index;

print(t1.phone);--还是自己的key

t1.phone=nil;--把自己的key 去掉，则会去拿元表

print(t1.phone);--

]]</span><span class="token comment">--</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br></div></div><p>(3)</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code>
<span class="token comment">--[[

    元表 metatable

        __tostring  用函数接管本表的返回值 返回一个string
        __call      把表当类处理，此处类似于类中的构造函数，可传值，本表是第一个参数

        rawget(table, index)  取本表中的index 索引对应的值，不受元表干扰，没有就返回nil;
        rawset(table, index, value)  给本表添加元素，不受元表干扰

]]</span><span class="token comment">--</span>


t1<span class="token operator">=</span><span class="token punctuation">{</span>id<span class="token operator">=</span><span class="token number">123</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">&quot;tom&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
meta<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">setmetatable</span><span class="token punctuation">(</span>t1<span class="token punctuation">,</span>meta<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">--print(t1,t1.phone);</span>


meta<span class="token punctuation">.</span>__tostringXX<span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>

    str<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> k<span class="token punctuation">,</span>v <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token keyword">do</span>
        str <span class="token operator">=</span> str<span class="token operator">..</span>k<span class="token operator">..</span><span class="token string">&quot;:&quot;</span><span class="token operator">..</span>v<span class="token operator">..</span><span class="token string">&quot;; &quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>

    <span class="token comment">--t[&quot;phone&quot;]=123456;</span>
    <span class="token comment">--print(&quot;这里是 tostring&quot;);</span>
    <span class="token keyword">return</span> str<span class="token punctuation">;</span>
<span class="token keyword">end</span>

<span class="token comment">--print(t1);</span>
<span class="token comment">--print(t1.phone);--在上一句执行完之后，才有phone 字段</span>


<span class="token comment">--类似于构造函数</span>
meta<span class="token punctuation">.</span>__call<span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span><span class="token punctuation">...</span><span class="token punctuation">)</span>
    <span class="token comment">--print(t);</span>
    <span class="token comment">--print(...);</span>
    <span class="token comment">--local t2={...};</span>
    <span class="token comment">--for k,v in pairs(t2) do</span>
    <span class="token comment">--    print(k,v);</span>
    <span class="token comment">--end</span>

<span class="token keyword">end</span>

<span class="token comment">--print(&quot;&quot;);</span>
<span class="token comment">--t1(1,&quot;a&quot;,2,&quot;b&quot;);</span>

t2<span class="token operator">=</span><span class="token punctuation">{</span>id<span class="token operator">=</span><span class="token number">123</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">&quot;tom&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
t3<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">--print(t2.id);</span>
<span class="token comment">--print(t2.phone);</span>
<span class="token comment">--print(&quot;&quot;);</span>
meta2<span class="token operator">=</span><span class="token punctuation">{</span>
    <span class="token comment">--__index={phone=123456;}</span>
    <span class="token comment">--__index=function(t,k)</span>
    <span class="token comment">--    print(t,k);</span>
    <span class="token comment">--    return &quot;index func&quot;;</span>
    <span class="token comment">--end,</span>
    __newindex<span class="token operator">=</span>t3

<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">setmetatable</span><span class="token punctuation">(</span>t2<span class="token punctuation">,</span>meta2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">--print(t2.id);</span>
<span class="token comment">--print(t2.phone);</span>
<span class="token comment">--print(&quot;&quot;);</span>
<span class="token comment">--print(rawget(t2,&quot;id&quot;));</span>
<span class="token comment">--print(rawget(t2,&quot;phone&quot;));--取本表值</span>

<span class="token function">print</span><span class="token punctuation">(</span>t2<span class="token punctuation">.</span>country<span class="token punctuation">)</span><span class="token punctuation">;</span>
t2<span class="token punctuation">.</span>country<span class="token operator">=</span><span class="token string">&quot;china&quot;</span><span class="token punctuation">;</span>
<span class="token comment">--rawset(t2,&quot;country&quot;,&quot;china&quot;);</span>

<span class="token function">print</span><span class="token punctuation">(</span>t2<span class="token punctuation">.</span>country<span class="token punctuation">,</span>t3<span class="token punctuation">.</span>country<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br></div></div><h3 id="_16-面向对象-self"><a href="#_16-面向对象-self" class="header-anchor">#</a> 16）面向对象-self</h3> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token comment">--[[

    类 class
    对象   new class(实例化)
    继承，构造，析构


    table {}
    metatable {}

    self

]]</span><span class="token comment">--</span>


t1<span class="token operator">=</span><span class="token punctuation">{</span>
    id<span class="token operator">=</span><span class="token number">123</span><span class="token punctuation">,</span>
    name<span class="token operator">=</span><span class="token string">&quot;tom&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

t1<span class="token punctuation">.</span>getId<span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
<span class="token keyword">end</span>


<span class="token comment">--this,self</span>
<span class="token comment">--t1.getName=function(obj)</span>
<span class="token keyword">function</span> t1<span class="token punctuation">:</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> self<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
<span class="token keyword">end</span>

<span class="token function">print</span><span class="token punctuation">(</span>t1<span class="token punctuation">.</span>id<span class="token punctuation">,</span>t1<span class="token punctuation">.</span>name<span class="token punctuation">,</span>t1<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span>t1<span class="token punctuation">)</span><span class="token punctuation">,</span>t1<span class="token punctuation">:</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

t2<span class="token operator">=</span>t1<span class="token punctuation">;</span>
<span class="token comment">--print(t1,t2);</span>
t1<span class="token operator">=</span><span class="token keyword">nil</span><span class="token punctuation">;</span>

<span class="token function">print</span><span class="token punctuation">(</span>t2<span class="token punctuation">.</span>id<span class="token punctuation">,</span>t2<span class="token punctuation">.</span>name<span class="token punctuation">,</span>t2<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span>t2<span class="token punctuation">)</span><span class="token punctuation">,</span>t2<span class="token punctuation">:</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h3 id="_17-面向对象-自索引"><a href="#_17-面向对象-自索引" class="header-anchor">#</a> 17）面向对象-自索引</h3> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code>
<span class="token comment">--[[

    自索引  自己索引自己

]]</span><span class="token comment">--</span>

t1<span class="token operator">=</span><span class="token punctuation">{</span>id<span class="token operator">=</span><span class="token number">123</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">&quot;tom&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">--indexTable={phone=123456}</span>

meta<span class="token operator">=</span><span class="token punctuation">{</span>
    phone<span class="token operator">=</span><span class="token number">123456</span><span class="token punctuation">,</span>
    <span class="token comment">--__index=meta,--此时 meta 不存在，所以 此处的索引 __index=nil</span>
    test<span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token function">print</span><span class="token punctuation">(</span>meta<span class="token punctuation">.</span>__index<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">print</span><span class="token punctuation">(</span>meta<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>
<span class="token punctuation">}</span>

meta<span class="token punctuation">.</span>__index<span class="token operator">=</span>meta<span class="token punctuation">;</span>  <span class="token comment">--自己索引自己了，这种就叫自索引</span>

<span class="token function">setmetatable</span><span class="token punctuation">(</span>t1<span class="token punctuation">,</span>meta<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">print</span><span class="token punctuation">(</span>t1<span class="token punctuation">.</span>phone<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
meta<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h3 id="_18-面向对象-自索引实现继承"><a href="#_18-面向对象-自索引实现继承" class="header-anchor">#</a> 18）面向对象-自索引实现继承</h3> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token comment">--[[

    自索引  自己索引自己

    用自索引实现继承

    典型的面向对象的写法，子类继承父类，并调用父类方法

]]</span><span class="token comment">--</span>

father<span class="token operator">=</span><span class="token punctuation">{</span>a<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>b<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> father<span class="token punctuation">:</span><span class="token function">faSay</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;father say&quot;</span><span class="token punctuation">,</span>self<span class="token punctuation">.</span>a<span class="token punctuation">,</span>self<span class="token punctuation">.</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>

father<span class="token punctuation">:</span><span class="token function">faSay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

father<span class="token punctuation">.</span>__index<span class="token operator">=</span>father<span class="token punctuation">;</span><span class="token comment">--加自索引</span>


son<span class="token operator">=</span><span class="token punctuation">{</span>c<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>d<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> son<span class="token punctuation">:</span><span class="token function">sonSay</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;son say&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>

son<span class="token punctuation">:</span><span class="token function">sonSay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">setmetatable</span><span class="token punctuation">(</span>son<span class="token punctuation">,</span>father<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--加元表</span>

<span class="token comment">--son:sonSay();</span>

son<span class="token punctuation">:</span><span class="token function">faSay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--典型的面向对象的写法，子类继承父类，并调用父类方法</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h3 id="_19-面向对象-类的实例化"><a href="#_19-面向对象-类的实例化" class="header-anchor">#</a> 19）面向对象-类的实例化</h3> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code>
<span class="token comment">--[[

    类 class
    对象   new class()
    继承，构造，析构

    table {}
    metatable {}

]]</span><span class="token comment">--</span>

userInfo<span class="token operator">=</span><span class="token punctuation">{</span>id<span class="token operator">=</span><span class="token number">123</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">&quot;tom&quot;</span><span class="token punctuation">,</span>age<span class="token operator">=</span><span class="token number">99</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

userInfo<span class="token punctuation">.</span>__index<span class="token operator">=</span>userInfo<span class="token punctuation">;</span>

u1<span class="token operator">=</span>userInfo<span class="token punctuation">;</span>
u2<span class="token operator">=</span>u1<span class="token punctuation">;</span>

<span class="token keyword">function</span> userInfo<span class="token punctuation">:</span><span class="token function">new</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
    obj<span class="token operator">=</span>obj <span class="token keyword">or</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">setmetatable</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span>self<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
<span class="token keyword">end</span>

<span class="token keyword">function</span> userInfo<span class="token punctuation">:</span><span class="token function">setAge</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
    self<span class="token punctuation">.</span>age<span class="token operator">=</span>self<span class="token punctuation">.</span>age<span class="token operator">+</span>val<span class="token punctuation">;</span>  <span class="token comment">--取 userInfo 的age + val,再写给u3</span>
<span class="token keyword">end</span>

u3<span class="token operator">=</span>userInfo<span class="token punctuation">:</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">{</span>id<span class="token operator">=</span><span class="token number">456</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">print</span><span class="token punctuation">(</span>u2<span class="token punctuation">.</span>age<span class="token punctuation">,</span>u3<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
u3<span class="token punctuation">:</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>u2<span class="token punctuation">.</span>age<span class="token punctuation">,</span>u3<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--99 199</span>


<span class="token comment">--[[
print(u2,u3);
print(u2.id,u3.id);
u2.id=789;
print(u2.id,u3.id);
]]</span><span class="token comment">--</span>


<span class="token comment">--[[
print(u2.name,u3.name);
userInfo.name=&quot;jerry&quot;;
print(u2.name,u3.name);

u3.name=&quot;tom&quot;;  ---__newindex
print(u2.name,u3.name);

userInfo.name=&quot;lucy&quot;;
print(u2.name,u3.name);

]]</span><span class="token comment">--</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br></div></div><h3 id="_20-面向对象-多重继承"><a href="#_20-面向对象-多重继承" class="header-anchor">#</a> 20）面向对象-多重继承</h3> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code>
<span class="token comment">--[[

        多重继承

]]</span><span class="token comment">--</span>

<span class="token comment">--[[
grandfather={id=123,name=&quot;grandfather&quot;};
grandfather.__index=grandfather;

father={name=&quot;father&quot;};
father.__index=father;
setmetatable(father,grandfather);

son={name=&quot;son&quot;};
setmetatable(son,father);


print(grandfather.id);--找自己有没有 id 这个索引，有，直接发返回123
print(father.id);--先找自己，没有 id 这个索引，所以看有没有元表，元表是 grandfather，然后去找 grandfather的 __index，找到，所以返回123

print(son.id);--先找自己，没有 id 这个索引，所以看有没有元表，元表是 father,然后去找 father的 __index，
                -- father.__index 里面也没有 id 这个索引，但是 father.__index 有元表，是 grandfather
                -- 所以去找 grandfather.__index 里面有没有 id 这个索引，有，所以返回123

print(grandfather.name,father.name,son.name);
]]</span><span class="token comment">--</span>



userInfo<span class="token operator">=</span><span class="token punctuation">{</span>id<span class="token operator">=</span><span class="token number">123</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">&quot;tom&quot;</span><span class="token punctuation">,</span>age<span class="token operator">=</span><span class="token number">99</span><span class="token punctuation">}</span><span class="token punctuation">;</span>


<span class="token keyword">function</span> userInfo<span class="token punctuation">:</span><span class="token function">new</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
    obj<span class="token operator">=</span>obj <span class="token keyword">or</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">setmetatable</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span>self<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">---谁调用new 方法，此处的 self 就是谁</span>
    self<span class="token punctuation">.</span>__index<span class="token operator">=</span>self<span class="token punctuation">;</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
<span class="token keyword">end</span>


u3<span class="token operator">=</span>userInfo<span class="token punctuation">:</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">{</span>id<span class="token operator">=</span><span class="token number">456</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">print</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">.</span>id<span class="token punctuation">,</span>u3<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">.</span>name<span class="token punctuation">,</span>u3<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>


u4<span class="token operator">=</span>u3<span class="token punctuation">:</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">{</span>id<span class="token operator">=</span><span class="token number">789</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">&quot;u4u4u4&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>u4<span class="token punctuation">.</span>id<span class="token punctuation">,</span>u4<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--这里出不来的原因是，u3 没有 __index</span>

u5<span class="token operator">=</span>u4<span class="token punctuation">:</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>u5<span class="token punctuation">.</span>id<span class="token punctuation">,</span>u5<span class="token punctuation">.</span>name<span class="token punctuation">,</span>u5<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br></div></div><h3 id="_21-面向对象-重写"><a href="#_21-面向对象-重写" class="header-anchor">#</a> 21）面向对象-重写</h3> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code>
<span class="token comment">--[[

        重写
]]</span><span class="token comment">--</span>

userInfo<span class="token operator">=</span><span class="token punctuation">{</span>id<span class="token operator">=</span><span class="token number">123</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">&quot;tom&quot;</span><span class="token punctuation">,</span>age<span class="token operator">=</span><span class="token number">99</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> userInfo<span class="token punctuation">:</span><span class="token function">new</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
    obj<span class="token operator">=</span>obj <span class="token keyword">or</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">setmetatable</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span>self<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">---谁调用new 方法，此处的 self 就是谁</span>
    self<span class="token punctuation">.</span>__index<span class="token operator">=</span>self<span class="token punctuation">;</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
<span class="token keyword">end</span>

<span class="token keyword">function</span> userInfo<span class="token punctuation">:</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;userinfo say&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>


u1<span class="token operator">=</span>userInfo<span class="token punctuation">:</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

u2<span class="token operator">=</span>u1<span class="token punctuation">:</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">--userInfo --&gt;  u1 --&gt; u2</span>

<span class="token keyword">function</span> u1<span class="token punctuation">:</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;u1-hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>

<span class="token comment">--userInfo.hello();</span>
u1<span class="token punctuation">.</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
u2<span class="token punctuation">.</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">--[[
userInfo.say();
u1.say();
u2.say();
print(&quot;&quot;);

function u1:say()
    print(&quot;u1 say&quot;);
end



userInfo.say();
u1.say();
u2.say();
print(&quot;&quot;);

function u2:say()
    print(&quot;u2 say&quot;);
end
userInfo.say();
u1.say();
u2.say();
print(&quot;&quot;);
]]</span><span class="token comment">--</span>


<span class="token comment">--[[

print(userInfo.id,u1.id,u2.id); -- 如果子类没有赋值，则默认用父类的值，同样，如果父类的成员或方法发生了改变，默认会影响子类，前提是子类没有特化

u1.id=456;--自 u1 以下，都会改变,这种，就算重写

print(userInfo.id,u1.id,u2.id);


u1.phone=123456;

print(userInfo.phone,u1.phone,u2.phone);

u1.phone=nil;
print(userInfo.phone,u1.phone,u2.phone);
u2.phone=654321;
print(userInfo.phone,u1.phone,u2.phone);

]]</span><span class="token comment">--</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br></div></div><h3 id="_22-面向对象-成员私有化"><a href="#_22-面向对象-成员私有化" class="header-anchor">#</a> 22）面向对象-成员私有化</h3> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code>
<span class="token comment">--[[

        成员私有化
]]</span><span class="token comment">--</span>

<span class="token keyword">function</span> <span class="token function">newUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">local</span> member<span class="token operator">=</span><span class="token punctuation">{</span>
        id<span class="token operator">=</span><span class="token number">123</span><span class="token punctuation">,</span>
        name<span class="token operator">=</span><span class="token string">&quot;tom&quot;</span><span class="token punctuation">,</span>
        city<span class="token operator">=</span><span class="token string">&quot;beijing&quot;</span>
    <span class="token punctuation">}</span>


    <span class="token keyword">local</span> <span class="token keyword">function</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> member<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
    <span class="token keyword">end</span>

    <span class="token keyword">local</span> <span class="token keyword">function</span> <span class="token function">setId</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
       member<span class="token punctuation">.</span>id<span class="token operator">=</span>val<span class="token punctuation">;</span>
    <span class="token keyword">end</span>

    <span class="token comment">--只暴露了这几个方法</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        getId<span class="token operator">=</span>getId<span class="token punctuation">,</span>
        setId<span class="token operator">=</span>setId<span class="token punctuation">,</span>

        getName<span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> member<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
        <span class="token keyword">end</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>


<span class="token keyword">end</span>


users <span class="token operator">=</span> <span class="token function">newUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token function">print</span><span class="token punctuation">(</span>users<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

users<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">456</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>users<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>users<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><h3 id="_23-协程-coroutine"><a href="#_23-协程-coroutine" class="header-anchor">#</a> 23）协程(coroutine)</h3> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code>
<span class="token comment">--[[

        协程

        协程不是进程或线程，其执行过程更类似于子例程，或者说不带返回值的函数调用。
        一个程序可以包含多个协程，可以对比与一个进程包含多个线程，因而下面我们来比较协程和线程。
        我们知道多个线程相对独立，有自己的上下文，切换受系统控制；
        而协程也相对独立，有自己的上下文，但是其切换由自己控制，由当前协程切换到其他协程由当前协程来控制。

        【可以把协程看成是一个可自行决定调度切换的线程】

        编程语言Lua从5.0版开始支持协程的概念，极大的扩展了Lua的能力。Lua的协程通过扩展库coroutine来实现

        百度百科  https://baike.baidu.com/item/协程/8652240


        API  https://www.lua.org/manual/5.4/manual.html#6.2

        coroutine.close (co) -------------------- 关闭协程，返回bool
        coroutine.create (f) -------------------- 创建协程，传入一个function，返回一个协程句柄
        coroutine.isyieldable ([co]) ------------ 判断协程是否是 yield 状态
        coroutine.resume (co [, val1, ···]) ----- 将挂起态的协程重新激活
        coroutine.running () -------------------- 获取正在运行的协程
        coroutine.status (co) ------------------- 获取co句柄对应的协程的状态 [suspended(挂起)，running(执行中),dead(结束)]
        coroutine.wrap (f) ---------------------- 用function 创建一个新的协程
        coroutine.yield (···) ------------------- 挂起当前协程

]]</span><span class="token comment">--</span>


<span class="token comment">--业务，取钱，取一百万</span>
<span class="token keyword">function</span> <span class="token function">func1</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span>

    <span class="token comment">---print(coroutine.status(handle));--这里能看出是执行中</span>
    aa<span class="token operator">=</span>a<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">;</span>
    bb<span class="token operator">=</span>b<span class="token operator">*</span><span class="token number">3</span><span class="token punctuation">;</span>
    x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>z<span class="token operator">=</span>coroutine<span class="token punctuation">.</span><span class="token function">yield</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span><span class="token string">&quot;100w&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--挂起协程，一百万给你了，然后问你，还有什么要帮你的</span>

    <span class="token function">print</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>z<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">--第二笔业业，查询你有没有IQ</span>
    <span class="token comment">---xx,yy,zz= coroutine.yield();</span>


<span class="token keyword">end</span>


handle <span class="token operator">=</span> coroutine<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>func1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--- 去银行办业务， 然后告诉大堂经理，要取现金(要执行func1)，大堂经理会帮你叫号，给你一个小票(handle)</span>

<span class="token function">print</span><span class="token punctuation">(</span>coroutine<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span>handle<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--- 挂起状态，等待执行或结束，(你拿到小票了，就去等着叫号，下一步，也可能这个号作废，也可能叫你去办业务)</span>

<span class="token comment">--coroutine.resume(handle);--------------- 叫到你的号了，你拿着小票去窗口办业务(执行 func1)</span>
<span class="token function">print</span><span class="token punctuation">(</span>coroutine<span class="token punctuation">.</span><span class="token function">resume</span><span class="token punctuation">(</span>handle<span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">---- resume是阻塞的，要等到调用结束，然后返回调用成功或失败状态(bool)以及其它值</span>
                                            <span class="token comment">---- 并且把你的身份证，银行卡还给你，再把你取的一百万给你</span>

<span class="token function">print</span><span class="token punctuation">(</span>coroutine<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span>handle<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">---------------- 挂起状态，等待继续服务或结束服务</span>

<span class="token comment">--coroutine.close(handle);------------------------ 业务办完了，好评结束</span>
<span class="token comment">--print(coroutine.status(handle));---------------- dead 结束状态</span>


<span class="token function">print</span><span class="token punctuation">(</span>coroutine<span class="token punctuation">.</span><span class="token function">resume</span><span class="token punctuation">(</span>handle<span class="token punctuation">,</span><span class="token string">&quot;aa&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;bb&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;cc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--再办一个业务，查查我其它的卡上的余额，IC卡，IQ都给你(aa,bb,cc)</span>

<span class="token function">print</span><span class="token punctuation">(</span>coroutine<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span>handle<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br></div></div><h3 id="_24-协程-coroutine-双循环切换"><a href="#_24-协程-coroutine-双循环切换" class="header-anchor">#</a> 24）协程(coroutine)-双循环切换</h3> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code>

<span class="token keyword">function</span> <span class="token function">sleep</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
    <span class="token keyword">local</span> now <span class="token operator">=</span> os<span class="token punctuation">.</span><span class="token function">clock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> now<span class="token operator">+</span>n <span class="token operator">&gt;=</span> os<span class="token punctuation">.</span><span class="token function">clock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">do</span>

    <span class="token keyword">end</span>
<span class="token keyword">end</span>


<span class="token comment">--[[
function func1()
    while true do
        print(&quot;func1---111&quot;);
        sleep(1);
    end
end

function func2()
    while true do
        print(&quot;func2---222&quot;);
        sleep(1);
    end
end
--func1();
--func2();

]]</span><span class="token comment">--</span>


<span class="token comment">--[[
function func1(flag)
    while true do
        print(&quot;func1---111&quot;);
        sleep(1);
        if flag %2 == 0 then
            break;
        end
    end
end

function func2(flag)
    while true do
        print(&quot;func2---222&quot;);
        sleep(1);
        if flag %2 ~= 0 then
            break;
        end
    end
end


flag = 0;
while true do
    if flag % 2 == 0 then
        func1(flag);
    else
        func2(flag);
    end
    flag = flag+1;
end
]]</span><span class="token comment">--</span>


<span class="token keyword">function</span> <span class="token function">func1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">while</span> <span class="token keyword">true</span> <span class="token keyword">do</span>
        rs <span class="token operator">=</span> coroutine<span class="token punctuation">.</span><span class="token function">resume</span><span class="token punctuation">(</span>handle2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">print</span><span class="token punctuation">(</span>rs<span class="token punctuation">,</span><span class="token string">&quot; func1---111&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span>

<span class="token keyword">function</span> <span class="token function">func2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">while</span> <span class="token keyword">true</span> <span class="token keyword">do</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;xxxxxxxxxxxxx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        coroutine<span class="token punctuation">.</span><span class="token function">yield</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;func2---222&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">end</span>
<span class="token keyword">end</span>

handle1<span class="token operator">=</span>coroutine<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>func1<span class="token punctuation">)</span><span class="token punctuation">;</span>
handle2 <span class="token operator">=</span> coroutine<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>func2<span class="token punctuation">)</span><span class="token punctuation">;</span>

coroutine<span class="token punctuation">.</span><span class="token function">resume</span><span class="token punctuation">(</span>handle1<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br></div></div><h3 id="_25-协程-coroutine-生产者消费者模型"><a href="#_25-协程-coroutine-生产者消费者模型" class="header-anchor">#</a> 25）协程(coroutine)-生产者消费者模型</h3> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code>

<span class="token comment">--[[

    协程

    生产者消费者模型

    你去吃串，
        生产者  烤串的小哥
        消费者  你

    小哥烤一串，你吃一串
    小哥烤一串，你吃一串
    小哥烤一串，你吃一串
    ....

    这就是生产者消费者模型

]]</span><span class="token comment">--</span>

<span class="token keyword">function</span> <span class="token function">sleep</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
    <span class="token keyword">local</span> now <span class="token operator">=</span> os<span class="token punctuation">.</span><span class="token function">clock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> now<span class="token operator">+</span>n <span class="token operator">&gt;=</span> os<span class="token punctuation">.</span><span class="token function">clock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">do</span>

    <span class="token keyword">end</span>
<span class="token keyword">end</span>


<span class="token comment">--生产者</span>
<span class="token keyword">function</span> <span class="token function">prod</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">local</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token keyword">true</span> <span class="token keyword">do</span>
        i<span class="token operator">=</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>
        coroutine<span class="token punctuation">.</span><span class="token function">yield</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--生产者生产出后，返回给消费者，并挂起，</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span>


<span class="token comment">--消费者</span>
<span class="token keyword">function</span> <span class="token function">consumer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">while</span> <span class="token keyword">true</span> <span class="token keyword">do</span>
        <span class="token keyword">local</span> flag<span class="token punctuation">,</span>i<span class="token operator">=</span>coroutine<span class="token punctuation">.</span><span class="token function">resume</span><span class="token punctuation">(</span>prodHandle<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--用协程去找生产者要</span>
        <span class="token function">print</span><span class="token punctuation">(</span>flag<span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span>

prodHandle<span class="token operator">=</span>coroutine<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>prod<span class="token punctuation">)</span><span class="token punctuation">;</span>
consumerHandle <span class="token operator">=</span> coroutine<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>consumer<span class="token punctuation">)</span><span class="token punctuation">;</span>

coroutine<span class="token punctuation">.</span><span class="token function">resume</span><span class="token punctuation">(</span>consumerHandle<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--从消费者开始</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br></div></div><h3 id="_26-文件操作"><a href="#_26-文件操作" class="header-anchor">#</a> 26）文件操作</h3> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code>
<span class="token comment">--[[

    文件操作

    io.open (filename [, mode])

        r	只读方式打开，文件必须存在。
        w	只写方式打开，文件存在则删除原有内容，文件不存在则创建。
        a	追加方式打开，文件存在，则写入的数据会往最后追加，文件不存在则创建。
        r+	读写方式打开，文件必须存在。
        w+	读写方式打开，文件存在则删除原有内容，文件不存在则创建。
        a+	与a类似，但文件可读写。
        b	二进制模式，如果文件是二进制文件，可以加上b
        +	修饰符，表示对文件既可以读也可以写


    io.read()
        *n  读取一个数字
        *a  读取所有内容
        *l  默认值，读取下一行
        123 从当前位置开始，读取123个字符长度

    file:seek(whence, offset)

    whence
        set 从头开始
        cur 从当前位置开始
        end 从末尾开始


    file:seek() 无参数，返回的是当前位置



]]</span><span class="token comment">--</span>


f1 <span class="token operator">=</span> io<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;file/a.txt&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;r&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
f2 <span class="token operator">=</span> io<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;file/ab.txt&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;r&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> str <span class="token keyword">in</span> f1<span class="token punctuation">:</span><span class="token function">lines</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">do</span>
    <span class="token function">print</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> str <span class="token keyword">in</span> io<span class="token punctuation">.</span><span class="token function">lines</span><span class="token punctuation">(</span><span class="token string">&quot;file/ab.txt&quot;</span><span class="token punctuation">)</span> <span class="token keyword">do</span>
    <span class="token function">print</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>

io<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>f1<span class="token punctuation">)</span><span class="token punctuation">;</span>
f2<span class="token punctuation">:</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">--[[
print(f1:seek());--0
print(f1:read());
print(f1:seek());--7
print(f1:seek(&quot;cur&quot;));--迭代器指向的位置
print(f1:read());

print(f1:seek(&quot;end&quot;,-5));
print(f1:read());
--print(f1:seek(&quot;set&quot;));
--print(f1:read());
]]</span><span class="token comment">--</span>


<span class="token comment">--[[
print(f1:read());
print(f2:read());
print(&quot;&quot;);

print(f1:read());
print(f2:read());

print(&quot;&quot;);
print(f1:seek());
print(f2:seek());
f2:seek()
]]</span><span class="token comment">--</span>

<span class="token comment">--[[
io.input(f1);
print(io.read());
io.input(f2);
print(io.read());
]]</span><span class="token comment">--</span>



<span class="token comment">--[[
f1 = io.open(&quot;file/ab.txt&quot;,&quot;w+&quot;);

if f1 == nil then
    print(&quot;文件不存在&quot;);
    os.exit();
end

io.input(f1);--把f1 文件句柄输入到io(当前输入输出终端)

--io.write(&quot;AB&quot;);

io.output(f1);-- 把io的内容输出到 f1

io.write(&quot;123456&quot;);

print(io.read());
]]</span><span class="token comment">--</span>

<span class="token comment">--io.write(&quot;ABCDEF&quot;);</span>
<span class="token comment">--io.write(&quot;G&quot;);</span>
<span class="token comment">--io.write(&quot;XY&quot;);</span>


<span class="token comment">--print(io.read(&quot;*n&quot;));</span>
<span class="token comment">--print(io.read(&quot;l&quot;));</span>
<span class="token comment">--print(io.read(8));</span>
<span class="token comment">--print(&quot;&quot;);</span>
<span class="token comment">--print(io.read(&quot;*a&quot;));</span>
<span class="token comment">--[[
while true do
    str = io.read();
    if str == nil then
        break;
    end
    print(str);

end
]]</span><span class="token comment">--</span>

<span class="token comment">--io.close(f1);</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br></div></div><h3 id="_27-包-模块-管理"><a href="#_27-包-模块-管理" class="header-anchor">#</a> 27）包(模块)管理</h3> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code>
<span class="token keyword">local</span>  tmpHelper <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;helper&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">local</span>  tmpHelper2 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;file/helper2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">--找lua源文件和so 库</span>
<span class="token comment">--print(package.path);</span>
<span class="token comment">--print(package.cpath);</span>

<span class="token comment">--package.path=package.path..&quot;;/tmp/?.lua&quot;;</span>

<span class="token comment">--package.preload</span>
<span class="token comment">--package.loaded;</span>




<span class="token keyword">for</span> k<span class="token punctuation">,</span>v <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>package<span class="token punctuation">.</span>preload<span class="token punctuation">)</span> <span class="token keyword">do</span>
    <span class="token function">print</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> k<span class="token punctuation">,</span>v <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>package<span class="token punctuation">.</span>loaded<span class="token punctuation">)</span> <span class="token keyword">do</span>
    <span class="token function">print</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>








<span class="token comment">--print(package.path);</span>

<span class="token comment">--package.path=package.path..&quot;;/tmp/?.lua&quot;;</span>
<span class="token comment">--local test = require(&quot;test&quot;);</span>

<span class="token comment">--print(package.path);</span>
<span class="token comment">--print(test.id);</span>

<span class="token comment">--os.exit();</span>
<span class="token comment">--print(&quot;&quot;);</span>

<span class="token comment">--[[
helper={
    getIp = function()
        return &quot;192.168.1.1&quot;;
    end
}


print(helper.getIp(),tmpHelper.getIp(),tmpHelper2.getIp());
]]</span><span class="token comment">--</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br></div></div><h3 id="_28-操作mysql数据库"><a href="#_28-操作mysql数据库" class="header-anchor">#</a> 28）操作mysql数据库</h3> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token comment">--[[

    luasql  https://luarocks.org/

    brew install luarocks
    luarocks install luasql-mysql   注意此处，如果你是 mariadb，然后要求指定 MYSQL_DIR 参数的时候，
                                        千万不要指到 mariadb 的安装目录，而是要指到一个真正的mysql 安将目录
                                        那是不是不能用 mariadb 呢，也不是，要手动安装一遍

    luarocks install luasql-sqlite3
    luarocks install luasql-postgres
    luarocks install luasql-mysql
    luarocks install luasql-sqlite
    luarocks install luasql-odbc

]]</span><span class="token comment">--</span>

<span class="token keyword">local</span> luasql <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;luasql.mysql&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

client <span class="token operator">=</span> luasql<span class="token punctuation">.</span><span class="token function">mysql</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">--创建连接</span>
conn<span class="token operator">=</span>client<span class="token punctuation">:</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">&quot;lua-test&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;12345678&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span><span class="token number">3306</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">--数据库名，用户名，密码，IP，端口</span>

<span class="token keyword">if</span> conn <span class="token operator">==</span> <span class="token keyword">nil</span> <span class="token keyword">then</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;连接失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    os<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>

<span class="token comment">--select</span>
rs<span class="token operator">=</span>conn<span class="token punctuation">:</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token string">&quot;select * from user_list order by id desc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

row <span class="token operator">=</span> rs<span class="token punctuation">:</span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">while</span> row <span class="token keyword">do</span>

    <span class="token function">print</span><span class="token punctuation">(</span>row<span class="token punctuation">.</span>id<span class="token punctuation">,</span>row<span class="token punctuation">.</span>name<span class="token punctuation">,</span>row<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>

    row <span class="token operator">=</span> rs<span class="token punctuation">:</span><span class="token function">fetch</span><span class="token punctuation">(</span>row<span class="token punctuation">,</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">end</span>

<span class="token comment">--insert</span>
<span class="token comment">--rs=conn:execute(&quot;insert into user_list (name,age)values('def',456)&quot;);</span>
<span class="token comment">--print(rs);</span>

<span class="token comment">--update</span>
rs<span class="token operator">=</span>conn<span class="token punctuation">:</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token string">&quot;update user_list set name='DEF',age=789 where id&lt;=4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>rs<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">--delete</span>
rs<span class="token operator">=</span>conn<span class="token punctuation">:</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token string">&quot;delete from  user_list where id=4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>rs<span class="token punctuation">)</span><span class="token punctuation">;</span>

conn<span class="token punctuation">:</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
client<span class="token punctuation">:</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br></div></div><h3 id="_29-连接数据库"><a href="#_29-连接数据库" class="header-anchor">#</a> 29）连接数据库</h3> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token comment">--[[

    luasql  https://luarocks.org/

    brew install luarocks
    luarocks install luasql-mysql   注意此处，如果你是 mariadb，然后要求指定 MYSQL_DIR 参数的时候，
                                        千万不要指到 mariadb 的安装目录，而是要指到一个真正的mysql 安将目录
                                        那是不是不能用 mariadb 呢，也不是，要手动安装一遍

    luarocks install luasql-sqlite3
    luarocks install luasql-postgres
    luarocks install luasql-mysql
    luarocks install luasql-sqlite
    luarocks install luasql-odbc

]]</span><span class="token comment">--</span>

<span class="token keyword">local</span> luasql <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;luasql.mysql&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

client <span class="token operator">=</span> luasql<span class="token punctuation">.</span><span class="token function">mysql</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">--创建连接</span>
conn<span class="token operator">=</span>client<span class="token punctuation">:</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">&quot;collegestudentsloosechangenetwork&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;xiaoze&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span><span class="token number">3306</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">--数据库名，用户名，密码，IP，端口</span>
conn<span class="token punctuation">:</span>execute<span class="token string">&quot;SET NAMES UTF8&quot;</span>

<span class="token keyword">if</span> conn <span class="token operator">==</span> <span class="token keyword">nil</span> <span class="token keyword">then</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;连接失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    os<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>

<span class="token comment">--select</span>
rs<span class="token operator">=</span>conn<span class="token punctuation">:</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token string">&quot;select * from user order by  user_id desc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

row <span class="token operator">=</span> rs<span class="token punctuation">:</span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">while</span> row <span class="token keyword">do</span>

    <span class="token function">print</span><span class="token punctuation">(</span>row<span class="token punctuation">.</span>id<span class="token punctuation">,</span>row<span class="token punctuation">.</span>name<span class="token punctuation">,</span>row<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>

    row <span class="token operator">=</span> rs<span class="token punctuation">:</span><span class="token function">fetch</span><span class="token punctuation">(</span>row<span class="token punctuation">,</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">end</span>

<span class="token comment">--insert</span>
<span class="token comment">--rs=conn:execute(&quot;insert into user_list (name,age)values('def',456)&quot;);</span>
<span class="token comment">--print(rs);</span>

<span class="token comment">--update</span>
<span class="token comment">--rs=conn:execute(&quot;update user_list set name='DEF',age=789 where id&lt;=4&quot;);</span>
<span class="token comment">--print(rs);</span>

<span class="token comment">--delete</span>
<span class="token comment">--rs=conn:execute(&quot;delete from  user_list where id=4&quot;);</span>
<span class="token comment">--print(rs);</span>

conn<span class="token punctuation">:</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
client<span class="token punctuation">:</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br></div></div><h3 id="_30-操作redis"><a href="#_30-操作redis" class="header-anchor">#</a> 30）操作redis</h3> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code>
<span class="token comment">--[[

    luarocks install luasocket         module 'socket' not found

    https://github.com/nrk/redis-lua

    最历害的是，用redis 去跑lua，分布式锁，限流，
]]</span><span class="token comment">--</span>

<span class="token keyword">local</span> redis <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;redis&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token keyword">local</span> config<span class="token operator">=</span><span class="token punctuation">{</span>host<span class="token operator">=</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span>port<span class="token operator">=</span><span class="token number">6379</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">local</span> client <span class="token operator">=</span> redis<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">--原子操作</span>
<span class="token comment">--eval &quot;local val=redis.call('GET',KEYS[1]);if _G.tonumber(val)&gt;0 then redis.call('DECR',KEYS[1]) end;return true&quot; 1 test-key</span>


<span class="token keyword">local</span> val<span class="token operator">=</span>client<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'test-key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--1</span>
<span class="token keyword">if</span> _G<span class="token punctuation">.</span><span class="token function">tonumber</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token operator">&lt;</span><span class="token number">1</span> <span class="token keyword">then</span>

    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;没有库存，抢完了&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    os<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">else</span>
    client<span class="token punctuation">.</span><span class="token function">decr</span><span class="token punctuation">(</span><span class="token string">'test-key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>




<span class="token comment">--[[
info = client:info();

for k,v in pairs(info.clients) do
    print(k,v);
 end
 ]]</span><span class="token comment">--</span>

<span class="token function">print</span><span class="token punctuation">(</span>client<span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;test-key&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">--print(cliREADMEent:del(&quot;test-key&quot;));</span>

<span class="token comment">--print(client:set(&quot;test-key&quot;,456));</span>

<span class="token function">print</span><span class="token punctuation">(</span>client<span class="token punctuation">:</span><span class="token function">incr</span><span class="token punctuation">(</span><span class="token string">&quot;test-key&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">print</span><span class="token punctuation">(</span>client<span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;test-key&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> k<span class="token punctuation">,</span>v <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>redis<span class="token punctuation">.</span>commands<span class="token punctuation">)</span> <span class="token keyword">do</span>
    <span class="token function">print</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br></div></div></div></section> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/xiaoze-blog/blogs/其他/Nginx.html" class="prev">
          nginx学习
        </a></span> <span class="next"><a href="/xiaoze-blog/blogs/其他/redis操作lua脚本.html">
          redis操作lua脚本
        </a></span></p></div> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/xiaoze-blog/blogs/%E5%85%B6%E4%BB%96/lua%E8%84%9A%E6%9C%AC.html#_1-linux环境配置" class="sidebar-link reco-side-_1-linux环境配置" data-v-b57cc07c>1：linux环境配置</a></li><li class="level-2" data-v-b57cc07c><a href="/xiaoze-blog/blogs/%E5%85%B6%E4%BB%96/lua%E8%84%9A%E6%9C%AC.html#_2-基本语法" class="sidebar-link reco-side-_2-基本语法" data-v-b57cc07c>2：基本语法</a></li><li class="level-3" data-v-b57cc07c><a href="/xiaoze-blog/blogs/%E5%85%B6%E4%BB%96/lua%E8%84%9A%E6%9C%AC.html#_1-基本数据类型" class="sidebar-link reco-side-_1-基本数据类型" data-v-b57cc07c>1）基本数据类型</a></li><li class="level-3" data-v-b57cc07c><a href="/xiaoze-blog/blogs/%E5%85%B6%E4%BB%96/lua%E8%84%9A%E6%9C%AC.html#_2-基本运算符" class="sidebar-link reco-side-_2-基本运算符" data-v-b57cc07c>2）基本运算符</a></li><li class="level-3" data-v-b57cc07c><a href="/xiaoze-blog/blogs/%E5%85%B6%E4%BB%96/lua%E8%84%9A%E6%9C%AC.html#_3-流程控制-if" class="sidebar-link reco-side-_3-流程控制-if" data-v-b57cc07c>3）流程控制（if）</a></li><li class="level-3" data-v-b57cc07c><a href="/xiaoze-blog/blogs/%E5%85%B6%E4%BB%96/lua%E8%84%9A%E6%9C%AC.html#_4-流程控制-循环" class="sidebar-link reco-side-_4-流程控制-循环" data-v-b57cc07c>4）流程控制（循环）</a></li><li class="level-3" data-v-b57cc07c><a href="/xiaoze-blog/blogs/%E5%85%B6%E4%BB%96/lua%E8%84%9A%E6%9C%AC.html#_5-table-array" class="sidebar-link reco-side-_5-table-array" data-v-b57cc07c>5）table-array</a></li><li class="level-3" data-v-b57cc07c><a href="/xiaoze-blog/blogs/%E5%85%B6%E4%BB%96/lua%E8%84%9A%E6%9C%AC.html#_6-string字符串" class="sidebar-link reco-side-_6-string字符串" data-v-b57cc07c>6）string字符串</a></li><li class="level-3" data-v-b57cc07c><a href="/xiaoze-blog/blogs/%E5%85%B6%E4%BB%96/lua%E8%84%9A%E6%9C%AC.html#_7-string字符串" class="sidebar-link reco-side-_7-string字符串" data-v-b57cc07c>7）string字符串</a></li><li class="level-3" data-v-b57cc07c><a href="/xiaoze-blog/blogs/%E5%85%B6%E4%BB%96/lua%E8%84%9A%E6%9C%AC.html#_8-function的常见表现形式" class="sidebar-link reco-side-_8-function的常见表现形式" data-v-b57cc07c>8）function的常见表现形式</a></li><li class="level-3" data-v-b57cc07c><a href="/xiaoze-blog/blogs/%E5%85%B6%E4%BB%96/lua%E8%84%9A%E6%9C%AC.html#_9-table中的function" class="sidebar-link reco-side-_9-table中的function" data-v-b57cc07c>9）table中的function</a></li><li class="level-3" data-v-b57cc07c><a href="/xiaoze-blog/blogs/%E5%85%B6%E4%BB%96/lua%E8%84%9A%E6%9C%AC.html#_10-数组" class="sidebar-link reco-side-_10-数组" data-v-b57cc07c>10）数组</a></li><li class="level-3" data-v-b57cc07c><a href="/xiaoze-blog/blogs/%E5%85%B6%E4%BB%96/lua%E8%84%9A%E6%9C%AC.html#_11-用select处理可变参数" class="sidebar-link reco-side-_11-用select处理可变参数" data-v-b57cc07c>11）用select处理可变参数</a></li><li class="level-3" data-v-b57cc07c><a href="/xiaoze-blog/blogs/%E5%85%B6%E4%BB%96/lua%E8%84%9A%E6%9C%AC.html#_12-用pack处理可变参数" class="sidebar-link reco-side-_12-用pack处理可变参数" data-v-b57cc07c>12）用pack处理可变参数</a></li><li class="level-3" data-v-b57cc07c><a href="/xiaoze-blog/blogs/%E5%85%B6%E4%BB%96/lua%E8%84%9A%E6%9C%AC.html#_13-lua中闭包的实现" class="sidebar-link reco-side-_13-lua中闭包的实现" data-v-b57cc07c>13）lua中闭包的实现</a></li><li class="level-3" data-v-b57cc07c><a href="/xiaoze-blog/blogs/%E5%85%B6%E4%BB%96/lua%E8%84%9A%E6%9C%AC.html#_14-用闭包实现ipairs-迭代器" class="sidebar-link reco-side-_14-用闭包实现ipairs-迭代器" data-v-b57cc07c>14）用闭包实现ipairs 迭代器</a></li><li class="level-3" data-v-b57cc07c><a href="/xiaoze-blog/blogs/%E5%85%B6%E4%BB%96/lua%E8%84%9A%E6%9C%AC.html#_15-元表与元方法" class="sidebar-link reco-side-_15-元表与元方法" data-v-b57cc07c>15）元表与元方法</a></li><li class="level-3" data-v-b57cc07c><a href="/xiaoze-blog/blogs/%E5%85%B6%E4%BB%96/lua%E8%84%9A%E6%9C%AC.html#_16-面向对象-self" class="sidebar-link reco-side-_16-面向对象-self" data-v-b57cc07c>16）面向对象-self</a></li><li class="level-3" data-v-b57cc07c><a href="/xiaoze-blog/blogs/%E5%85%B6%E4%BB%96/lua%E8%84%9A%E6%9C%AC.html#_17-面向对象-自索引" class="sidebar-link reco-side-_17-面向对象-自索引" data-v-b57cc07c>17）面向对象-自索引</a></li><li class="level-3" data-v-b57cc07c><a href="/xiaoze-blog/blogs/%E5%85%B6%E4%BB%96/lua%E8%84%9A%E6%9C%AC.html#_18-面向对象-自索引实现继承" class="sidebar-link reco-side-_18-面向对象-自索引实现继承" data-v-b57cc07c>18）面向对象-自索引实现继承</a></li><li class="level-3" data-v-b57cc07c><a href="/xiaoze-blog/blogs/%E5%85%B6%E4%BB%96/lua%E8%84%9A%E6%9C%AC.html#_19-面向对象-类的实例化" class="sidebar-link reco-side-_19-面向对象-类的实例化" data-v-b57cc07c>19）面向对象-类的实例化</a></li><li class="level-3" data-v-b57cc07c><a href="/xiaoze-blog/blogs/%E5%85%B6%E4%BB%96/lua%E8%84%9A%E6%9C%AC.html#_20-面向对象-多重继承" class="sidebar-link reco-side-_20-面向对象-多重继承" data-v-b57cc07c>20）面向对象-多重继承</a></li><li class="level-3" data-v-b57cc07c><a href="/xiaoze-blog/blogs/%E5%85%B6%E4%BB%96/lua%E8%84%9A%E6%9C%AC.html#_21-面向对象-重写" class="sidebar-link reco-side-_21-面向对象-重写" data-v-b57cc07c>21）面向对象-重写</a></li><li class="level-3" data-v-b57cc07c><a href="/xiaoze-blog/blogs/%E5%85%B6%E4%BB%96/lua%E8%84%9A%E6%9C%AC.html#_22-面向对象-成员私有化" class="sidebar-link reco-side-_22-面向对象-成员私有化" data-v-b57cc07c>22）面向对象-成员私有化</a></li><li class="level-3" data-v-b57cc07c><a href="/xiaoze-blog/blogs/%E5%85%B6%E4%BB%96/lua%E8%84%9A%E6%9C%AC.html#_23-协程-coroutine" class="sidebar-link reco-side-_23-协程-coroutine" data-v-b57cc07c>23）协程(coroutine)</a></li><li class="level-3" data-v-b57cc07c><a href="/xiaoze-blog/blogs/%E5%85%B6%E4%BB%96/lua%E8%84%9A%E6%9C%AC.html#_24-协程-coroutine-双循环切换" class="sidebar-link reco-side-_24-协程-coroutine-双循环切换" data-v-b57cc07c>24）协程(coroutine)-双循环切换</a></li><li class="level-3" data-v-b57cc07c><a href="/xiaoze-blog/blogs/%E5%85%B6%E4%BB%96/lua%E8%84%9A%E6%9C%AC.html#_25-协程-coroutine-生产者消费者模型" class="sidebar-link reco-side-_25-协程-coroutine-生产者消费者模型" data-v-b57cc07c>25）协程(coroutine)-生产者消费者模型</a></li><li class="level-3" data-v-b57cc07c><a href="/xiaoze-blog/blogs/%E5%85%B6%E4%BB%96/lua%E8%84%9A%E6%9C%AC.html#_26-文件操作" class="sidebar-link reco-side-_26-文件操作" data-v-b57cc07c>26）文件操作</a></li><li class="level-3" data-v-b57cc07c><a href="/xiaoze-blog/blogs/%E5%85%B6%E4%BB%96/lua%E8%84%9A%E6%9C%AC.html#_27-包-模块-管理" class="sidebar-link reco-side-_27-包-模块-管理" data-v-b57cc07c>27）包(模块)管理</a></li><li class="level-3" data-v-b57cc07c><a href="/xiaoze-blog/blogs/%E5%85%B6%E4%BB%96/lua%E8%84%9A%E6%9C%AC.html#_28-操作mysql数据库" class="sidebar-link reco-side-_28-操作mysql数据库" data-v-b57cc07c>28）操作mysql数据库</a></li><li class="level-3" data-v-b57cc07c><a href="/xiaoze-blog/blogs/%E5%85%B6%E4%BB%96/lua%E8%84%9A%E6%9C%AC.html#_29-连接数据库" class="sidebar-link reco-side-_29-连接数据库" data-v-b57cc07c>29）连接数据库</a></li><li class="level-3" data-v-b57cc07c><a href="/xiaoze-blog/blogs/%E5%85%B6%E4%BB%96/lua%E8%84%9A%E6%9C%AC.html#_30-操作redis" class="sidebar-link reco-side-_30-操作redis" data-v-b57cc07c>30）操作redis</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><canvas id="vuepress-canvas-cursor"></canvas><div></div><div class="kanbanniang" data-v-5775ee02><div class="banniang-container" style="display:;" data-v-5775ee02><div class="messageBox" style="right:68px;bottom:190px;display:none;" data-v-5775ee02>
      欢迎来到 小泽认真奋进
    </div> <div class="operation" style="right:90px;bottom:40px;display:;" data-v-5775ee02><i class="kbnfont kbn-ban-home ban-home" data-v-5775ee02></i> <i class="kbnfont kbn-ban-message message" data-v-5775ee02></i> <i class="kbnfont kbn-ban-close close" data-v-5775ee02></i> <a target="_blank" href="https://vuepress-theme-reco.recoluan.com/views/plugins/kanbanniang.html" data-v-5775ee02><i class="kbnfont kbn-ban-info info" data-v-5775ee02></i></a> <i class="kbnfont kbn-ban-theme skin" style="display:;" data-v-5775ee02></i></div> <canvas id="banniang" width="150" height="220" class="live2d" style="right:90px;bottom:-20px;opacity:0.9;" data-v-5775ee02></canvas></div> <div class="showBanNiang" style="display:none;" data-v-5775ee02>
    看板娘
  </div></div><div class="Sakura" data-v-248d85d6><canvas id="canvas_sakura" style="z-index:999;" data-v-248d85d6></canvas></div></div></div>
    <script src="/xiaoze-blog/assets/js/app.d39324c1.js" defer></script><script src="/xiaoze-blog/assets/js/11.59e3daef.js" defer></script><script src="/xiaoze-blog/assets/js/1.a4abe869.js" defer></script><script src="/xiaoze-blog/assets/js/45.3369469c.js" defer></script>
  </body>
</html>
