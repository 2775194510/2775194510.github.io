---
title: 1：开发小工具
date: 2023-7-22
sidebar: auto
categories:
  - spring
tags:
  - Java
  - springboot

author: 胡昊泽
---
## 1：获取`对象集合`中的 的某一个字段，然后将其转成字符串，并用，隔开
```java
List<YourObject> objects = ...; // 获取到对象集合
String result = objects.stream()
                       .map(YourObject::getField) // 抽取字段
                       .map(Object::toString) // 转成字符串
                       .collect(Collectors.joining(", ")); // 拼接字符串

```
## 2：获取带，的字符串，将其转成List集合
```java
List<String> acctNoList = Arrays.asList(acctNo.split(","));
```

## 3：hashMap、object和json相互转换、解析
```java
public class JsonObjectTest {
       public static void main(String[] args) {

              Map<String, Object> hashMap = new HashMap<>();
              List<User> users = new ArrayList<>();
              User user = new User();
              user.setUserId(123456);
              user.setUsername("12457836");
              users.add(user);

              hashMap.put("string", "123456");
              hashMap.put("list", users);
              hashMap.put("number", 25);    //Gson转换不了该类型

              // 1jsonObject转换
              JSONObjectTest(hashMap);
              // 2.gson转换
              GsonTest(hashMap);

       }

       private static void GsonTest(Map<String, Object> hashMap) {
              Gson gson = new Gson();

              // 1.转换成为json
              String json = gson.toJson(hashMap);

              // 2.解析json字符串
              Map map = gson.fromJson(json, Map.class);
              String string = (String) map.get("string");
              List<User> list = (List<User>) map.get("list");
              Integer number = (Integer) map.get("number");   //错误  java.lang.Double cannot be cast to java.lang.Integer
              System.out.println(string);
              System.out.println(list);
              System.out.println(number);

       }

       private static void JSONObjectTest(Map<String, Object> hashMap) {
              // 1.javabean转 json 字符串(先转换成jsonObject,再转换成json)
              JSONObject json = (JSONObject) JSONObject.toJSON(hashMap);
              String jsonString = json.toJSONString();
              System.out.println(jsonString);

              // 2.解析json字符串
              Map map = JSONObject.parseObject(jsonString, Map.class);

              //获取第一个值
              String string = (String) map.get("string");
              //获取其中的list
              List<User> map1 = (List<User>) map.get("list");
              //获取其中的数量
              Integer number = (Integer) map.get("number");
              System.out.println(string);
              System.out.println(map.get("list"));
              System.out.println(number);
       }
}
```

## 4：hashMap转JavaBean工具类
```java
public class BeanMapUtils {

    /**
     * 将对象属性转化为map结合
     */
    public static <T> Map<String, Object> beanToMap(T bean) {
        Map<String, Object> map = new HashMap<>();
        if (bean != null) {
            BeanMap beanMap = BeanMap.create(bean);
            for (Object key : beanMap.keySet()) {
                map.put(key + "", beanMap.get(key));
            }
        }
        return map;
    }

    /**
     * 将map集合中的数据转化为指定对象的同名属性中
     */
    public static <T> T mapToBean(Map<String, Object> map, Class<T> clazz) throws Exception {
        T bean = clazz.newInstance();
        BeanMap beanMap = BeanMap.create(bean);
        beanMap.putAll(map);
        return bean;
    }
}
```

## 5：前后端时间交互格式
<p style="color:red">1:接受ISO格式时间字符串</p>

前端传递的时间格式为 `2023-09-13T10:30:00.000Z`，可以使用以下注解：
```java
    @JsonFormat(pattern = "yyyy-MM-dd'T'HH:mm:ss.SSS'Z'")
    private Date modTimeEnd;
```	

<p style="color:red">2:接受不带时区的ISO格式时间字符串</p>

前端传递的时间格式为 `2023-09-13T10:30:00`，可以使用以下注解：
```java
    @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = "yyyy-MM-dd'T'HH:mm:ss")
    private Date myDate;
```

<p style="color:red">3:接受带时区的ISO格式时间字符串</p>

前端传递的时间格式为 `2023-09-13T10:30:00+08:00`，可以使用以下注解：
```java
    @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = "yyyy-MM-dd'T'HH:mm:ssXXX")
    private Date myDate;
```
<p style="color:red">4:接受时间戳</p>

前端传递的时间格式为时间戳，例如 `1631560200000`，可以使用以下注解：

```java
    @JsonFormat(pattern = "yyyy-MM-dd HH:mm:ss", timezone = "GMT+8")
    private Date myDate4;

    @JsonProperty("myDate4")
    public void setCreateDateFromTimestamp(long myDate4) {
        this.myDate4 = new Date(myDate4);
    }
```	


<p style="color:red">5:接受自定义格式时间字符串</p>

前端传递的时间格式为 `2023-02-18 11:46:27`，可以使用以下注解：
```java
    @DateTimeFormat(pattern = "yyyy-MM-dd HH:mm:ss")
    @JsonFormat(pattern = "yyyy-MM-dd HH:mm:ss", timezone = "GMT+8")
    private Date myDate;
```	

<p style="color:red">6:接受自定义格式时间字符串</p>

前端传递的时间格式为 `2023/09/13 10:30:00 +0800`，可以使用以下注解：
```java
    @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = "yyyy/MM/dd HH:mm:ss Z")
    private Date myDate;
```	


## 6：脱敏工具类
```java
package com.xiaoze.exer.utils;
import org.apache.commons.lang3.StringUtils;

/**
 * 脱敏工具类
 **/
public class DesensitizedUtils {

    /**
     * 【中文姓名】只显示第一个汉字，其他隐藏为2个星号，比如：李**
     *
     * @param fullName
     * @return
     */
    public static String chineseName(String fullName) {
        if (StringUtils.isBlank(fullName)) {
            return "";
        }
        String name = StringUtils.left(fullName, 1);
        return StringUtils.rightPad(name, StringUtils.length(fullName), "*");
    }

    /**
     * 【身份证号】显示最后四位，其他隐藏。共计18位或者15位，比如：*************1234
     *
     * @param id
     * @return
     */
    public static String idCardNum(String id) {
        if (StringUtils.isBlank(id)) {
            return "";
        }
        String num = StringUtils.right(id, 4);
        return StringUtils.leftPad(num, StringUtils.length(id), "*");
    }

    /**
     * 【固定电话 后四位，其他隐藏，比如1234
     *
     * @param num
     * @return
     */
    public static String fixedPhone(String num) {
        if (StringUtils.isBlank(num)) {
            return "";
        }
        return StringUtils.leftPad(StringUtils.right(num, 4), StringUtils.length(num), "*");
    }

    /**
     * 【手机号码】前三位，后四位，其他隐藏，比如135******10
     *
     * @param num
     * @return
     */
    public static String mobilePhone(String num) {
        if (StringUtils.isBlank(num)) {
            return "";
        }
        return StringUtils.left(num, 3).concat(StringUtils.removeStart(StringUtils.leftPad(StringUtils.right(num, 2), StringUtils.length(num), "*"), "***"));
    }

    /**
     * 【地址】只显示到地区，不显示详细地址，比如：北京市海淀区****
     *
     * @param address
     * @param sensitiveSize 敏感信息长度
     * @return
     */
    public static String address(String address, int sensitiveSize) {
        if (StringUtils.isBlank(address)) {
            return "";
        }
        int length = StringUtils.length(address);
        return StringUtils.rightPad(StringUtils.left(address, length - sensitiveSize), length, "*");
    }

    /**
     * 【电子邮箱 邮箱前缀仅显示第一个字母，前缀其他隐藏，用星号代替，@及后面的地址显示，比如：d**@126.com>
     *
     * @param email
     * @return
     */
    public static String email(String email) {
        if (StringUtils.isBlank(email)) {
            return "";
        }
        int index = StringUtils.indexOf(email, "@");
        if (index <= 1) {
            return email;
        } else {
            return StringUtils.rightPad(StringUtils.left(email, 1), index, "*").concat(StringUtils.mid(email, index, StringUtils.length(email)));
        }
    }
	 /**
     * 【银行卡号】前六位，后四位，其他用星号隐藏每位1个星号，比如：6222600**********1234>
     *
     * @param cardNum
     * @return
     */
    public static String bankCard(String cardNum) {
        if (StringUtils.isBlank(cardNum)) {
            return "";
        }
        return StringUtils.left(cardNum, 6).concat(StringUtils.removeStart(StringUtils.leftPad(StringUtils.right(cardNum, 4), StringUtils.length(cardNum), "*"), "******"));
    }

    /**
     * 【密码】密码的全部字符都用*代替，比如：******
     *
     * @param password
     * @return
     */
    public static String password(String password) {
        if (StringUtils.isBlank(password)) {
            return "";
        }
        String pwd = StringUtils.left(password, 0);
        return StringUtils.rightPad(pwd, StringUtils.length(password), "*");
    }

    /**
     * 【车牌号】前两位后一位，比如：苏M****5
     *
     * @param carNumber
     * @return
     */
    public static String carNumber(String carNumber) {
        if (StringUtils.isBlank(carNumber)) {
            return "";
        }
        return StringUtils.left(carNumber, 2).
                concat(StringUtils.removeStart(StringUtils.leftPad(StringUtils.right(carNumber, 1), StringUtils.length(carNumber), "*"), "**"));

    }
}
```

## 7：发送三方接口请求工具类
```java
package com.xiaoze.exer.utils;

import org.apache.commons.io.IOUtils;
import org.apache.http.Consts;
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.config.RequestConfig;
import org.apache.http.client.config.RequestConfig.Builder;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.conn.ConnectTimeoutException;
import org.apache.http.conn.ssl.SSLConnectionSocketFactory;
import org.apache.http.conn.ssl.SSLContextBuilder;
import org.apache.http.conn.ssl.TrustStrategy;
import org.apache.http.conn.ssl.X509HostnameVerifier;
import org.apache.http.entity.ContentType;
import org.apache.http.entity.StringEntity;
import org.apache.http.impl.client.CloseableHttpClient;
import org.apache.http.impl.client.HttpClients;
import org.apache.http.impl.conn.PoolingHttpClientConnectionManager;
import org.apache.http.message.BasicNameValuePair;

import javax.net.ssl.SSLContext;
import javax.net.ssl.SSLException;
import javax.net.ssl.SSLSession;
import javax.net.ssl.SSLSocket;
import java.io.IOException;
import java.net.SocketTimeoutException;
import java.security.GeneralSecurityException;
import java.security.cert.CertificateException;
import java.security.cert.X509Certificate;
import java.util.ArrayList;
import java.util.List;
import java.util.Map;
import java.util.Map.Entry;
import java.util.Set;

/**
 * 依赖的jar包有：commons-lang-2.6.jar、httpclient-4.3.2.jar、httpcore-4.3.1.jar、commons-io-2.4.jar
 *
 * @author zhaoyb
 */
public class HttpClientUtils {

    public static final int connTimeout = 10000;
    public static final int readTimeout = 10000;
    public static final String charset = "UTF-8";
    private static HttpClient client = null;

    static {
        PoolingHttpClientConnectionManager cm = new PoolingHttpClientConnectionManager();
        cm.setMaxTotal(128);
        cm.setDefaultMaxPerRoute(128);
        client = HttpClients.custom().setConnectionManager(cm).build();
    }

    public static String postParameters(String url, String parameterStr) throws ConnectTimeoutException, SocketTimeoutException, Exception {
        return post(url, parameterStr, "application/x-www-form-urlencoded", charset, connTimeout, readTimeout);
    }

    public static String postParameters(String url, String parameterStr, String charset, Integer connTimeout, Integer readTimeout) throws ConnectTimeoutException, SocketTimeoutException, Exception {
        return post(url, parameterStr, "application/x-www-form-urlencoded", charset, connTimeout, readTimeout);
    }

    public static String postParameters(String url, Map<String, String> params) throws ConnectTimeoutException,
            SocketTimeoutException, Exception {
        return postForm(url, params, null, connTimeout, readTimeout);
    }

    public static String postParameters(String url, Map<String, String> params, Integer connTimeout, Integer readTimeout) throws ConnectTimeoutException,
            SocketTimeoutException, Exception {
        return postForm(url, params, null, connTimeout, readTimeout);
    }

    public static String get(String url) throws Exception {
        return get(url, charset, null, null);
    }

    public static String get(String url, String charset) throws Exception {
        return get(url, charset, connTimeout, readTimeout);
    }

    /**
     * 发送一个 Post 请求, 使用指定的字符集编码.
     *
     * @param url
     * @param body        RequestBody
     * @param mimeType    例如 application/xml "application/x-www-form-urlencoded" a=1&b=2&c=3
     * @param charset     编码
     * @param connTimeout 建立链接超时时间,毫秒.
     * @param readTimeout 响应超时时间,毫秒.
     * @return ResponseBody, 使用指定的字符集编码.
     * @throws ConnectTimeoutException 建立链接超时异常
     * @throws SocketTimeoutException  响应超时
     * @throws Exception
     */
    public static String post(String url, String body, String mimeType, String charset, Integer connTimeout, Integer readTimeout)
            throws ConnectTimeoutException, SocketTimeoutException, Exception {
        HttpClient client = null;
        HttpPost post = new HttpPost(url);
        String result = "";
        try {
            if (org.apache.commons.lang3.StringUtils.isNotBlank(body)) {
                HttpEntity entity = new StringEntity(body, ContentType.create(mimeType, charset));
                post.setEntity(entity);
            }
            // 设置参数
            Builder customReqConf = RequestConfig.custom();
            if (connTimeout != null) {
                customReqConf.setConnectTimeout(connTimeout);
            }
            if (readTimeout != null) {
                customReqConf.setSocketTimeout(readTimeout);
            }
            post.setConfig(customReqConf.build());

            HttpResponse res;
            if (url.startsWith("https")) {
                // 执行 Https 请求.
                client = createSSLInsecureClient();
                res = client.execute(post);
            } else {
                // 执行 Http 请求.
                client = HttpClientUtils.client;
                res = client.execute(post);
            }
            result = IOUtils.toString(res.getEntity().getContent(), charset);
        } finally {
            post.releaseConnection();
            if (url.startsWith("https") && client != null && client instanceof CloseableHttpClient) {
                ((CloseableHttpClient) client).close();
            }
        }
        return result;
    }


    /**
     * 提交form表单
     *
     * @param url
     * @param params
     * @param connTimeout
     * @param readTimeout
     * @return
     * @throws ConnectTimeoutException
     * @throws SocketTimeoutException
     * @throws Exception
     */
    public static String postForm(String url, Map<String, String> params, Map<String, String> headers, Integer connTimeout, Integer readTimeout) throws ConnectTimeoutException,
            SocketTimeoutException, Exception {

        HttpClient client = null;
        HttpPost post = new HttpPost(url);
        try {
            if (params != null && !params.isEmpty()) {
                List<NameValuePair> formParams = new ArrayList<NameValuePair>();
                Set<Entry<String, String>> entrySet = params.entrySet();
                for (Entry<String, String> entry : entrySet) {
                    formParams.add(new BasicNameValuePair(entry.getKey(), entry.getValue()));
                }
                UrlEncodedFormEntity entity = new UrlEncodedFormEntity(formParams, Consts.UTF_8);
                post.setEntity(entity);
            }

            if (headers != null && !headers.isEmpty()) {
                for (Entry<String, String> entry : headers.entrySet()) {
                    post.addHeader(entry.getKey(), entry.getValue());
                }
            }
            // 设置参数
            Builder customReqConf = RequestConfig.custom();
            if (connTimeout != null) {
                customReqConf.setConnectTimeout(connTimeout);
            }
            if (readTimeout != null) {
                customReqConf.setSocketTimeout(readTimeout);
            }
            post.setConfig(customReqConf.build());
            HttpResponse res = null;
            if (url.startsWith("https")) {
                // 执行 Https 请求.
                client = createSSLInsecureClient();
                res = client.execute(post);
            } else {
                // 执行 Http 请求.
                client = HttpClientUtils.client;
                res = client.execute(post);
            }
            return IOUtils.toString(res.getEntity().getContent(), "UTF-8");
        } finally {
            post.releaseConnection();
            if (url.startsWith("https") && client != null
                    && client instanceof CloseableHttpClient) {
                ((CloseableHttpClient) client).close();
            }
        }
    }


    /**
     * 发送一个 GET 请求
     *
     * @param url
     * @param charset
     * @param connTimeout 建立链接超时时间,毫秒.
     * @param readTimeout 响应超时时间,毫秒.
     * @return
     * @throws ConnectTimeoutException 建立链接超时
     * @throws SocketTimeoutException  响应超时
     * @throws Exception
     */
    public static String get(String url, String charset, Integer connTimeout, Integer readTimeout)
            throws ConnectTimeoutException, SocketTimeoutException, Exception {

        HttpClient client = null;
        HttpGet get = new HttpGet(url);
        String result = "";
        try {
            // 设置参数
            Builder customReqConf = RequestConfig.custom();
            if (connTimeout != null) {
                customReqConf.setConnectTimeout(connTimeout);
            }
            if (readTimeout != null) {
                customReqConf.setSocketTimeout(readTimeout);
            }
            get.setConfig(customReqConf.build());

            HttpResponse res = null;

            if (url.startsWith("https")) {
                // 执行 Https 请求.
                client = createSSLInsecureClient();
                res = client.execute(get);
            } else {
                // 执行 Http 请求.
                client = HttpClientUtils.client;
                res = client.execute(get);
            }

            result = IOUtils.toString(res.getEntity().getContent(), charset);
        } finally {
            get.releaseConnection();
            if (url.startsWith("https") && client != null && client instanceof CloseableHttpClient) {
                ((CloseableHttpClient) client).close();
            }
        }
        return result;
    }


    /**
     * 从 response 里获取 charset
     *
     * @param ressponse
     * @return
     */
    @SuppressWarnings("unused")
    private static String getCharsetFromResponse(HttpResponse ressponse) {
        // Content-Type:text/html; charset=GBK
        if (ressponse.getEntity() != null && ressponse.getEntity().getContentType() != null && ressponse.getEntity().getContentType().getValue() != null) {
            String contentType = ressponse.getEntity().getContentType().getValue();
            if (contentType.contains("charset=")) {
                return contentType.substring(contentType.indexOf("charset=") + 8);
            }
        }
        return null;
    }


    /**
     * 创建 SSL连接
     *
     * @return
     * @throws GeneralSecurityException
     */
    private static CloseableHttpClient createSSLInsecureClient() throws GeneralSecurityException {
        try {
            SSLContext sslContext = new SSLContextBuilder().loadTrustMaterial(null, new TrustStrategy() {
                public boolean isTrusted(X509Certificate[] chain, String authType) throws CertificateException {
                    return true;
                }
            }).build();

            SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(sslContext, new X509HostnameVerifier() {

                @Override
                public boolean verify(String arg0, SSLSession arg1) {
                    return true;
                }

                @Override
                public void verify(String host, SSLSocket ssl)
                        throws IOException {
                }

                @Override
                public void verify(String host, X509Certificate cert)
                        throws SSLException {
                }

                @Override
                public void verify(String host, String[] cns,
                                   String[] subjectAlts) throws SSLException {
                }

            });

            return HttpClients.custom().setSSLSocketFactory(sslsf).build();

        } catch (GeneralSecurityException e) {
            throw e;
        }
    }

    public static void main(String[] args) {
        try {
            String str = post("https://localhost:443/ssl/test.shtml", "name=12&page=34", "application/x-www-form-urlencoded", "UTF-8", 10000, 10000);
            //String str= get("https://localhost:443/ssl/test.shtml?name=12&page=34","GBK");
            /*Map<String,String> map = new HashMap<String,String>();
            map.put("name", "111");
            map.put("page", "222");
            String str= postForm("https://localhost:443/ssl/test.shtml",map,null, 10000, 10000);*/
            System.out.println(str);
        } catch (ConnectTimeoutException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (SocketTimeoutException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

}
```

## 8：日期工具类
```java
package com.xiaoze.exer.utils;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.time.LocalDateTime;
import java.time.Period;
import java.time.ZoneId;
import java.util.Calendar;
import java.util.Date;

/**
* 方法描述: 日期工具类
* @Author 胡昊泽 
* @Date 2023/8/9 13:06
  * @param
* @return 
*/ 
public class DateUtil {
    private DateUtil(){}
    private static final Logger logger = LoggerFactory.getLogger(DateUtil.class);
    /**
     * 英文简写（默认）如：2010-12-01
     */
    public static final String FORMAT_SHORT = "yyyy-MM-dd";

    /**
     * 英文全称 如：2010-12-01 23:15:06
     */
    public static final String FORMAT_LONG = "yyyy-MM-dd HH:mm:ss";

    /**
     * 精确到毫秒的完整时间 如：yyyy-MM-dd HH:mm:ss.S
     */
    public static final String FORMAT_FULL = "yyyy-MM-dd HH:mm:ss.S";

    /**
     * 中文简写 如：2010年12月01日
     */
    public static final String FORMAT_SHORT_CN = "yyyy年MM月dd";

    /**
     * 中文全称 如：2010年12月01日 23时15分06秒
     */
    public static final String FORMAT_LONG_CN = "yyyy年MM月dd日  HH时mm分ss秒";

    /**
     * 精确到毫秒的完整中文时间
     */
    public static final String FORMAT_FULL_CN = "yyyy年MM月dd日  HH时mm分ss秒SSS毫秒";

    /**
     * 获得默认的 date pattern
     */
    public static String getDatePattern() {
        return FORMAT_LONG;
    }

    /**
     * 获得默认的 date pattern
     */
    public static String getShortDatePattern() {
        return FORMAT_SHORT;
    }

    /**
     * 根据预设格式返回当前日期
     *
     * @return
     */
    public static String getNow() {
        return format(new Date());
    }

    public static Date getDate() {
        return new Date();
    }

    /**
     * 根据用户格式返回当前日期
     *
     * @param format
     * @return
     */
    public static String getNow(String format) {
        return format(new Date(), format);
    }

    /**
     * 使用预设格式格式化日期
     *
     * @param date
     * @return
     */
    public static String format(Date date) {
        return format(date, getDatePattern());
    }

    /**
     * 使用预设格式短格式化日期
     *
     * @param date
     * @return
     */
    public static String shortformat(Date date) {
        return format(date, getShortDatePattern());
    }

    /**
     * 使用用户格式格式化日期
     *
     * @param date    日期
     * @param pattern 日期格式
     * @return
     */
    public static String format(Date date, String pattern) {
        String returnValue = "";
        if (date != null) {
            SimpleDateFormat df = new SimpleDateFormat(pattern);
            returnValue = df.format(date);
        }
        return (returnValue);
    }

    /**
     * 使用预设格式提取字符串日期
     *
     * @param strDate 日期字符串
     * @return
     */
    public static Date parse(String strDate) {
        return parse(strDate, getDatePattern());
    }

    /**
     * 使用用户格式提取字符串日期
     *
     * @param strDate 日期字符串
     * @param pattern 日期格式
     * @return
     */
    public static Date parse(String strDate, String pattern) {
        SimpleDateFormat df = new SimpleDateFormat(pattern);
        try {
            return df.parse(strDate);
        } catch (ParseException e) {
            e.printStackTrace();
            return null;
        }
    }

    /**
     * 在日期上增加数个整月
     *
     * @param date 日期
     * @param n    要增加的月数
     * @return
     */
    public static Date addMonth(Date date, int n) {
        Calendar cal = Calendar.getInstance();
        cal.setTime(date);
        cal.add(Calendar.MONTH, n);
        return cal.getTime();
    }

    /**
     * 在日期上增加天数
     *
     * @param date 日期
     * @param n    要增加的天数
     * @return
     */
    public static Date addDay(Date date, int n) {
        Calendar cal = Calendar.getInstance();
        cal.setTime(date);
        cal.add(Calendar.DATE, n);
        return cal.getTime();
    }

    /**
     * 获取时间戳
     */
    public static String getTimeString() {
        SimpleDateFormat df = new SimpleDateFormat(FORMAT_FULL);
        Calendar calendar = Calendar.getInstance();
        return df.format(calendar.getTime());
    }

    /**
     * 获取日期年份
     *
     * @param date 日期
     * @return
     */
    public static String getYear(Date date) {
        return format(date).substring(0, 4);
    }

    /**
     * 按默认格式的字符串距离今天的天数
     *
     * @param date 日期字符串
     * @return
     */
    public static int countDays(String date) {
        Long t = Calendar.getInstance().getTime().getTime();
        Calendar c = Calendar.getInstance();
        c.setTime(parse(date));
        Long t1 = c.getTime().getTime();
        return (int) (t / 1000 - t1 / 1000) / 3600 / 24;
    }

    public static int countDays(Date start, Date end) {
        long t1 = start.getTime();
        long t2 = end.getTime();
        return (int) (t2 / 1000 - t1 / 1000) / 3600 / 24;
    }

    /**
     * 按用户格式字符串距离今天的天数
     *
     * @param date   日期字符串
     * @param format 日期格式
     * @return
     */
    public static int countDays(String date, String format) {
        Long t = Calendar.getInstance().getTime().getTime();
        Calendar c = Calendar.getInstance();
        c.setTime(parse(date, format));
        Long t1 = c.getTime().getTime();
        return (int) (t / 1000 - t1 / 1000) / 3600 / 24;
    }

    public static int countDaysWithStartAndEnd(String dateStart, String dateEnd, String format) {
        Calendar cStart = Calendar.getInstance();
        cStart.setTime(parse(dateStart, format));
        Long tStart = cStart.getTime().getTime();

        Calendar cEnd = Calendar.getInstance();
        cEnd.setTime(parse(dateEnd, format));
        Long tEnd = cEnd.getTime().getTime();

        return (int) (tEnd / 1000 - tStart / 1000) / 3600 / 24;
    }

    public static int countMinutes(String dateFrom, String dateTo, String format) {
        Date date1 = parse(dateFrom, format);
        Date date2 = parse(dateTo, format);
        if(date1!=null && date2!=null) {
            if (date1.getTime() > date2.getTime()) {
                date2 = addDay(date2, 1);
            }
            Long t1 = date1.getTime();
            Long t2 = date2.getTime();
            return (int) (t2 / 1000 - t1 / 1000) / 60;
        }else{
            return 0;
        }
    }

    /**
     * 获得该月第一天
     *
     * @param year
     * @param month
     * @return
     */
    public static String getFirstDayOfMonth(int year, int month) {
        Calendar cal = Calendar.getInstance();
        // 设置年份
        cal.set(Calendar.YEAR, year);
        // 设置月份
        cal.set(Calendar.MONTH, month - 1);
        // 获取某月最小天数
        int firstDay = cal.getActualMinimum(Calendar.DAY_OF_MONTH);
        // 设置日历中月份的最小天数
        cal.set(Calendar.DAY_OF_MONTH, firstDay);
        // 格式化日期
        SimpleDateFormat sdf = new SimpleDateFormat(FORMAT_SHORT);
        return sdf.format(cal.getTime());
    }

    /**
     * 获得该月最后一天
     *
     * @param year
     * @param month
     * @return
     */
    public static String getLastDayOfMonth(int year, int month) {
        Calendar cal = Calendar.getInstance();
        // 设置年份
        cal.set(Calendar.YEAR, year);
        // 设置月份
        cal.set(Calendar.MONTH, month - 1);
        // 获取某月最大天数
        int lastDay = cal.getActualMaximum(Calendar.DAY_OF_MONTH);
        // 设置日历中月份的最大天数
        cal.set(Calendar.DAY_OF_MONTH, lastDay);
        // 格式化日期
        SimpleDateFormat sdf = new SimpleDateFormat(FORMAT_SHORT);
        return sdf.format(cal.getTime());
    }

    /**
     * 计算两个日期之间相差的天数
     *
     * @param smdate 较小的时间
     * @param bdate  较大的时间
     * @return 相差天数
     * @throws ParseException
     */
    public static int daysBetween(Date smdate, Date bdate) throws ParseException {
        SimpleDateFormat sdf = new SimpleDateFormat(FORMAT_SHORT);
        smdate = sdf.parse(sdf.format(smdate));
        bdate = sdf.parse(sdf.format(bdate));
        Calendar cal = Calendar.getInstance();
        cal.setTime(smdate);
        long time1 = cal.getTimeInMillis();
        cal.setTime(bdate);
        long time2 = cal.getTimeInMillis();
        long betweenDays = (time2 - time1) / (1000 * 3600 * 24);

        return Integer.parseInt(String.valueOf(betweenDays));
    }

    /**
     * 字符串的日期格式的计算
     */
    public static int daysBetween(String smdate, String bdate) throws ParseException {
        SimpleDateFormat sdf = new SimpleDateFormat(FORMAT_SHORT);
        Calendar cal = Calendar.getInstance();
        cal.setTime(sdf.parse(smdate));
        long time1 = cal.getTimeInMillis();
        cal.setTime(sdf.parse(bdate));
        long time2 = cal.getTimeInMillis();
        long betweenDays = (time2 - time1) / (1000 * 3600 * 24);

        return Integer.parseInt(String.valueOf(betweenDays));
    }

    /**
     * 根据 年、月 获取对应的月份 的 天数
     */
    public static int getDaysByYearMonth(int year, int month) {

        Calendar a = Calendar.getInstance();
        a.set(Calendar.YEAR, year);
        a.set(Calendar.MONTH, month - 1);
        a.set(Calendar.DATE, 1);
        a.roll(Calendar.DATE, -1);
        return a.get(Calendar.DATE);
    }

    /**
     * 获取当前日期 yy-MM-dd
     *
     * @return 2019-08-27
     */
    public static String getDateByString(Date date) {
        SimpleDateFormat sdf = new SimpleDateFormat("yyyyMMdd");
        return sdf.format(date);
    }

    /**
     * 以second为主进行判断
     * 以first为开始时间，second为结束时间
     * 判断两个时间是否在通过一个周内。
     *
     * @param first
     * @param second
     */
    public static Boolean checkWeekBetween(LocalDateTime first, LocalDateTime second) {
       //两个时间差不超过7天,
        Period period = Period.between(first.toLocalDate(), second.toLocalDate());
        int years = period.getYears();
        logger.info("years:{}", years);
        if (years > 0) {
            return false;
        }
        int months = period.getMonths();
        logger.info("months:{}", months);
        if (months > 0) {
            return false;
        }
        int days = period.getDays();
        logger.info("days:{}", days);
        if (days == 0) {
           //表明是同一天
            return true;
        }
        if (days > 7 || days < -7) {
           //两个时间差 超出了7天
            return false;
        }
        int firstDayOfWeek = first.getDayOfWeek().getValue();
        int secondDayOfWeek = second.getDayOfWeek().getValue();
        if (secondDayOfWeek == 1) {
            if (oneDay(firstDayOfWeek, secondDayOfWeek, days)) {
                return true;
            } else {
                return false;
            }
        }
        if (secondDayOfWeek == 7) {
            if (sevenDay(firstDayOfWeek, secondDayOfWeek, days)) {
                return true;
            } else {
                return false;
            }
        }
        if (otherDay(firstDayOfWeek, secondDayOfWeek, days)) {
            return true;
        } else {
            return false;
        }
    }

    /**
     * secondDayOfWeek 是所在星期的第一天
     * 星期的第一天 数据处理
     *
     * @return
     */
    private static boolean oneDay(int firstDayOfWeek, int secondDayOfWeek, int days) {
        if (days > 0) {
           //表明 first 比second 小 不在同一周
            return false;
        } else {
           //表明 first 比second 大
            if (secondDayOfWeek - days == firstDayOfWeek) {
                return true;
            }
        }
        return false;
    }

    /**
     * 星期的第7天的时候处理数据
     *
     * @return
     */
    private static boolean sevenDay(int firstDayOfWeek, int secondDayOfWeek, int days) {
        //second 是周日
        if (firstDayOfWeek + days == secondDayOfWeek) {
            return true;
        }
        return false;
    }

    /**
     * 其他天的数据处理
     *
     * @return
     */
    private static boolean otherDay(int firstDayOfWeek, int secondDayOfWeek, int days) {
        if (days < 0) {
            //表明 first 比 second 大
            if ((secondDayOfWeek - days) == firstDayOfWeek) {
               //两者是 一周内
                return true;
            }
        } else {
            //表明 first 比 second 小
            if (firstDayOfWeek + days == secondDayOfWeek) {
                //两者是 一周内
                return true;
            }
        }
        return false;
    }

    public static LocalDateTime dateTo(Date date) {
        return date.toInstant().atZone(ZoneId.systemDefault()).toLocalDateTime();
    }

    public static void main(String[] args) {
        System.out.println(getDateByString(new Date()));
    }
}


```

```java
package com.xiaoze.exer.utils;

import com.xiaoze.exer.exception.BusinessException;

import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.*;

/**
 * @author 小泽
 * @create 2023-11-06  11:04
 * 记得每天敲代码哦
 */
public class DateUtils {
    /**
     * Formats a Date into a date/time string.
     *
     * @param date
     * @param pattern 格式 yyyyMMddHHmmss / yyMMdd /...
     * @return
     */
    public static String format(Date date, String pattern) {
        SimpleDateFormat sdf = new SimpleDateFormat(pattern);
        return sdf.format(date);
    }

    /**
     * Parses text from the beginning of the given string to produce a date.
     *
     * @param date    日期字符串
     * @param pattern 格式 yyyyMMddHHmmss / yyMMdd /...
     * @return
     * @throws ParseException
     */
    public static Date parse(String date, String pattern) {
        SimpleDateFormat sdf = new SimpleDateFormat(pattern);
        try {
            Date d = sdf.parse(date);
            return d;
        } catch (ParseException e) {
            throw new RuntimeException("日期转换错误", e);
        }

    }

    /**
     * 判断当前日期是否是当月第一天
     */
    public static boolean judgeFirstDayOfMonth() {
        Calendar c = Calendar.getInstance();

        //c.setTime(date);
        int today = c.get(c.DAY_OF_MONTH);

        if (today == 1) {
            return true;
        } else {
            return false;
        }
    }

    /**
     * 前者是否包含后者某个元素
     *
     * @param oneList   第一个集合
     * @param otherList 第二个集合
     * @return 是否包含
     */
    public static boolean isContainsOne(ArrayList<String> oneList, ArrayList<String> otherList) {
        for (String one : otherList) {
            boolean contains = oneList.contains(one);
            if (contains) {
                return true;
            }
        }
        return false;
    }

    /**
     * 判断当前日期是否是当年第一天
     */
    public static boolean judgeFirstDayOfYear() {
        Calendar c = Calendar.getInstance();
        int today = c.get(c.DAY_OF_YEAR);
        int month = c.get(c.MONTH);
        if (today == 1 && month + 1 == 1) {
            return true;
        } else {
            return false;
        }
    }

    /**
     * 计算两个日期间相差的天数
     *
     * @param date
     * @param compareDate
     * @return
     * @throws ParseException
     */
    public static long compareTo(Date date, Date compareDate) {
        // 去掉时分秒
        date = parse(format(date, "yyMMdd"), "yyMMdd");
        compareDate = parse(format(compareDate, "yyMMdd"), "yyMMdd");

        long a = (date.getTime() - compareDate.getTime()) / (1000 * 60 * 60 * 24);
        return a;
    }

    /**
     * 获取时间+N月后的时间
     *
     * @return Date
     * @author luyang
     */
    public static Date getTimeByMonth(Date date, int month) {
        Calendar calendar = Calendar.getInstance();
        calendar.setTime(date);
        calendar.set(Calendar.MONTH, calendar.get(Calendar.MONTH) + month);
        Date outTime = calendar.getTime();
        return outTime;
    }

    /**
     * 获取当前日期
     *
     * @return
     */
    public static Date getCurrentDate() {
        SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
        String time = sdf.format(new Date());
        Date eftDat = null;
        try {
            eftDat = sdf.parse(time);
        } catch (ParseException e) {
            e.printStackTrace();
        }
        return eftDat;
    }

    /**
     * 时间格式转化
     *
     * @throws ParseException
     */
    public static Date getFormatDate(Date date, String format) {
        Date newDate = null;
        if (date != null) {
            SimpleDateFormat sdf = new SimpleDateFormat(format);
            try {
                newDate = sdf.parse(sdf.format(date));
            } catch (ParseException e) {
                throw new BusinessException("BBPF0025", "日期转换");
            }
        }
        return newDate;

    }

    /**
     * 获得本周的第一天，周一
     *
     * @param date
     * @return
     */
    public static Date getCurrentWeekDayStartTime(Date date) {

        Calendar c = Calendar.getInstance();
        c.setTime(date);
        Date now = null;
        try {
            int weekday = c.get(Calendar.DAY_OF_WEEK) - 2;
            c.add(Calendar.DATE, -weekday);
            now = DateUtils.getFormatDate(c.getTime(), "yyyy-MM-dd");
        } catch (Exception e) {
            e.printStackTrace();
        }
        // System.out.println(DateUtils.formatDateToStr(now, "yyyy-MM-dd"));
        return c.getTime();
    }

    /**
     * 获得本周的最后一天，周日
     *
     * @param date
     * @return
     */
    public static Date getCurrentWeekDayEndTime(Date date) {
        Calendar c = Calendar.getInstance();
        c.setTime(date);
        Date now = null;
        try {
            int weekday = c.get(Calendar.DAY_OF_WEEK);
            c.add(Calendar.DATE, 8 - weekday);
            now = DateUtils.getFormatDate(c.getTime(), "yyyy-MM-dd");
        } catch (Exception e) {
            e.printStackTrace();
        }
        // System.out.println(DateUtils.formatDateToStr(now, "yyyy-MM-dd"));
        return c.getTime();
    }


    /**
     * 获得本月的开始时间,月初
     *
     * @param date
     * @return
     */
    public static Date getCurrentMonthStartTime(Date date) {
        Calendar c = Calendar.getInstance();
        c.setTime(date);
        Date now = null;
        try {
            c.set(Calendar.DATE, 1);
            now = DateUtils.getFormatDate(c.getTime(), "yyyy-MM-dd");
        } catch (Exception e) {
            e.printStackTrace();
        }
        // System.out.println(DateUtils.formatDateToStr(now, "yyyy-MM-dd"));
        return now;
    }


    /**
     * 当前月的结束时间,月末
     *
     * @param date
     * @return
     */
    public static Date getCurrentMonthEndTime(Date date) {
        Calendar c = Calendar.getInstance();
        c.setTime(date);
        Date now = null;
        try {
            c.set(Calendar.DATE, 1);
            c.add(Calendar.MONTH, 1);
            c.add(Calendar.DATE, -1);
            now = DateUtils.getFormatDate(c.getTime(), "yyyy-MM-dd");
        } catch (Exception e) {
            e.printStackTrace();
        }
        // System.out.println(DateUtils.formatDateToStr(now, "yyyy-MM-dd"));
        return now;
    }


    /**
     * 当前季度的开始时间,季初
     *
     * @param date
     * @return
     */
    public static Date getCurrentQuarterStartTime(Date date) {
        Calendar c = Calendar.getInstance();
        c.setTime(date);
        Date now = null;
        int currentMonth = c.get(Calendar.MONTH) + 1;

        try {
            if (currentMonth >= 1 && currentMonth <= 3)
                c.set(Calendar.MONTH, 0);
            else if (currentMonth >= 4 && currentMonth <= 6)
                c.set(Calendar.MONTH, 3);
            else if (currentMonth >= 7 && currentMonth <= 9)
                c.set(Calendar.MONTH, 6);
            else if (currentMonth >= 10 && currentMonth <= 12)
                c.set(Calendar.MONTH, 9);
            c.set(Calendar.DATE, 1);
            now = DateUtils.getFormatDate(c.getTime(), "yyyy-MM-dd");
        } catch (Exception e) {
            e.printStackTrace();
        }
        // System.out.println(DateUtils.formatDateToStr(now, "yyyy-MM-dd"));
        return now;
    }

    /**
     * 当前季度的开始时间,季末
     *
     * @param date
     * @return
     */
    public static Date getCurrentQuarterEndTime(Date date) {
        Calendar c = Calendar.getInstance();
        c.setTime(date);
        Date now = null;
        int currentMonth = c.get(Calendar.MONTH) + 1;

        try {
            if (currentMonth >= 1 && currentMonth <= 3) {
                c.set(Calendar.MONTH, 2);
                c.set(Calendar.DATE, 31);
            } else if (currentMonth >= 4 && currentMonth <= 6) {
                c.set(Calendar.MONTH, 5);
                c.set(Calendar.DATE, 30);
            } else if (currentMonth >= 7 && currentMonth <= 9) {
                c.set(Calendar.MONTH, 8);
                c.set(Calendar.DATE, 30);
            } else if (currentMonth >= 10 && currentMonth <= 12) {
                c.set(Calendar.MONTH, 11);
                c.set(Calendar.DATE, 31);
            }
            now = DateUtils.getFormatDate(c.getTime(), "yyyy-MM-dd");
        } catch (Exception e) {
            e.printStackTrace();
        }
        // System.out.println(DateUtils.formatDateToStr(now, "yyyy-MM-dd"));
        return now;
    }


    /**
     * 当前半年的开始时间,半年初
     *
     * @param date
     * @return
     */
    public static Date getCurrentHalfStartTime(Date date) {
        Calendar c = Calendar.getInstance();
        c.setTime(date);
        Date now = null;
        int currentMonth = c.get(Calendar.MONTH) + 1;

        try {
            if (currentMonth >= 1 && currentMonth <= 6)
                c.set(Calendar.MONTH, 0);
            else if (currentMonth >= 7 && currentMonth <= 12)
                c.set(Calendar.MONTH, 6);
            c.set(Calendar.DATE, 1);
            now = DateUtils.getFormatDate(c.getTime(), "yyyy-MM-dd");
        } catch (Exception e) {
            e.printStackTrace();
        }
        // System.out.println(DateUtils.formatDateToStr(now, "yyyy-MM-dd"));
        return now;
    }


    /**
     * 当前半年的开始时间,半年末
     *
     * @param date
     * @return
     */
    public static Date getCurrentHalfEndTime(Date date) {
        Calendar c = Calendar.getInstance();
        c.setTime(date);
        Date now = null;
        int currentMonth = c.get(Calendar.MONTH) + 1;

        try {
            if (currentMonth >= 1 && currentMonth <= 6) {
                c.set(Calendar.MONTH, 5);
                c.set(Calendar.DATE, 30);
            } else if (currentMonth >= 7 && currentMonth <= 12) {
                c.set(Calendar.MONTH, 11);
                c.set(Calendar.DATE, 31);
            }
            now = DateUtils.getFormatDate(c.getTime(), "yyyy-MM-dd");
        } catch (Exception e) {
            e.printStackTrace();
        }
        // System.out.println(DateUtils.formatDateToStr(now, "yyyy-MM-dd"));
        return now;
    }

    /**
     * 当前年的开始时间,年初
     *
     * @param date
     * @return
     */
    public static Date getCurrentYearStartTime(Date date) {
        Calendar c = Calendar.getInstance();
        c.setTime(date);
        Date now = null;
        try {
            c.set(Calendar.MONTH, 0);
            c.set(Calendar.DATE, 1);
            now = DateUtils.getFormatDate(c.getTime(), "yyyy-MM-dd");
        } catch (Exception e) {
            e.printStackTrace();
        }
        // System.out.println(DateUtils.formatDateToStr(now, "yyyy-MM-dd"));
        return now;
    }


    /**
     * 当前年的开始时间,年末
     *
     * @param date
     * @return
     */
    public static Date getCurrentYearEndTime(Date date) {
        Calendar c = Calendar.getInstance();
        c.setTime(date);
        Date now = null;
        try {
            c.set(Calendar.MONTH, 11);
            c.set(Calendar.DATE, 31);
            now = DateUtils.getFormatDate(c.getTime(), "yyyy-MM-dd");
        } catch (Exception e) {
            e.printStackTrace();
        }
        // System.out.println(DateUtils.formatDateToStr(now, "yyyy-MM-dd"));
        return now;
    }

    public static Date add(Date date, int calendorField, int amount) {
        Calendar cal = Calendar.getInstance();

        cal.setTime(date);

        cal.add(calendorField, amount);

        return cal.getTime();
    }

    /**
     * 增加天
     *
     * @param date
     * @param amount
     * @return
     */
    public static Date addDays(Date date, int amount) {
        return add(date, 5, amount);
    }

    /**
     * 格式化日期成指定格式字符串
     *
     * @param date
     * @param strFormat
     * @return String
     */
    public static String formatDateToStr(Date date, String strFormat) {
        String dateFormat = null;
        if (date != null) {
            SimpleDateFormat sdf = new SimpleDateFormat(strFormat);
            dateFormat = sdf.format(date);
        }
        return dateFormat;
    }

    public static String getKey(Map<String, String> map, String value) {
        String key = null;
        for (String getKey : map.keySet()) {
            if (map.get(getKey).equals(value)) {
                key = getKey;
            }
        }
        return key;
    }

    /**
     * 把日期字符串转换为Date、字符串必须为yyyy-MM-dd、此方法不抛异常、
     * 在转换之前用dateFormatValidation()方法验证通使用、以免异常被忽略.
     *
     * @param dateStr
     * @return
     */
    public static Date dateFormat(String dateStr) {
        Date date = null;
        try {
            SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
            date = dateFormat.parse(dateStr);
        } catch (Exception e) {
            e.printStackTrace();
        }
        return date;
    }

    /**
     * 根据每月的最小日期，获取最新的月初日期,以便后续计算月累计值
     *
     * @param list
     * @return
     */
    public static Map<String, String> getNewMonthDate(List<Date> list) {
        Map<String, String> monMap = new HashMap<String, String>();
        if (list != null && list.size() > 0) {
            Collections.sort(list);
            for (Date date : list) {
                Date monthStart = DateUtils.getCurrentMonthStartTime(date);
                Date monthEnd = DateUtils.getCurrentMonthEndTime(date);
                if (date.compareTo(monthStart) > 0 && date.compareTo(monthEnd) < 0) {// 当月累计
                    if (null != DateUtils.getKey(monMap, DateUtils.formatDateToStr(monthStart, "yyyyMMdd"))) {
                        monMap.put(DateUtils.formatDateToStr(date, "yyyyMMdd"),
                                DateUtils.formatDateToStr(date, "yyyyMMdd"));
                    } else {
                        monMap.put(DateUtils.formatDateToStr(date, "yyyyMMdd"),
                                DateUtils.formatDateToStr(monthStart, "yyyyMMdd"));
                    }
                } else {
                    monMap.put(DateUtils.formatDateToStr(date, "yyyyMMdd"),
                            DateUtils.formatDateToStr(date, "yyyyMMdd"));
                }
            }
        }

        return monMap;
    }

    /**
     * 根据每季的最小日期，获取最新的季初日期,以便后续计算季累计值
     *
     * @param list
     * @return
     */
    public static Map<String, String> getNewQuarterDate(List<Date> list) {
        Map<String, String> quaMap = new HashMap<String, String>();
        if (list != null && list.size() > 0) {
            Collections.sort(list);
            for (Date date : list) {
                Date quarterStart = DateUtils.getCurrentQuarterStartTime(date);
                Date quarterEnd = DateUtils.getCurrentQuarterEndTime(date);
                if (date.compareTo(quarterStart) > 0 && date.compareTo(quarterEnd) < 0) {// 当月累计
                    if (null != DateUtils.getKey(quaMap,
                            DateUtils.formatDateToStr(quarterStart, "yyyyMMdd"))) {
                        quaMap.put(DateUtils.formatDateToStr(date, "yyyyMMdd"),
                                DateUtils.formatDateToStr(date, "yyyyMMdd"));
                    } else {
                        quaMap.put(DateUtils.formatDateToStr(date, "yyyyMMdd"),
                                DateUtils.formatDateToStr(quarterStart, "yyyyMMdd"));
                    }
                } else {
                    quaMap.put(DateUtils.formatDateToStr(date, "yyyyMMdd"),
                            DateUtils.formatDateToStr(date, "yyyyMMdd"));
                }
            }
        }

        return quaMap;
    }

    /**
     * 根据每半年的最小日期，获取最新的半年初日期,以便后续计算半年累计值
     *
     * @param list
     * @return
     */
    public static Map<String, String> getNewHalfDate(List<Date> list) {
        Map<String, String> halfMap = new HashMap<String, String>();
        if (list != null && list.size() > 0) {
            Collections.sort(list);
            for (Date date : list) {
                Date halfStart = DateUtils.getCurrentHalfStartTime(date);
                Date halfEnd = DateUtils.getCurrentHalfEndTime(date);
                if (date.compareTo(halfStart) > 0 && date.compareTo(halfEnd) < 0) {// 当月累计
                    if (null != DateUtils.getKey(halfMap, DateUtils.formatDateToStr(halfStart, "yyyyMMdd"))) {
                        halfMap.put(DateUtils.formatDateToStr(date, "yyyyMMdd"),
                                DateUtils.formatDateToStr(date, "yyyyMMdd"));
                    } else {
                        halfMap.put(DateUtils.formatDateToStr(date, "yyyyMMdd"),
                                DateUtils.formatDateToStr(halfStart, "yyyyMMdd"));
                    }
                } else {
                    halfMap.put(DateUtils.formatDateToStr(date, "yyyyMMdd"),
                            DateUtils.formatDateToStr(date, "yyyyMMdd"));
                }
            }
        }

        return halfMap;
    }


    /**
     * 根据每年的最小日期，获取最新的年初日期,以便后续计算年累计值
     *
     * @param list
     * @return
     */
    public static Map<String, String> getNewYearDate(List<Date> list) {
        Map<String, String> yearMap = new HashMap<String, String>();
        if (list != null && list.size() > 0) {
            Collections.sort(list);
            for (Date date : list) {
                Date yearStart = DateUtils.getCurrentYearStartTime(date);
                Date yearEnd = DateUtils.getCurrentYearEndTime(date);
                if (date.compareTo(yearStart) > 0 && date.compareTo(yearEnd) < 0) {// 当月累计
                    if (null != DateUtils.getKey(yearMap, DateUtils.formatDateToStr(yearStart, "yyyyMMdd"))) {
                        yearMap.put(DateUtils.formatDateToStr(date, "yyyyMMdd"),
                                DateUtils.formatDateToStr(date, "yyyyMMdd"));
                    } else {
                        yearMap.put(DateUtils.formatDateToStr(date, "yyyyMMdd"),
                                DateUtils.formatDateToStr(yearStart, "yyyyMMdd"));
                    }
                } else {
                    yearMap.put(DateUtils.formatDateToStr(date, "yyyyMMdd"),
                            DateUtils.formatDateToStr(date, "yyyyMMdd"));
                }
            }
        }

        return yearMap;
    }

    /**
     * 判断当前时间是否在[startTime，endTime]区间
     *
     * @param nowTime
     * @param startTime
     * @param endTime
     * @return 在时间段内返回true，不在返回false
     */
    public static boolean isEffectiveDate(Date nowTime, Date startTime, Date endTime) {
        if (nowTime.getTime() == startTime.getTime() || nowTime.getTime() == endTime.getTime()) {
            return true;
        }
        Calendar date = Calendar.getInstance();
        date.setTime(nowTime);

        Calendar begin = Calendar.getInstance();
        begin.setTime(startTime);

        Calendar end = Calendar.getInstance();
        end.setTime(endTime);

        if (startTime.getTime() > endTime.getTime()) {

            //增加一天
            end.add(Calendar.DATE, 1);
        }

        return date.after(begin) && date.before(end);
    }

    /**
     * 获取时间间隔
     *
     * @param startTime
     * @return
     */
    public static long getTimeBySecond(Date startTime) {
        Date endTime = new Date();

        // 计算时间差（java.util.Date）
        long timeDifferenceInMillis = endTime.getTime() - startTime.getTime();
        long timeDifferenceInSeconds = timeDifferenceInMillis / 1000;

        return timeDifferenceInSeconds;
    }

    /**
     * 判断两个日期时间差是否超过三个月
     *
     * @return
     */
    public static boolean isDateDifferenceOverThreeMonths(Date startDate, Date endDate) {
        long timeDifferenceInDays = calculateTimeDifferenceInDays(startDate, endDate);
        return timeDifferenceInDays > 90 * 3;
    }

    private static long calculateTimeDifferenceInDays(Date startDate, Date endDate) {
        return (endDate.getTime() - startDate.getTime()) / (24 * 60 * 60 * 1000);
    }

    public static void main(String[] args) {
        List<Date> list = new ArrayList<Date>();
        list.add(DateUtils.dateFormat("2018-03-03"));
        list.add(DateUtils.dateFormat("2018-03-02"));
        list.add(DateUtils.dateFormat("2018-04-01"));
        list.add(DateUtils.dateFormat("2018-06-02"));
        list.add(DateUtils.dateFormat("2018-08-02"));
        System.out.println("monMap:" + DateUtils.getNewMonthDate(list));
        System.out.println("quaMap:" + DateUtils.getNewQuarterDate(list));
        System.out.println("halfMap:" + DateUtils.getNewHalfDate(list));
        System.out.println("yearMap:" + DateUtils.getNewYearDate(list));

        Date date = DateUtil.parse("20230301", "yyyyMMdd");
        //System.out.println(judgeFirstDayOfMonth(date));
    }
}
```

## 9：获取电脑IP
```java
package com.xiaoze.steampy;

import java.net.Inet4Address;
import java.net.InetAddress;
import java.net.UnknownHostException;

/**
 * @author 小泽
 * @create 2022-10-05  22:09
 * 记得每天敲代码哦
 */
public class IP {
       /**
        * 获取本地电脑ip地址
        * @return
        */
       public static String getLocalIpAddress(){
              InetAddress ip;      //用于获取IP(因为是静态的所以不需要使用new来实例化
              String IP = null;    //用于返回IP
              try {
                     ip = Inet4Address.getLocalHost();    //获取IP
                     IP = ip.getHostAddress();        	//以字符串形式存储IP
              } catch (UnknownHostException e) {
                     e.printStackTrace();
              }
              return IP;
       }

       public static void main(String[] args) {
              System.out.println(getLocalIpAddress());
       }
}
```