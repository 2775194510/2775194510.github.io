{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{1507:function(t,s,a){\"use strict\";a.r(s);var n=a(1),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":t.$parent.slotKey}},[s(\"h2\",{attrs:{id:\"_1-sleuth要解决的问题\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1-sleuth要解决的问题\"}},[t._v(\"#\")]),t._v(\" 1：sleuth要解决的问题\")]),t._v(\" \"),s(\"p\",[t._v(\"在微服务框架中，一个由客户端发起的请求在 \"),s(\"strong\",[t._v(\"后端系统\")]),t._v(\" 中会经过 \"),s(\"strong\",[t._v(\"多个不同的的服务节点调用来协同产生最后的请求结果\")]),t._v(\"，每一个前段请求都会形成一条复杂的 \"),s(\"code\",[t._v(\"分布式服务调用链路\")]),t._v(\" ，链路中的任何一环出现高延时或错误都会引起整个请求最后的失败。\")]),t._v(\" \"),s(\"blockquote\",[s(\"p\",[t._v(\"而来sleuth就是用于追踪每个请求的整体链路\")])]),t._v(\" \"),s(\"p\",[s(\"img\",{attrs:{src:a(849),alt:\"Alt text\"}})]),t._v(\" \"),s(\"h2\",{attrs:{id:\"_2-安装zipkin\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_2-安装zipkin\"}},[t._v(\"#\")]),t._v(\" 2：安装zipkin\")]),t._v(\" \"),s(\"p\",[t._v(\"安装链接如下 \"),s(\"a\",{attrs:{href:\"https://dl.bintray.com/openzipkin/maven/io/zipkin/java/zipkin-server/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"安装地址\"),s(\"OutboundLink\")],1)]),t._v(\" \"),s(\"p\",[s(\"img\",{attrs:{src:a(850),alt:\"Alt text\"}})]),t._v(\" \"),s(\"p\",[s(\"strong\",[t._v(\"运行jar包\")])]),t._v(\" \"),s(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[s(\"code\",[s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"java\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[t._v(\"-jar\")]),t._v(\" xxxx.jar\\n\")])]),t._v(\" \"),s(\"div\",{staticClass:\"line-numbers-wrapper\"},[s(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),s(\"br\")])]),s(\"p\",[s(\"strong\",[t._v(\"然后就可以访问web界面, 默认 \"),s(\"code\",[t._v(\"zipkin\")]),t._v(\" 监听的端口是 \"),s(\"code\",[t._v(\"9411\")])])]),t._v(\" \"),s(\"p\",[s(\"RouterLink\",{attrs:{to:\"localhost:9411/zipkin/\"}},[t._v(\"localhost:9411/zipkin/\")])],1),t._v(\" \"),s(\"p\",[s(\"strong\",[t._v(\"一条链路完整图片:\")])]),t._v(\" \"),s(\"p\",[s(\"img\",{attrs:{src:a(851),alt:\"Alt text\"}})]),t._v(\" \"),s(\"p\",[s(\"strong\",[t._v(\"精简版:\")])]),t._v(\" \"),s(\"p\",[s(\"img\",{attrs:{src:a(852),alt:\"Alt text\"}})]),t._v(\" \"),s(\"p\",[s(\"strong\",[t._v(\"可以看到,类似链表的形式\")])]),t._v(\" \"),s(\"h2\",{attrs:{id:\"_3-使用sleuth\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3-使用sleuth\"}},[t._v(\"#\")]),t._v(\" 3：使用sleuth\")]),t._v(\" \"),s(\"blockquote\",[s(\"p\",[t._v(\"既然是要进行链路调用展示，那肯定要进行 \"),s(\"code\",[t._v(\"远程调用\")]),t._v(\"，也就是 \"),s(\"code\",[t._v(\"生产者\")]),t._v(\" 发消息给 \"),s(\"code\",[t._v(\"消费者\")]),t._v(\" 进行消费\"),s(\"br\"),t._v(\"\\n不需要额外创建项目,使用之前的 \"),s(\"code\",[t._v(\"8001\")]),t._v(\" 和 \"),s(\"code\",[t._v(\"order\")]),t._v(\" 的 \"),s(\"code\",[t._v(\"80\")]),t._v(\" 即可\")])]),t._v(\" \"),s(\"h3\",{attrs:{id:\"_1-修改80\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1-修改80\"}},[t._v(\"#\")]),t._v(\" 1）修改80\")]),t._v(\" \"),s(\"h4\",{attrs:{id:\"引入-pom\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#引入-pom\"}},[t._v(\"#\")]),t._v(\" 引入 \"),s(\"code\",[t._v(\"pom\")]),t._v(\" :\")]),t._v(\" \"),s(\"div\",{staticClass:\"language-xml line-numbers-mode\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-xml\"}},[s(\"code\",[t._v(\"  \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"\\x3c!--包含了sleuth+zipkin--\\x3e\")]),t._v(\"\\n  \"),s(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[s(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"<\")]),t._v(\"dependency\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\">\")])]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[s(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"<\")]),t._v(\"groupId\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\">\")])]),t._v(\"org.springframework.cloud\"),s(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[s(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"</\")]),t._v(\"groupId\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\">\")])]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[s(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"<\")]),t._v(\"artifactId\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\">\")])]),t._v(\"spring-cloud-starter-zipkin\"),s(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[s(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"</\")]),t._v(\"artifactId\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\">\")])]),t._v(\"\\n  \"),s(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[s(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"</\")]),t._v(\"dependency\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\">\")])]),t._v(\"\\n\")])]),t._v(\" \"),s(\"div\",{staticClass:\"line-numbers-wrapper\"},[s(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"2\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"3\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"4\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"5\")]),s(\"br\")])]),s(\"p\",[t._v(\"这个包虽然叫 \"),s(\"code\",[t._v(\"zipkin\")]),t._v(\" 但是,里面包含了 \"),s(\"code\",[t._v(\"zpikin\")]),t._v(\" 与 \"),s(\"code\",[t._v(\"sleuth\")])]),t._v(\" \"),s(\"h4\",{attrs:{id:\"修改配置文件\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#修改配置文件\"}},[t._v(\"#\")]),t._v(\" 修改配置文件:\")]),t._v(\" \"),s(\"div\",{staticClass:\"language-yml line-numbers-mode\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-yml\"}},[s(\"code\",[s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"spring\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n  \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"application\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"name\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" cloud\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"order\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"service\\n  \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"zipkin\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"base-url\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" http\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"//localhost\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"9411\")]),t._v(\"\\n  \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"sleuth\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"sampler\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n      \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"probability\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"1\")]),t._v(\"\\n\")])]),t._v(\" \"),s(\"div\",{staticClass:\"line-numbers-wrapper\"},[s(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"2\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"3\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"4\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"5\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"6\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"7\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"8\")]),s(\"br\")])]),s(\"h3\",{attrs:{id:\"_2-修改80\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_2-修改80\"}},[t._v(\"#\")]),t._v(\" 2）修改80\")]),t._v(\" \"),s(\"p\",[t._v(\"和修改8001一样\")]),t._v(\" \"),s(\"h3\",{attrs:{id:\"_3-测试\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3-测试\"}},[t._v(\"#\")]),t._v(\" 3）测试\")]),t._v(\" \"),s(\"p\",[t._v(\"启动 \"),s(\"code\",[t._v(\"7001(eureka)\")]),t._v(\"，\"),s(\"code\",[t._v(\"8001(消费者)\")]),t._v(\"，\"),s(\"code\",[t._v(\"80(生产者)\")]),t._v(\"，\"),s(\"code\",[t._v(\"9411(zpikin与sleuth)\")])]),t._v(\" \"),s(\"p\",[s(\"img\",{attrs:{src:a(853),alt:\"Alt text\"}})])])}),[],!1,null,null,null);s.default=e.exports},849:function(t,s,a){t.exports=a.p+\"assets/img/image43.ab6ef1cb.png\"},850:function(t,s,a){t.exports=a.p+\"assets/img/image44.89ebd145.png\"},851:function(t,s,a){t.exports=a.p+\"assets/img/image45.28e9837c.png\"},852:function(t,s,a){t.exports=a.p+\"assets/img/image46.90818240.png\"},853:function(t,s,a){t.exports=a.p+\"assets/img/image47.1a273b74.png\"}}]);","extractedComments":[]}