{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{1629:function(_,v,t){\"use strict\";t.r(v);var e=t(1),s=Object(e.a)({},(function(){var _=this,v=_._self._c;return v(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":_.$parent.slotKey}},[v(\"h2\",{attrs:{id:\"_1-了解es\"}},[v(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1-了解es\"}},[_._v(\"#\")]),_._v(\" 1：了解ES\")]),_._v(\" \"),v(\"blockquote\",[v(\"p\",[v(\"strong\",[_._v(\"什么是 \"),v(\"code\",[_._v(\"elasticsearch\")]),_._v(\"？\")]),v(\"br\"),_._v(\"\\n一个开源的分布式搜索引擎，可以用来实现搜索、日志统计、分析、系统监控等功能\")])]),_._v(\" \"),v(\"blockquote\",[v(\"p\",[v(\"strong\",[_._v(\"什么是 \"),v(\"code\",[_._v(\"elastic stack（ELK）\")]),_._v(\"？\")]),v(\"br\"),_._v(\"\\n是以 \"),v(\"code\",[_._v(\"elasticsearch\")]),_._v(\" 为核心的技术栈，包括 \"),v(\"code\",[_._v(\"beats\")]),_._v(\"、\"),v(\"code\",[_._v(\"Logstash\")]),_._v(\"、\"),v(\"code\",[_._v(\"kibana\")]),_._v(\"、\"),v(\"code\",[_._v(\"elasticsearch\")])])]),_._v(\" \"),v(\"blockquote\",[v(\"p\",[v(\"strong\",[_._v(\"什么是 \"),v(\"code\",[_._v(\"Lucene\")]),_._v(\" ？\")]),v(\"br\"),_._v(\"\\n是 \"),v(\"code\",[_._v(\"Apache\")]),_._v(\" 的开源搜索引擎类库，提供了搜索引擎的核心API\")])]),_._v(\" \"),v(\"h2\",{attrs:{id:\"_2-倒排索引\"}},[v(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_2-倒排索引\"}},[_._v(\"#\")]),_._v(\" 2：倒排索引\")]),_._v(\" \"),v(\"p\",[v(\"code\",[_._v(\"倒排索引\")]),_._v(\" 的概念是基于 \"),v(\"code\",[_._v(\"MySQL\")]),_._v(\" 这样的 \"),v(\"code\",[_._v(\"正向索引\")]),_._v(\" 而言的。\")]),_._v(\" \"),v(\"h3\",{attrs:{id:\"_2-1-正向索引\"}},[v(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_2-1-正向索引\"}},[_._v(\"#\")]),_._v(\" 2.1 正向索引\")]),_._v(\" \"),v(\"p\",[v(\"img\",{attrs:{src:t(635),alt:\"alt text\"}})]),_._v(\" \"),v(\"p\",[_._v(\"如果是根据 \"),v(\"code\",[_._v(\"id\")]),_._v(\" 查询，那么直接走 \"),v(\"code\",[_._v(\"索引\")]),_._v(\"，查询速度非常快。\")]),_._v(\" \"),v(\"p\",[_._v(\"但如果是基于title做模糊查询，只能是逐行扫描数据，流程如下：\")]),_._v(\" \"),v(\"ul\",[v(\"li\",[v(\"p\",[_._v(\"1）用户 \"),v(\"code\",[_._v(\"搜索数据\")]),_._v(\" ，条件是title符合\"),v(\"code\",[_._v('\"%手机%\"')])])]),_._v(\" \"),v(\"li\",[v(\"p\",[_._v(\"2）逐行 \"),v(\"code\",[_._v(\"获取数据\")]),_._v(\"，比如id为1的数据\")])]),_._v(\" \"),v(\"li\",[v(\"p\",[_._v(\"3）判断数据中的 \"),v(\"code\",[_._v(\"title\")]),_._v(\" 是否符合用户搜索条件\")])]),_._v(\" \"),v(\"li\",[v(\"p\",[_._v(\"4）如果符合则放入结果集，不符合则丢弃。回到步骤1\")])])]),_._v(\" \"),v(\"p\",[v(\"code\",[_._v(\"逐行扫描\")]),_._v(\"，也就是 \"),v(\"code\",[_._v(\"全表扫描\")]),_._v(\"，随着数据量增加，其查询效率也会越来越低。当数据量达到数百万时，就是一场灾难。\")]),_._v(\" \"),v(\"h3\",{attrs:{id:\"_2-2-倒排索引\"}},[v(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_2-2-倒排索引\"}},[_._v(\"#\")]),_._v(\" 2.2 倒排索引\")]),_._v(\" \"),v(\"p\",[_._v(\"倒排索引中有两个非常重要的概念：\")]),_._v(\" \"),v(\"ul\",[v(\"li\",[_._v(\"文档（\"),v(\"code\",[_._v(\"Document\")]),_._v(\"）：用来搜索的数据，其中的每一条数据就是一个文档。例如一个网页、一个商品信息\")]),_._v(\" \"),v(\"li\",[_._v(\"词条（\"),v(\"code\",[_._v(\"Term\")]),_._v(\"）：对文档数据或用户搜索数据，利用某种算法分词，得到的具备含义的词语就是词条。例如：我是中国人，就可以分为：我、是、中国人、中国、国人这样的几个词条\")])]),_._v(\" \"),v(\"p\",[v(\"strong\",[_._v(\"创建倒排索引\")]),_._v(\"是对正向索引的一种特殊处理，流程如下：\")]),_._v(\" \"),v(\"ul\",[v(\"li\",[_._v(\"将每一个文档的数据利用算法分词，得到一个个词条\")]),_._v(\" \"),v(\"li\",[_._v(\"创建表，每行数据包括词条、词条所在文档id、位置等信息\")]),_._v(\" \"),v(\"li\",[_._v(\"因为词条唯一性，可以给词条创建索引，例如hash表结构索引\")])]),_._v(\" \"),v(\"p\",[_._v(\"如图：\")]),_._v(\" \"),v(\"p\",[v(\"img\",{attrs:{src:t(636),alt:\"alt text\"}})]),_._v(\" \"),v(\"p\",[_._v(\"倒排索引的\"),v(\"strong\",[_._v(\"搜索流程\")]),_._v('如下（以搜索\"华为手机\"为例）：')]),_._v(\" \"),v(\"ul\",[v(\"li\",[v(\"p\",[_._v(\"1）用户输入条件\"),v(\"code\",[_._v('\"华为手机\"')]),_._v(\"进行搜索。\")])]),_._v(\" \"),v(\"li\",[v(\"p\",[_._v(\"2）对用户输入内容\"),v(\"strong\",[_._v(\"分词\")]),_._v(\"，得到词条：\"),v(\"code\",[_._v(\"华为\")]),_._v(\"、\"),v(\"code\",[_._v(\"手机\")]),_._v(\"。\")])]),_._v(\" \"),v(\"li\",[v(\"p\",[_._v(\"3）拿着词条在倒排索引中查找，可以得到包含词条的文档id：1、2、3。\")])]),_._v(\" \"),v(\"li\",[v(\"p\",[_._v(\"4）拿着文档id到正向索引中查找具体文档。\")])])]),_._v(\" \"),v(\"p\",[_._v(\"如图：\")]),_._v(\" \"),v(\"p\",[v(\"img\",{attrs:{src:t(637),alt:\"alt text\"}})]),_._v(\" \"),v(\"p\",[_._v(\"虽然要先查询 \"),v(\"code\",[_._v(\"倒排索引\")]),_._v(\"，再查询 \"),v(\"code\",[_._v(\"倒排索引\")]),_._v(\"，但是无论是词条、还是文档id都建立了索引，查询速度非常快！无需全表扫描。\")]),_._v(\" \"),v(\"h3\",{attrs:{id:\"_2-3-正向和倒排\"}},[v(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_2-3-正向和倒排\"}},[_._v(\"#\")]),_._v(\" 2.3 正向和倒排\")]),_._v(\" \"),v(\"blockquote\",[v(\"p\",[_._v(\"那么为什么一个叫做正向索引，一个叫做倒排索引呢？\")])]),_._v(\" \"),v(\"ul\",[v(\"li\",[v(\"p\",[v(\"strong\",[_._v(\"正向索引\")]),_._v(\"是最传统的，根据id索引的方式。但根据词条查询时，必须先逐条获取每个文档，然后判断文档中是否包含所需要的词条，是\"),v(\"strong\",[_._v(\"根据文档找词条的过程\")]),_._v(\"。\")])]),_._v(\" \"),v(\"li\",[v(\"p\",[_._v(\"而\"),v(\"strong\",[_._v(\"倒排索引\")]),_._v(\"则相反，是先找到用户要搜索的词条，根据词条得到保护词条的文档的id，然后根据id获取文档。是\"),v(\"strong\",[_._v(\"根据词条找文档的过程\")]),_._v(\"。\")])])]),_._v(\" \"),v(\"p\",[_._v(\"是不是恰好反过来了？\")]),_._v(\" \"),v(\"p\",[_._v(\"那么两者方式的优缺点是什么呢？\")]),_._v(\" \"),v(\"p\",[v(\"strong\",[_._v(\"正向索引\")]),_._v(\"：\")]),_._v(\" \"),v(\"ul\",[v(\"li\",[_._v(\"优点：\\n\"),v(\"ul\",[v(\"li\",[_._v(\"可以给 \"),v(\"code\",[_._v(\"多个字段\")]),_._v(\" 创建 \"),v(\"code\",[_._v(\"索引\")])]),_._v(\" \"),v(\"li\",[_._v(\"根据 \"),v(\"code\",[_._v(\"索引字段\")]),_._v(\" 搜索、排序速度非常快\")])])]),_._v(\" \"),v(\"li\",[_._v(\"缺点：\\n\"),v(\"ul\",[v(\"li\",[_._v(\"根据 \"),v(\"code\",[_._v(\"非索引字段\")]),_._v(\"，或者索引字段中的部分词条查找时，只能全表扫描。\")])])])]),_._v(\" \"),v(\"p\",[v(\"strong\",[_._v(\"倒排索引\")]),_._v(\"：\")]),_._v(\" \"),v(\"ul\",[v(\"li\",[_._v(\"优点：\\n\"),v(\"ul\",[v(\"li\",[_._v(\"根据 \"),v(\"code\",[_._v(\"词条搜索\")]),_._v(\"、 \"),v(\"code\",[_._v(\"模糊搜索\")]),_._v(\" 时，速度非常快\")])])]),_._v(\" \"),v(\"li\",[_._v(\"缺点：\\n\"),v(\"ul\",[v(\"li\",[_._v(\"只能给词条创建索引，而不是字段\")]),_._v(\" \"),v(\"li\",[_._v(\"无法根据字段做排序\")])])])]),_._v(\" \"),v(\"h2\",{attrs:{id:\"_3-es的一些概念\"}},[v(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3-es的一些概念\"}},[_._v(\"#\")]),_._v(\" 3：es的一些概念\")]),_._v(\" \"),v(\"h3\",{attrs:{id:\"_3-1-文档和字段\"}},[v(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3-1-文档和字段\"}},[_._v(\"#\")]),_._v(\" 3.1 文档和字段\")]),_._v(\" \"),v(\"p\",[v(\"code\",[_._v(\"elasticsearch\")]),_._v(\" 是面向**文档（Document）**存储的，可以是数据库中的一条商品数据，一个订单信息。文档数据会被 \"),v(\"code\",[_._v(\"序列化为json格式\")]),_._v(\" 后存储在 \"),v(\"code\",[_._v(\"elasticsearch\")]),_._v(\" 中：\")]),_._v(\" \"),v(\"p\",[v(\"img\",{attrs:{src:t(638),alt:\"alt text\"}})]),_._v(\" \"),v(\"p\",[_._v(\"而Json文档中往往包含很多的\"),v(\"strong\",[_._v(\"字段（Field）\")]),_._v(\"，类似于数据库中的 \"),v(\"code\",[_._v(\"列\")]),_._v(\" 。\")]),_._v(\" \"),v(\"h3\",{attrs:{id:\"_3-2-索引和映射\"}},[v(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3-2-索引和映射\"}},[_._v(\"#\")]),_._v(\" 3.2 索引和映射\")]),_._v(\" \"),v(\"p\",[v(\"strong\",[_._v(\"索引（Index）\")]),_._v(\"，就是相同类型的文档的集合。\")]),_._v(\" \"),v(\"p\",[_._v(\"例如：\")]),_._v(\" \"),v(\"ul\",[v(\"li\",[_._v(\"所有 \"),v(\"code\",[_._v(\"用户文档\")]),_._v(\"，就可以组织在一起，称为 \"),v(\"code\",[_._v(\"用户\")]),_._v(\"的 \"),v(\"code\",[_._v(\"索引\")]),_._v(\"；\")]),_._v(\" \"),v(\"li\",[_._v(\"所有 \"),v(\"code\",[_._v(\"商品的文档\")]),_._v(\"，可以组织在一起，称为 \"),v(\"code\",[_._v(\"商品\")]),_._v(\" 的 \"),v(\"code\",[_._v(\"索引\")]),_._v(\"；\")]),_._v(\" \"),v(\"li\",[_._v(\"所有 \"),v(\"code\",[_._v(\"订单的文档\")]),_._v(\"，可以组织在一起，称为 \"),v(\"code\",[_._v(\"订单\")]),_._v(\" 的 \"),v(\"code\",[_._v(\"索引\")]),_._v(\"；\")])]),_._v(\" \"),v(\"p\",[v(\"img\",{attrs:{src:t(639),alt:\"alt text\"}})]),_._v(\" \"),v(\"p\",[_._v(\"因此，我们可以把索引当做是数据库中的表。\")]),_._v(\" \"),v(\"p\",[_._v(\"数据库的表会有约束信息，用来定义表的结构、字段的名称、类型等信息。因此，索引库中就有\"),v(\"strong\",[_._v(\"映射（mapping）\")]),_._v(\"，是索引中文档的字段约束信息，类似表的结构约束。\")]),_._v(\" \"),v(\"h3\",{attrs:{id:\"_3-3-mysql与elasticsearch\"}},[v(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3-3-mysql与elasticsearch\"}},[_._v(\"#\")]),_._v(\" 3.3 mysql与elasticsearch\")]),_._v(\" \"),v(\"p\",[_._v(\"我们统一的把mysql与elasticsearch的概念做一下对比：\")]),_._v(\" \"),v(\"table\",[v(\"thead\",[v(\"tr\",[v(\"th\",[v(\"strong\",[_._v(\"MySQL\")])]),_._v(\" \"),v(\"th\",[v(\"strong\",[_._v(\"Elasticsearch\")])]),_._v(\" \"),v(\"th\",[v(\"strong\",[_._v(\"说明\")])])])]),_._v(\" \"),v(\"tbody\",[v(\"tr\",[v(\"td\",[_._v(\"Table\")]),_._v(\" \"),v(\"td\",[_._v(\"Index\")]),_._v(\" \"),v(\"td\",[_._v(\"索引(index)，就是文档的集合，类似数据库的表(table)\")])]),_._v(\" \"),v(\"tr\",[v(\"td\",[_._v(\"Row\")]),_._v(\" \"),v(\"td\",[_._v(\"Document\")]),_._v(\" \"),v(\"td\",[_._v(\"文档（Document），就是一条条的数据，类似数据库中的行（Row），文档都是JSON格式\")])]),_._v(\" \"),v(\"tr\",[v(\"td\",[_._v(\"Column\")]),_._v(\" \"),v(\"td\",[_._v(\"Field\")]),_._v(\" \"),v(\"td\",[_._v(\"字段（Field），就是JSON文档中的字段，类似数据库中的列（Column）\")])]),_._v(\" \"),v(\"tr\",[v(\"td\",[_._v(\"Schema\")]),_._v(\" \"),v(\"td\",[_._v(\"Mapping\")]),_._v(\" \"),v(\"td\",[_._v(\"Mapping（映射）是索引中文档的约束，例如字段类型约束。类似数据库的表结构（Schema）\")])]),_._v(\" \"),v(\"tr\",[v(\"td\",[_._v(\"SQL\")]),_._v(\" \"),v(\"td\",[_._v(\"DSL\")]),_._v(\" \"),v(\"td\",[_._v(\"DSL是elasticsearch提供的JSON风格的请求语句，用来操作elasticsearch，实现CRUD\")])])])]),_._v(\" \"),v(\"blockquote\",[v(\"p\",[_._v(\"是不是说，我们学习了 \"),v(\"code\",[_._v(\"elasticsearch\")]),_._v(\" 就不再需要 \"),v(\"code\",[_._v(\"mysql\")]),_._v(\" 了呢？\")])]),_._v(\" \"),v(\"p\",[_._v(\"并不是如此，两者各自有自己的擅长支出：\")]),_._v(\" \"),v(\"ul\",[v(\"li\",[v(\"p\",[v(\"code\",[_._v(\"Mysql\")]),_._v(\"：擅长事务类型操作，可以确保数据的安全和一致性\")])]),_._v(\" \"),v(\"li\",[v(\"p\",[v(\"code\",[_._v(\"Elasticsearch\")]),_._v(\"：擅长海量数据的搜索、分析、计算\")])])]),_._v(\" \"),v(\"p\",[_._v(\"因此在企业中，往往是两者结合使用：\")]),_._v(\" \"),v(\"ul\",[v(\"li\",[_._v(\"对安全性要求较高的写操作，使用mysql实现\")]),_._v(\" \"),v(\"li\",[_._v(\"对查询性能要求较高的搜索需求，使用elasticsearch实现\")]),_._v(\" \"),v(\"li\",[_._v(\"两者再基于某种方式，实现数据的同步，保证一致性\")])]),_._v(\" \"),v(\"p\",[v(\"img\",{attrs:{src:t(640),alt:\"alt text\"}})]),_._v(\" \"),v(\"h2\",{attrs:{id:\"_4-安装es\"}},[v(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_4-安装es\"}},[_._v(\"#\")]),_._v(\" 4：安装es\")]),_._v(\" \"),v(\"h3\",{attrs:{id:\"_4-1-参考地址\"}},[v(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_4-1-参考地址\"}},[_._v(\"#\")]),_._v(\" 4.1 参考地址\")]),_._v(\" \"),v(\"p\",[v(\"a\",{attrs:{href:\"https://hu-haoze.gitee.io/xiaoze-blog/blogs/%E5%90%8E%E7%AB%AF/elasticSearch/2%EF%BC%9Awindows%E5%AE%89%E8%A3%85elasticSearch.html\",target:\"_blank\",rel:\"noopener noreferrer\"}},[_._v(\"安装参考地址\"),v(\"OutboundLink\")],1)]),_._v(\" \"),v(\"h3\",{attrs:{id:\"_4-2-总结\"}},[v(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_4-2-总结\"}},[_._v(\"#\")]),_._v(\" 4.2 总结\")]),_._v(\" \"),v(\"blockquote\",[v(\"p\",[v(\"strong\",[v(\"code\",[_._v(\"分词器\")]),_._v(\" 的作用是什么？\")])]),_._v(\" \"),v(\"ul\",[v(\"li\",[_._v(\"创建倒排索引时对文档分词\")]),_._v(\" \"),v(\"li\",[_._v(\"用户搜索时，对输入的内容分词\")])])]),_._v(\" \"),v(\"blockquote\",[v(\"p\",[v(\"strong\",[v(\"code\",[_._v(\"IK分词器\")]),_._v(\" 有几种模式？\")])]),_._v(\" \"),v(\"ul\",[v(\"li\",[v(\"code\",[_._v(\"ik_smart\")]),_._v(\" ：智能切分，粗粒度\")]),_._v(\" \"),v(\"li\",[v(\"code\",[_._v(\"ik_max_word\")]),_._v(\"：最细切分，细粒度\")])])]),_._v(\" \"),v(\"blockquote\",[v(\"p\",[v(\"strong\",[v(\"code\",[_._v(\"IK分词器\")]),_._v(\" 如何拓展词条？如何停用词条？\")])]),_._v(\" \"),v(\"ul\",[v(\"li\",[_._v(\"利用 \"),v(\"code\",[_._v(\"config\")]),_._v(\" 目录的 \"),v(\"code\",[_._v(\"IkAnalyzer.cfg.xml\")]),_._v(\" 文件添加拓展词典和停用词典\")]),_._v(\" \"),v(\"li\",[_._v(\"在词典中添加拓展词条或者停用词条\")])])])])}),[],!1,null,null,null);v.default=s.exports},635:function(_,v,t){_.exports=t.p+\"assets/img/image31.f0692e7c.png\"},636:function(_,v,t){_.exports=t.p+\"assets/img/image32.95884ad3.png\"},637:function(_,v,t){_.exports=t.p+\"assets/img/image33.2ac91450.png\"},638:function(_,v,t){_.exports=t.p+\"assets/img/image34.9ebf4471.png\"},639:function(_,v,t){_.exports=t.p+\"assets/img/image35.8aeed824.png\"},640:function(_,v,t){_.exports=t.p+\"assets/img/image36.8d02597b.png\"}}]);","extractedComments":[]}